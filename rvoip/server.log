warning: method `handle_auto_options` is never used
   --> crates/dialog-core/src/manager/unified.rs:563:14
    |
197 | impl UnifiedDialogManager {
    | ------------------------- method in this implementation
...
563 |     async fn handle_auto_options(&self, request: Request, source: SocketAddr) -> ApiResult<()> {
    |              ^^^^^^^^^^^^^^^^^^^
    |
    = note: `#[warn(dead_code)]` on by default

warning: method `extract_body_string` is never used
   --> crates/dialog-core/src/protocol/invite_handler.rs:177:8
    |
71  | impl DialogManager {
    | ------------------ method in this implementation
...
177 |     fn extract_body_string(&self, request: &Request) -> String {
    |        ^^^^^^^^^^^^^^^^^^^

warning: `rvoip-dialog-core` (lib) generated 2 warnings
warning: unused import: `StaticEvent`
  --> crates/infra-common/src/events/static_path.rs:14:60
   |
14 | use crate::events::types::{Event, EventResult, EventError, StaticEvent, EventFilter};
   |                                                            ^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` on by default

warning: unused imports: `EventError` and `StaticEvent`
  --> crates/infra-common/src/events/system.rs:16:48
   |
16 | use crate::events::types::{Event, EventResult, EventError, EventFilter, StaticEvent};
   |                                                ^^^^^^^^^^               ^^^^^^^^^^^

warning: unused imports: `EventSystemBuilder` and `ImplementationType`
  --> crates/infra-common/src/events/system.rs:21:30
   |
21 | use crate::events::builder::{ImplementationType, EventSystemBuilder};
   |                              ^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^

warning: variable does not need to be mutable
  --> crates/infra-common/src/lifecycle/manager.rs:87:13
   |
87 |         let mut components = self.components.write().unwrap();
   |             ----^^^^^^^^^^
   |             |
   |             help: remove this `mut`
   |
   = note: `#[warn(unused_mut)]` on by default

warning: variable does not need to be mutable
   --> crates/infra-common/src/lifecycle/manager.rs:107:13
    |
107 |         let mut components = self.components.write().unwrap();
    |             ----^^^^^^^^^^
    |             |
    |             help: remove this `mut`

warning: variable does not need to be mutable
   --> crates/infra-common/src/lifecycle/manager.rs:127:13
    |
127 |         let mut components = self.components.write().unwrap();
    |             ----^^^^^^^^^^
    |             |
    |             help: remove this `mut`

warning: variable does not need to be mutable
   --> crates/infra-common/src/lifecycle/manager.rs:148:13
    |
148 |         let mut components = self.components.write().unwrap();
    |             ----^^^^^^^^^^
    |             |
    |             help: remove this `mut`

warning: use of deprecated method `config::Config::merge`: please use 'ConfigBuilder' instead
  --> crates/infra-common/src/config/loader.rs:63:20
   |
63 |             config.merge(File::from(base_path.clone()))
   |                    ^^^^^
   |
   = note: `#[warn(deprecated)]` on by default

warning: use of deprecated method `config::Config::merge`: please use 'ConfigBuilder' instead
  --> crates/infra-common/src/config/loader.rs:69:20
   |
69 |             config.merge(File::from(env_path))
   |                    ^^^^^

warning: use of deprecated method `config::Config::merge`: please use 'ConfigBuilder' instead
  --> crates/infra-common/src/config/loader.rs:75:16
   |
75 |         config.merge(Environment::with_prefix(&env_prefix).separator("__"))
   |                ^^^^^

warning: use of deprecated method `config::Config::merge`: please use 'ConfigBuilder' instead
  --> crates/infra-common/src/config/loader.rs:97:16
   |
97 |         config.merge(Environment::with_prefix(&env_prefix).separator("__"))
   |                ^^^^^

warning: use of deprecated method `config::Config::merge`: please use 'ConfigBuilder' instead
   --> crates/infra-common/src/config/loader.rs:115:20
    |
115 |             config.merge(File::from(p.clone()))
    |                    ^^^^^

warning: methods `type_name` and `clone_sender` are never used
  --> crates/infra-common/src/events/registry.rs:37:8
   |
35 | trait AnyBroadcastSender: Send + Sync + 'static {
   |       ------------------ methods in this trait
36 |     fn as_any(&self) -> &dyn Any;
37 |     fn type_name(&self) -> &str;
   |        ^^^^^^^^^
38 |     fn clone_sender(&self) -> Box<dyn AnyBroadcastSender>;
   |        ^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` on by default

warning: fields `id`, `event_type`, and `priority` are never read
  --> crates/infra-common/src/events/subscriber.rs:11:16
   |
10 | pub struct SubscriberHandle {
   |            ---------------- fields in this struct
11 |     pub(crate) id: u64,
   |                ^^
12 |     pub(crate) event_type: EventType,
   |                ^^^^^^^^^^
13 |     pub(crate) priority: EventPriority,
   |                ^^^^^^^^
   |
   = note: `SubscriberHandle` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis

warning: `infra-common` (lib) generated 14 warnings (run `cargo fix --lib -p infra-common` to apply 7 suggestions)
warning: unused import: `SessionManagerConfig`
  --> crates/client-core/src/client/manager.rs:11:5
   |
11 |     SessionManagerConfig,
   |     ^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` on by default

warning: unused import: `std::collections::HashMap`
 --> crates/client-core/src/client/media_builder.rs:5:5
  |
5 | use std::collections::HashMap;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a module
   --> crates/client-core/src/client/mod.rs:238:1
    |
238 | pub mod config;
    | ^^^^^^^^^^^^^^
    |
note: the lint level is defined here
   --> crates/client-core/src/lib.rs:130:9
    |
130 | #![warn(missing_docs)]
    |         ^^^^^^^^^^^^

warning: missing documentation for a module
   --> crates/client-core/src/client/mod.rs:239:1
    |
239 | pub mod controls;
    | ^^^^^^^^^^^^^^^^

warning: missing documentation for a module
   --> crates/client-core/src/client/mod.rs:241:1
    |
241 | pub mod manager;
    | ^^^^^^^^^^^^^^^

warning: missing documentation for a type alias
   --> crates/client-core/src/client/mod.rs:289:1
    |
289 | pub type Client = ClientManager;
    | ^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/config.rs:13:5
   |
13 |     pub echo_cancellation: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/config.rs:14:5
   |
14 |     pub noise_suppression: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/config.rs:15:5
   |
15 |     pub auto_gain_control: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/config.rs:22:5
   |
22 |     pub srtp_profiles: Vec<String>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/config.rs:26:5
   |
26 |     pub rtp_port_end: u16,
   |     ^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/events.rs:30:5
   |
30 |     pub client_event_handler: Arc<RwLock<Option<Arc<dyn ClientEventHandler>>>>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/events.rs:31:5
   |
31 |     pub call_mapping: Arc<DashMap<SessionId, CallId>>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/events.rs:32:5
   |
32 |     pub session_mapping: Arc<DashMap<CallId, SessionId>>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/events.rs:33:5
   |
33 |     pub call_info: Arc<DashMap<CallId, CallInfo>>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/events.rs:34:5
   |
34 |     pub incoming_calls: Arc<DashMap<CallId, IncomingCall>>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/events.rs:35:5
   |
35 |     pub event_tx: Option<tokio::sync::broadcast::Sender<crate::events::ClientEvent>>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for an associated function
  --> crates/client-core/src/client/events.rs:51:5
   |
51 | /     pub fn new(
52 | |         call_mapping: Arc<DashMap<SessionId, CallId>>,
53 | |         session_mapping: Arc<DashMap<CallId, SessionId>>,
54 | |         call_info: Arc<DashMap<CallId, CallInfo>>,
55 | |         incoming_calls: Arc<DashMap<CallId, IncomingCall>>,
56 | |     ) -> Self {
   | |_____________^

warning: missing documentation for a method
  --> crates/client-core/src/client/events.rs:67:5
   |
67 |     pub fn with_event_tx(mut self, event_tx: tokio::sync::broadcast::Sender<crate::events::ClientEvent>) -> Sel...
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a method
  --> crates/client-core/src/client/events.rs:72:5
   |
72 |     pub async fn set_event_handler(&self, handler: Arc<dyn ClientEventHandler>) {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a method
   --> crates/client-core/src/client/events.rs:114:5
    |
114 |     pub fn extract_display_name_from_header(&self, header: &str) -> Option<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a method
   --> crates/client-core/src/client/media.rs:197:5
    |
197 |     pub async fn get_available_codecs(&self) -> Vec<AudioCodecInfo> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:14:5
   |
14 |     pub is_running: bool,
   |     ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:15:5
   |
15 |     pub local_sip_addr: std::net::SocketAddr,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:16:5
   |
16 |     pub local_media_addr: std::net::SocketAddr,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:17:5
   |
17 |     pub total_calls: usize,
   |     ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:18:5
   |
18 |     pub connected_calls: usize,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:19:5
   |
19 |     pub total_registrations: usize,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:20:5
   |
20 |     pub active_registrations: usize,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:28:5
   |
28 |     pub call_id: CallId,
   |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:29:5
   |
29 |     pub local_sdp: Option<String>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:30:5
   |
30 |     pub remote_sdp: Option<String>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:31:5
   |
31 |     pub local_rtp_port: Option<u16>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:32:5
   |
32 |     pub remote_rtp_port: Option<u16>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:33:5
   |
33 |     pub codec: Option<String>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:34:5
   |
34 |     pub is_muted: bool,
   |     ^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:35:5
   |
35 |     pub is_on_hold: bool,
   |     ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:36:5
   |
36 |     pub audio_direction: AudioDirection,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:37:5
   |
37 |     pub quality_metrics: Option<AudioQualityMetrics>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:43:5
   |
43 |     pub name: String,
   |     ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:44:5
   |
44 |     pub payload_type: u8,
   |     ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:45:5
   |
45 |     pub clock_rate: u32,
   |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:46:5
   |
46 |     pub channels: u8,
   |     ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:47:5
   |
47 |     pub description: String,
   |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:48:5
   |
48 |     pub quality_rating: u8, // 1-5 scale
   |     ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/client/types.rs:54:5
   |
54 |     SendReceive,
   |     ^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/client/types.rs:55:5
   |
55 |     SendOnly,
   |     ^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/client/types.rs:56:5
   |
56 |     ReceiveOnly,
   |     ^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/client/types.rs:57:5
   |
57 |     Inactive,
   |     ^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:63:5
   |
63 |     pub mos_score: Option<f32>,      // Mean Opinion Score (1.0-5.0)
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:64:5
   |
64 |     pub jitter_ms: Option<u32>,      // Jitter in milliseconds
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:65:5
   |
65 |     pub packet_loss_percent: Option<f32>, // Packet loss percentage
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:66:5
   |
66 |     pub round_trip_time_ms: Option<u32>,  // RTT in milliseconds
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:67:5
   |
67 |     pub bitrate_kbps: Option<u32>,   // Current bitrate in kbps
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:73:5
   |
73 |     pub supported_codecs: Vec<AudioCodecInfo>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:74:5
   |
74 |     pub can_hold: bool,
   |     ^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:75:5
   |
75 |     pub can_mute_microphone: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:76:5
   |
76 |     pub can_mute_speaker: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:77:5
   |
77 |     pub can_send_dtmf: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:78:5
   |
78 |     pub can_transfer: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:79:5
   |
79 |     pub supports_sdp_offer_answer: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:80:5
   |
80 |     pub supports_rtp: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:81:5
   |
81 |     pub supports_rtcp: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:82:5
   |
82 |     pub max_concurrent_calls: usize,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:83:5
   |
83 |     pub supported_media_types: Vec<String>, // "audio", "video"
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:89:5
   |
89 |     pub can_hold: bool,
   |     ^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:90:5
   |
90 |     pub can_resume: bool,
   |     ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:91:5
   |
91 |     pub can_transfer: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:92:5
   |
92 |     pub can_send_dtmf: bool,
   |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:93:5
   |
93 |     pub can_mute: bool,
   |     ^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/client/types.rs:94:5
   |
94 |     pub can_hangup: bool,
   |     ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:113:5
    |
113 |     pub call_id: CallId,
    |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:114:5
    |
114 |     pub session_id: rvoip_session_core::api::types::SessionId,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:115:5
    |
115 |     pub media_session_id: String,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:116:5
    |
116 |     pub local_rtp_port: Option<u16>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:117:5
    |
117 |     pub remote_rtp_port: Option<u16>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:118:5
    |
118 |     pub codec: Option<String>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:119:5
    |
119 |     pub media_direction: AudioDirection,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:120:5
    |
120 |     pub quality_metrics: Option<AudioQualityMetrics>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:121:5
    |
121 |     pub is_active: bool,
    |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:122:5
    |
122 |     pub created_at: DateTime<Utc>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:128:5
    |
128 |     pub call_id: CallId,
    |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:129:5
    |
129 |     pub negotiated_codec: Option<String>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:130:5
    |
130 |     pub local_rtp_port: Option<u16>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:131:5
    |
131 |     pub remote_rtp_port: Option<u16>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:132:5
    |
132 |     pub audio_direction: AudioDirection,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:133:5
    |
133 |     pub local_sdp: String,
    |     ^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:134:5
    |
134 |     pub remote_sdp: String,
    |     ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:135:5
    |
135 |     pub negotiated_at: DateTime<Utc>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:136:5
    |
136 |     pub supports_dtmf: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:137:5
    |
137 |     pub supports_hold: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:138:5
    |
138 |     pub bandwidth_kbps: Option<u32>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:139:5
    |
139 |     pub encryption_enabled: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:145:5
    |
145 |     pub basic_capabilities: MediaCapabilities,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:146:5
    |
146 |     pub supports_sdp_offer_answer: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:147:5
    |
147 |     pub supports_media_session_lifecycle: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:148:5
    |
148 |     pub supports_sdp_renegotiation: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:149:5
    |
149 |     pub supports_early_media: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:150:5
    |
150 |     pub supports_media_session_updates: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:151:5
    |
151 |     pub supports_codec_negotiation: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:152:5
    |
152 |     pub supports_bandwidth_management: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:153:5
    |
153 |     pub supports_encryption: bool,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:154:5
    |
154 |     pub supported_sdp_version: String,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:155:5
    |
155 |     pub max_media_sessions: usize,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:156:5
    |
156 |     pub preferred_rtp_port_range: (u16, u16),
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/client/types.rs:157:5
    |
157 |     pub supported_transport_protocols: Vec<String>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/call.rs:106:5
    |
106 |     pub total_active_calls: usize,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/call.rs:107:5
    |
107 |     pub connected_calls: usize,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/call.rs:108:5
    |
108 |     pub incoming_pending_calls: usize,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/registration.rs:138:5
    |
138 |     pub total_registrations: usize,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/registration.rs:139:5
    |
139 |     pub active_registrations: usize,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/registration.rs:140:5
    |
140 |     pub failed_registrations: usize,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:75:5
   |
75 |     MicrophoneStateChanged { muted: bool },
   |     ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:75:30
   |
75 |     MicrophoneStateChanged { muted: bool },
   |                              ^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:76:5
   |
76 |     SpeakerStateChanged { muted: bool },
   |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:76:27
   |
76 |     SpeakerStateChanged { muted: bool },
   |                           ^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:77:5
   |
77 |     AudioStarted,
   |     ^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:78:5
   |
78 |     AudioStopped,
   |     ^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:79:5
   |
79 |     HoldStateChanged { on_hold: bool },
   |     ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:79:24
   |
79 |     HoldStateChanged { on_hold: bool },
   |                        ^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:80:5
   |
80 |     DtmfSent { digits: String },
   |     ^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:80:16
   |
80 |     DtmfSent { digits: String },
   |                ^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:81:5
   |
81 |     TransferInitiated { target: String, transfer_type: String },
   |     ^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:81:25
   |
81 |     TransferInitiated { target: String, transfer_type: String },
   |                         ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:81:41
   |
81 |     TransferInitiated { target: String, transfer_type: String },
   |                                         ^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:84:5
   |
84 |     SdpOfferGenerated { sdp_size: usize },
   |     ^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:84:25
   |
84 |     SdpOfferGenerated { sdp_size: usize },
   |                         ^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:85:5
   |
85 |     SdpAnswerProcessed { sdp_size: usize },
   |     ^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:85:26
   |
85 |     SdpAnswerProcessed { sdp_size: usize },
   |                          ^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:86:5
   |
86 |     MediaSessionStarted { media_session_id: String },
   |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:86:27
   |
86 |     MediaSessionStarted { media_session_id: String },
   |                           ^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:87:5
   |
87 |     MediaSessionStopped,
   |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:88:5
   |
88 |     MediaSessionUpdated { sdp_size: usize },
   |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:88:27
   |
88 |     MediaSessionUpdated { sdp_size: usize },
   |                           ^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:91:5
   |
91 |     QualityChanged { mos_score_x100: u32 }, // MOS score * 100 (e.g., 425 = 4.25)
   |     ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:91:22
   |
91 |     QualityChanged { mos_score_x100: u32 }, // MOS score * 100 (e.g., 425 = 4.25)
   |                      ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:92:5
   |
92 |     PacketLoss { percentage_x100: u32 }, // Percentage * 100 (e.g., 150 = 1.5%)
   |     ^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:92:18
   |
92 |     PacketLoss { percentage_x100: u32 }, // Percentage * 100 (e.g., 150 = 1.5%)
   |                  ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
  --> crates/client-core/src/events.rs:93:5
   |
93 |     JitterChanged { jitter_ms: u32 },
   |     ^^^^^^^^^^^^^

warning: missing documentation for a struct field
  --> crates/client-core/src/events.rs:93:21
   |
93 |     JitterChanged { jitter_ms: u32 },
   |                     ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:142:9
    |
142 |         info: IncomingCallInfo,
    |         ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:143:9
    |
143 |         priority: EventPriority,
    |         ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:154:9
    |
154 |         info: MediaEventInfo,
    |         ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:155:9
    |
155 |         priority: EventPriority,
    |         ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:159:9
    |
159 |         info: RegistrationStatusInfo,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:160:9
    |
160 |         priority: EventPriority,
    |         ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:164:9
    |
164 |         error: crate::ClientError,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:165:9
    |
165 |         call_id: Option<CallId>,
    |         ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:166:9
    |
166 |         priority: EventPriority,
    |         ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:170:9
    |
170 |         connected: bool,
    |         ^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:171:9
    |
171 |         reason: Option<String>,
    |         ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/events.rs:172:9
    |
172 |         priority: EventPriority,
    |         ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:263:26
    |
263 |     RegistrationFailed { reason: String },
    |                          ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:266:5
    |
266 |     NotRegistered,
    |     ^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:269:5
    |
269 |     RegistrationExpired,
    |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:272:5
    |
272 |     AuthenticationFailed { reason: String },
    |     ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:272:28
    |
272 |     AuthenticationFailed { reason: String },
    |                            ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:276:20
    |
276 |     CallNotFound { call_id: Uuid },
    |                    ^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:279:5
    |
279 |     CallAlreadyExists { call_id: Uuid },
    |     ^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:279:25
    |
279 |     CallAlreadyExists { call_id: Uuid },
    |                         ^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:282:5
    |
282 |     InvalidCallState { 
    |     ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:283:9
    |
283 |         call_id: Uuid, 
    |         ^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:284:9
    |
284 |         current_state: crate::call::CallState 
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:288:5
    |
288 |     InvalidCallStateGeneric { expected: String, actual: String },
    |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:288:31
    |
288 |     InvalidCallStateGeneric { expected: String, actual: String },
    |                               ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:288:49
    |
288 |     InvalidCallStateGeneric { expected: String, actual: String },
    |                                                 ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:291:5
    |
291 |     CallSetupFailed { reason: String },
    |     ^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:291:23
    |
291 |     CallSetupFailed { reason: String },
    |                       ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:294:5
    |
294 |     CallTerminated { reason: String },
    |     ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:294:22
    |
294 |     CallTerminated { reason: String },
    |                      ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:298:30
    |
298 |     MediaNegotiationFailed { reason: String },
    |                              ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:301:5
    |
301 |     MediaError { details: String },
    |     ^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:301:18
    |
301 |     MediaError { details: String },
    |                  ^^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:304:5
    |
304 |     NoCompatibleCodecs,
    |     ^^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:307:5
    |
307 |     AudioDeviceError { reason: String },
    |     ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:307:24
    |
307 |     AudioDeviceError { reason: String },
    |                        ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:311:20
    |
311 |     NetworkError { reason: String },
    |                    ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:314:5
    |
314 |     ConnectionTimeout,
    |     ^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:317:5
    |
317 |     ServerUnreachable { server: String },
    |     ^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:317:25
    |
317 |     ServerUnreachable { server: String },
    |                         ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:321:21
    |
321 |     ProtocolError { reason: String },
    |                     ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:324:5
    |
324 |     InvalidSipMessage { reason: String },
    |     ^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:324:25
    |
324 |     InvalidSipMessage { reason: String },
    |                         ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:327:5
    |
327 |     ProtocolVersionMismatch { expected: String, actual: String },
    |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:327:31
    |
327 |     ProtocolVersionMismatch { expected: String, actual: String },
    |                               ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:327:49
    |
327 |     ProtocolVersionMismatch { expected: String, actual: String },
    |                                                 ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:331:28
    |
331 |     InvalidConfiguration { field: String, reason: String },
    |                            ^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:331:43
    |
331 |     InvalidConfiguration { field: String, reason: String },
    |                                           ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:334:5
    |
334 |     MissingConfiguration { field: String },
    |     ^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:334:28
    |
334 |     MissingConfiguration { field: String },
    |                            ^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:338:23
    |
338 |     TransportFailed { reason: String },
    |                       ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:341:5
    |
341 |     TransportNotAvailable { transport_type: String },
    |     ^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:341:29
    |
341 |     TransportNotAvailable { transport_type: String },
    |                             ^^^^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:345:27
    |
345 |     SessionManagerError { reason: String },
    |                           ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:348:5
    |
348 |     TooManySessions { limit: usize },
    |     ^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:348:23
    |
348 |     TooManySessions { limit: usize },
    |                       ^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:352:21
    |
352 |     InternalError { message: String },
    |                     ^^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:355:5
    |
355 |     OperationTimeout { duration_ms: u64 },
    |     ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:355:24
    |
355 |     OperationTimeout { duration_ms: u64 },
    |                        ^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:358:5
    |
358 |     NotImplemented { feature: String, reason: String },
    |     ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:358:22
    |
358 |     NotImplemented { feature: String, reason: String },
    |                      ^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:358:39
    |
358 |     NotImplemented { feature: String, reason: String },
    |                                       ^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:361:5
    |
361 |     PermissionDenied { operation: String },
    |     ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:361:24
    |
361 |     PermissionDenied { operation: String },
    |                        ^^^^^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:364:5
    |
364 |     ResourceUnavailable { resource: String },
    |     ^^^^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:364:27
    |
364 |     ResourceUnavailable { resource: String },
    |                           ^^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:368:24
    |
368 |     UnsupportedCodec { codec: String },
    |                        ^^^^^^^^^^^^^

warning: missing documentation for a variant
   --> crates/client-core/src/error.rs:371:5
    |
371 |     CodecError { reason: String },
    |     ^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:371:18
    |
371 |     CodecError { reason: String },
    |                  ^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:375:28
    |
375 |     ExternalServiceError { service: String, reason: String },
    |                            ^^^^^^^^^^^^^^^

warning: missing documentation for a struct field
   --> crates/client-core/src/error.rs:375:45
    |
375 |     ExternalServiceError { service: String, reason: String },
    |                                             ^^^^^^^^^^^^^^

warning: `rvoip-client-core` (lib) generated 211 warnings (run `cargo fix --lib -p rvoip-client-core` to apply 2 suggestions)
    Finished `release` profile [optimized] target(s) in 0.13s
     Running `target/release/examples/sipp_integration_sip_test_server 5060 20000 auto`
🚀 Starting RVOIP SIP Test Server (console output)
[2m2025-06-23T02:03:50.410674Z[0m [32m INFO[0m 🚀 Starting SIP Test Server for SIPp Integration
[2m2025-06-23T02:03:50.410769Z[0m [32m INFO[0m ⚙️  Server configuration:
[2m2025-06-23T02:03:50.410778Z[0m [32m INFO[0m    📞 SIP Address: 0.0.0.0:5060
[2m2025-06-23T02:03:50.410785Z[0m [32m INFO[0m    🎵 Media Address: 0.0.0.0:20000
[2m2025-06-23T02:03:50.410789Z[0m [32m INFO[0m    🤖 User Agent: rvoip-sipp-test-server/1.0.0
[2m2025-06-23T02:03:50.410811Z[0m [32m INFO[0m    🎧 Codecs: ["PCMU", "PCMA"]
[2m2025-06-23T02:03:50.410883Z[0m [32m INFO[0m    🔄 Auto-answer: true
[2m2025-06-23T02:03:50.410895Z[0m [32m INFO[0m 🔧 Creating ClientManager...
[2m2025-06-23T02:03:50.411010Z[0m [32m INFO[0m Creating UnifiedDialogApi with automatic transport setup in "Hybrid" mode
[2m2025-06-23T02:03:50.411185Z[0m [32m INFO[0m SIP UDP transport bound to 0.0.0.0:5060
[2m2025-06-23T02:03:50.411221Z[0m [32m INFO[0m Added UDP transport bound to 0.0.0.0:5060
[2m2025-06-23T02:03:50.411370Z[0m [32m INFO[0m Creating UnifiedDialogApi with global events in "Hybrid" mode
[2m2025-06-23T02:03:50.411402Z[0m [32m INFO[0m Creating UnifiedDialogManager with global events in "Hybrid" mode at 0.0.0.0:5060
[2m2025-06-23T02:03:50.411412Z[0m [32m INFO[0m Creating new DialogManager with global transaction events and local address 0.0.0.0:5060
[2m2025-06-23T02:03:50.411450Z[0m [32m INFO[0m 🔄 Starting global transaction event processor for dialog-core
[2m2025-06-23T02:03:50.411567Z[0m [32m INFO[0m Session event processor started
🔗 SETUP: Setting up session coordination with dialog-core
✅ SETUP: Session coordination setup complete
[2m2025-06-23T02:03:50.411587Z[0m [32m INFO[0m SessionCoordinator initialized on port 5060
[2m2025-06-23T02:03:50.411591Z[0m [32m INFO[0m Starting UnifiedDialogApi
[2m2025-06-23T02:03:50.411594Z[0m [32m INFO[0m Starting UnifiedDialogManager in "Hybrid" mode
[2m2025-06-23T02:03:50.411598Z[0m [32m INFO[0m DialogManager starting
[2m2025-06-23T02:03:50.411601Z[0m [32m INFO[0m DialogManager started successfully
[2m2025-06-23T02:03:50.411605Z[0m [32m INFO[0m Hybrid mode active - from_uri: Some("sip:client@0.0.0.0"), domain: None, auto_auth: false, auto_options: false
[2m2025-06-23T02:03:50.411610Z[0m [32m INFO[0m UnifiedDialogManager started successfully
🎬 SPAWN: Starting session coordination event loop
[2m2025-06-23T02:03:50.411615Z[0m [32m INFO[0m Cleanup manager started
[2m2025-06-23T02:03:50.411636Z[0m [32m INFO[0m SessionCoordinator started
[2m2025-06-23T02:03:50.411616Z[0m [32m INFO[0m Starting main coordinator event loop
[2m2025-06-23T02:03:50.411644Z[0m [32m INFO[0m ✅ ClientManager created successfully
[2m2025-06-23T02:03:50.411659Z[0m [32m INFO[0m 🔧 Setting up event handler...
[2m2025-06-23T02:03:50.411663Z[0m [32m INFO[0m ✅ Event handler set
[2m2025-06-23T02:03:50.411666Z[0m [32m INFO[0m ▶️  Starting SIP server...
[2m2025-06-23T02:03:50.411692Z[0m [32m INFO[0m Starting UnifiedDialogApi
[2m2025-06-23T02:03:50.411696Z[0m [32m INFO[0m Starting UnifiedDialogManager in "Hybrid" mode
📡 EVENT LOOP: Session coordination event loop started
[2m2025-06-23T02:03:50.411698Z[0m [32m INFO[0m DialogManager starting
[2m2025-06-23T02:03:50.411716Z[0m [32m INFO[0m DialogManager started successfully
[2m2025-06-23T02:03:50.411721Z[0m [32m INFO[0m Hybrid mode active - from_uri: Some("sip:client@0.0.0.0"), domain: None, auto_auth: false, auto_options: false
[2m2025-06-23T02:03:50.411725Z[0m [32m INFO[0m UnifiedDialogManager started successfully
[2m2025-06-23T02:03:50.411729Z[0m [32m INFO[0m SessionCoordinator started
[2m2025-06-23T02:03:50.411733Z[0m [32m INFO[0m ClientManager started on 0.0.0.0:5060
[2m2025-06-23T02:03:50.411739Z[0m [32m INFO[0m ✅ SIP server started successfully
[2m2025-06-23T02:03:50.411764Z[0m [32m INFO[0m ✅ SIP Server ready!
[2m2025-06-23T02:03:50.411768Z[0m [32m INFO[0m    📍 Listening on SIP: 0.0.0.0:5060
[2m2025-06-23T02:03:50.411772Z[0m [32m INFO[0m    📍 Media port: 0.0.0.0:20000
[2m2025-06-23T02:03:50.411774Z[0m [32m INFO[0m    ⏳ Waiting for incoming calls from SIPp...
=== PARSING SIP MESSAGE ===
Input length: 557 bytes
Input as string: "INVITE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK-88319-1-0\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag001\r\nTo: service <sip:service@127.0.0.1:5060>\r\nCall-ID: 1-88319@127.0.0.1\r\nCSeq: 1 INVITE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nSubject: SIPp Test Call\r\nContent-Type: application/sdp\r\nContent-Length:   179\r\n\r\nv=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n"
Input as hex: [49, 4e, 56, 49, 54, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 2d, 38, 38, 33, 31, 39, 2d, 31, 2d, 30, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 31, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 31, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 49, 4e, 56, 49, 54, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 53, 75, 62, 6a, 65, 63, 74, 3a, 20, 53, 49, 50, 70, 20, 54, 65, 73, 74, 20, 43, 61, 6c, 6c, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 54, 79, 70, 65, 3a, 20, 61, 70, 70, 6c, 69, 63, 61, 74, 69, 6f, 6e, 2f, 73, 64, 70, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 20, 20, 31, 37, 39, 0d, 0a, 0d, 0a, 76, 3d, 30, 0d, 0a, 6f, 3d, 75, 73, 65, 72, 31, 20, 35, 33, 36, 35, 35, 37, 36, 35, 20, 32, 33, 35, 33, 36, 38, 37, 36, 33, 37, 20, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 73, 3d, 53, 49, 50, 70, 20, 4d, 65, 64, 69, 61, 20, 54, 65, 73, 74, 0d, 0a, 63, 3d, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 74, 3d, 30, 20, 30, 0d, 0a, 6d, 3d, 61, 75, 64, 69, 6f, 20, 36, 35, 30, 38, 20, 52, 54, 50, 2f, 41, 56, 50, 20, 30, 20, 38, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 30, 20, 50, 43, 4d, 55, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 38, 20, 50, 43, 4d, 41, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 73, 65, 6e, 64, 72, 65, 63, 76, 0d, 0a]
===========================
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:03:52.115292Z[0m [32m INFO[0m Created new ServerInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK-88319-1-0:INVITE:server) [3mmethod[0m[2m=[0mINVITE
Transaction loop starting for Key(z9hG4bK-88319-1-0:INVITE:server)
Initial state: Proceeding
Received command: TransitionTo(Proceeding) for transaction Key(z9hG4bK-88319-1-0:INVITE:server)
Processing TransitionTo(Proceeding) current state: Proceeding
Already in requested state, no transition needed: Proceeding
🎯 FOUND UNASSOCIATED INVITE: Processing new incoming INVITE from 127.0.0.1:5061
🔍 INVITE HANDLER: Processing initial INVITE request from 127.0.0.1:5061
[2m2025-06-23T02:03:52.115554Z[0m [32m INFO[0m Created early dialog 0be11ba4-f399-4580-adc6-2a0c378583d2 from INVITE request
🔍 INVITE HANDLER: Created early dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
🔍 INVITE HANDLER: Associated transaction Key(z9hG4bK-88319-1-0:INVITE:server) with dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
🔍 INVITE HANDLER: About to send SessionCoordinationEvent::IncomingCall for dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
🔍 INVITE HANDLER: Successfully sent SessionCoordinationEvent::IncomingCall for dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
[2m2025-06-23T02:03:52.115579Z[0m [32m INFO[0m Initial INVITE processed, created dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: IncomingCall { dialog_id: DialogId(0be11ba4-f399-4580-adc6-2a0c378583d2), transaction_id: z9hG4bK-88319-1-0:INVITE:server, request: Request { method: Invite, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK-88319-1-0")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag001")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [] })), CallId(CallId("1-88319@127.0.0.1")), CSeq(CSeq { seq: 1, method: Invite }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), Subject(Subject("SIPp Test Call")), ContentType(ContentType(ContentTypeValue { m_type: "application", m_subtype: "sdp", parameters: {} })), ContentLength(ContentLength(179))], body: b"v=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n" }, source: 127.0.0.1:5061 }
[2m2025-06-23T02:03:52.115735Z[0m [32m INFO[0m handle_incoming_call called for dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
[2m2025-06-23T02:03:52.115745Z[0m [32m INFO[0m Incoming call from dialog 0be11ba4-f399-4580-adc6-2a0c378583d2: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:52.115767Z[0m [32m INFO[0m Created session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 for incoming call dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
[2m2025-06-23T02:03:52.115777Z[0m [32m INFO[0m Calling handler.on_incoming_call for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970
[2m2025-06-23T02:03:52.115806Z[0m [32m INFO[0m 📞 Incoming call from: sip:from@127.0.0.1 (Call-ID: 71fab620-8547-4ca0-b528-10119ad9d5fc)
[2m2025-06-23T02:03:52.115824Z[0m [32m INFO[0m 📋 Call Info Debug:
[2m2025-06-23T02:03:52.115827Z[0m [32m INFO[0m    - CallId: 71fab620-8547-4ca0-b528-10119ad9d5fc
[2m2025-06-23T02:03:52.115830Z[0m [32m INFO[0m    - Caller URI: sip:from@127.0.0.1
[2m2025-06-23T02:03:52.115833Z[0m [32m INFO[0m    - Callee URI: sip:to@local
[2m2025-06-23T02:03:52.115836Z[0m [32m INFO[0m    - Display Name: None
[2m2025-06-23T02:03:52.115840Z[0m [32m INFO[0m 🔔 Auto-answer enabled, deferring for SDP generation
[2m2025-06-23T02:03:52.115844Z[0m [32m INFO[0m Handler decision for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970: Defer
[2m2025-06-23T02:03:52.115847Z[0m [32m INFO[0m Deferring incoming call for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 (e.g., added to queue)
🎯 COORDINATOR: Handling event: SessionCreated { session_id: SessionId("sess_b5bc6d59-93ee-403f-9a28-86cae272d970"), from: "sip:from@127.0.0.1", to: "sip:to@local", call_state: Ringing }
[2m2025-06-23T02:03:52.115899Z[0m [32m INFO[0m Session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 created with state Ringing
[2m2025-06-23T02:03:52.146246Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:03:52.146298Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:52.146308Z[0m [32m INFO[0m ✅ Found pending call to answer: 71fab620-8547-4ca0-b528-10119ad9d5fc
[2m2025-06-23T02:03:52.146312Z[0m [32m INFO[0m    📋 Call details: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:52.146316Z[0m [32m INFO[0m    📞 URIs: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:52.146378Z[0m [32m INFO[0m Starting media session for dialog: media-sess_b5bc6d59-93ee-403f-9a28-86cae272d970
[2m2025-06-23T02:03:52.146422Z[0m [32m INFO[0m Created global port allocator with range 16384-32767
Received command: Timer("100") for transaction Key(z9hG4bK-88319-1-0:INVITE:server)
[2m2025-06-23T02:03:52.317405Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:52.648815Z[0m [32m INFO[0m Started UDP transport receiver tasks
[2m2025-06-23T02:03:52.648927Z[0m [32m INFO[0m Started RTP session with SSRC=a251980b
[2m2025-06-23T02:03:52.648953Z[0m [32m INFO[0m ✅ Created media session with REAL RTP session: media-sess_b5bc6d59-93ee-403f-9a28-86cae272d970 (port: 20714)
[2m2025-06-23T02:03:52.648973Z[0m [32m INFO[0m ✅ Created media session: media-sess_b5bc6d59-93ee-403f-9a28-86cae272d970 for SIP session: sess_b5bc6d59-93ee-403f-9a28-86cae272d970 with real MediaSessionController + zero-copy enabled
[2m2025-06-23T02:03:52.648984Z[0m [32m INFO[0m Created media session for sess_b5bc6d59-93ee-403f-9a28-86cae272d970
[2m2025-06-23T02:03:52.649016Z[0m [32m INFO[0m ✅ Updated media session for SIP session: sess_b5bc6d59-93ee-403f-9a28-86cae272d970 with remote: 127.0.0.1:6508 and codecs: ["PCMU"]
[2m2025-06-23T02:03:52.649026Z[0m [32m INFO[0m Generated SDP answer for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 with codecs: ["PCMU", "PCMA"]
[2m2025-06-23T02:03:52.649045Z[0m [32m INFO[0m Answering call 0be11ba4-f399-4580-adc6-2a0c378583d2
Received command: CancelTimer100 for transaction Key(z9hG4bK-88319-1-0:INVITE:server)
[2m2025-06-23T02:03:52.649126Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:52.649279Z[0m [32m INFO[0m Dialog 0be11ba4-f399-4580-adc6-2a0c378583d2 local tag set to match response: tag-0540be0d486a45168f0f59d6fefb470d
Received command: TransitionTo(Terminated) for transaction Key(z9hG4bK-88319-1-0:INVITE:server)
Processing TransitionTo(Terminated) current state: Proceeding
Valid state transition: Proceeding -> Terminated
State successfully changed to: Terminated
[2m2025-06-23T02:03:52.649287Z[0m [32m INFO[0m Dialog 0be11ba4-f399-4580-adc6-2a0c378583d2 transitioned to Confirmed state
[2m2025-06-23T02:03:52.649346Z[0m [32m INFO[0m Updated dialog lookup for confirmed dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
[2m2025-06-23T02:03:52.649397Z[0m [32m INFO[0m Successfully answered call 0be11ba4-f399-4580-adc6-2a0c378583d2
Sent StateChanged event result: Success
Transaction loop ending for Key(z9hG4bK-88319-1-0:INVITE:server). Final state: Terminated
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallAnswered { dialog_id: DialogId(0be11ba4-f399-4580-adc6-2a0c378583d2), session_answer: "v=0\r\no=rvoip 1750644232 1750644232 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 20714 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
[2m2025-06-23T02:03:52.649410Z[0m [32m INFO[0m Accepted incoming call: sess_b5bc6d59-93ee-403f-9a28-86cae272d970 (dialog: 0be11ba4-f399-4580-adc6-2a0c378583d2)
[2m2025-06-23T02:03:52.649503Z[0m [32m INFO[0m Call answered for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970: 0be11ba4-f399-4580-adc6-2a0c378583d2 (awaiting ACK per RFC 3261)
🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_b5bc6d59-93ee-403f-9a28-86cae272d970"), old_state: Ringing, new_state: Active }
[2m2025-06-23T02:03:52.649538Z[0m [32m INFO[0m 📞 Call 71fab620-8547-4ca0-b528-10119ad9d5fc state changed: "Proceeding" -> Connected
[2m2025-06-23T02:03:52.649579Z[0m [32m INFO[0m 💬 Reason: Call established
[2m2025-06-23T02:03:52.649556Z[0m [32m INFO[0m 📞 Call answered for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 - keeping in Initiating state until media ready
[2m2025-06-23T02:03:52.649602Z[0m [32m INFO[0m 🚫 RFC 3261: NOT creating media session yet - waiting for ACK
[2m2025-06-23T02:03:52.649588Z[0m [32m INFO[0m Call 71fab620-8547-4ca0-b528-10119ad9d5fc established with SDP exchange
[2m2025-06-23T02:03:52.649567Z[0m [32m INFO[0m Session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 state changed: Ringing -> Active
[2m2025-06-23T02:03:52.649630Z[0m [32m INFO[0m Answered call 71fab620-8547-4ca0-b528-10119ad9d5fc
[2m2025-06-23T02:03:52.649650Z[0m [32m INFO[0m 📞 Successfully answered call 71fab620-8547-4ca0-b528-10119ad9d5fc with SDP
[2m2025-06-23T02:03:52.649654Z[0m [32m INFO[0m Media info available: true
[2m2025-06-23T02:03:52.649665Z[0m [32m INFO[0m Local SDP length: Some(156)
[2m2025-06-23T02:03:52.649672Z[0m [32m INFO[0m Remote SDP length: Some(179)
[2m2025-06-23T02:03:52.649680Z[0m [32m INFO[0m Notifying handler about call sess_b5bc6d59-93ee-403f-9a28-86cae272d970 establishment
[2m2025-06-23T02:03:52.649692Z[0m [32m INFO[0m 📞 Call 71fab620-8547-4ca0-b528-10119ad9d5fc state changed: "Proceeding" -> Connected
[2m2025-06-23T02:03:52.649697Z[0m [32m INFO[0m 💬 Reason: Call established
[2m2025-06-23T02:03:52.649657Z[0m [32m INFO[0m 📊 Active calls: 1
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: "ACK sip:service@127.0.0.1:5060 SIP/2.0\r[2m2025-06-23T02:03:52.649702Z[0m [32m INFO[0m Call 71fab620-8547-4ca0-b528-10119ad9d5fc established with SDP exchange
\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883191_ACK\r\n🎯 COORDINATOR: Handling event: SdpEvent { session_id: SessionId("sess_b5bc6d59-93ee-403f-9a28-86cae272d970"), event_type: "remote_sdp_answer", sdp: "v=0\r\no=rvoip 1750644232 1750644232 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 20714 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
From: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag001\r\n[2m2025-06-23T02:03:52.649800Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970
To: service <sip:service@127.0.0.1:5060>;tag=tag-0540be0d486a45168f0f59d6fefb470d\r\nCall-ID: 1-88319@127.0.0.1\r\nCSeq: 1 ACK\r[2m2025-06-23T02:03:52.649815Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970
\nContact: sip:sipp@127.0.0.1:5061\r[2m2025-06-23T02:03:52.649731Z[0m [32m INFO[0m 📊 Server Stats: Total=1, Active=1, Connected=0
\nMax-Forwards: 70\r[2m2025-06-23T02:03:52.649872Z[0m [32m INFO[0m Applying negotiated config: codec=PCMU, remote=127.0.0.1:20714
\nContent-Length: 0\r\n[2m2025-06-23T02:03:52.649941Z[0m [32m INFO[0m SDP negotiation successful: codec=PCMU, local=127.0.0.1:20714, remote=127.0.0.1:20714
🎯 COORDINATOR: Handling event: MediaNegotiated { session_id: SessionId("sess_b5bc6d59-93ee-403f-9a28-86cae272d970"), local_addr: 127.0.0.1:20714, remote_addr: 127.0.0.1:20714, codec: "PCMU" }
\r\n"
Input as hex: [41, 43, 4b, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 38, 38, 33, 31, 39, 31, 5f, 41, 43, 4b, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 31, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 30, 35, 34, 30, 62, 65, 30, 64, 34, 38, 36, 61, 34, 35, 31, 36, 38, 66, 30, 66, 35, 39, 64, 36, 66, 65, 66, 62, 34, 37, 30, 64, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 31, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 41, 43, 4b, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 48, 53, 52, 48, 98, 101, 48, 100, 52, 56, 54, 97, 52, 53, 49, 54, 56, 102, 48, 102, 53, 57, 100, 54, 102, 101, 102, 98, 52, 55, 48, 100]
Successfully parsed tag: tag-0540be0d486a45168f0f59d6fefb470d
=== PARSE SUCCESS ===
Successfully parsed message
=====================
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"params": Array([Object({"Tag": String("88319SIPpTag001")})]), "display_name": String("sipp"), "uri": Object({"host": Object({"Address": String("127.0.0.1")}), "password": Null, "headers": Object({}), "parameters": Array([]), "scheme": String("Sip"), "user": String("sipp"), "raw_uri": Null, "port": Number(5061.0)})})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag001")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag001")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag001")
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"params": Array([Object({"Tag": String("88319SIPpTag001")})]), "display_name": String("sipp"), "uri": Object({"host": Object({"Address": String("127.0.0.1")}), "headers": Object({}), "password": Null, "port": Number(5061.0), "parameters": Array([]), "scheme": String("Sip"), "raw_uri": Null, "user": String("sipp")})})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag001")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag001")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag001")
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("service"), "uri": Object({"headers": Object({}), "host": Object({"Address": String("127.0.0.1")}), "scheme": String("Sip"), "raw_uri": Null, "parameters": Array([]), "user": String("service"), "password": Null, "port": Number(5060.0)}), "params": Array([])})
Processing segment Index(0) at index 3, current value: Array([])
Index 0 out of bounds for array of length 0
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("service"), "uri": Object({"host": Object({"Address": String("127.0.0.1")}), "port": Number(5060.0), "raw_uri": Null, "parameters": Array([]), "user": String("service"), "headers": Object({}), "password": Null, "scheme": String("Sip")}), "params": Array([Object({"Tag": String("tag-0540be0d486a45168f0f59d6fefb470d")})])})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("tag-0540be0d486a45168f0f59d6fefb470d")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("tag-0540be0d486a45168f0f59d6fefb470d")})
Final value for path 'headers.To.params[0].Tag': String("tag-0540be0d486a45168f0f59d6fefb470d")
[2m2025-06-23T02:03:52.652699Z[0m [32m INFO[0m ✅ RFC 3261: ACK received for transaction Key(z9hG4bK-88319-1-0:INVITE:server) in dialog 0be11ba4-f399-4580-adc6-2a0c378583d2 - time to start media (UAS side)
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: AckReceived { dialog_id: DialogId(0be11ba4-f399-4580-adc6-2a0c378583d2), transaction_id: z9hG4bK-88319-1-0:INVITE:server, negotiated_sdp: None }
[2m2025-06-23T02:03:52.652719Z[0m [32m INFO[0m ✅ RFC 3261: ACK RECEIVED for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 - creating media session (UAS side)
🎯 COORDINATOR: Handling event: MediaEvent { session_id: SessionId("sess_b5bc6d59-93ee-403f-9a28-86cae272d970"), event: "rfc_compliant_media_creation_uas" }
[2m2025-06-23T02:03:52.652730Z[0m [32m INFO[0m Media creation event for sess_b5bc6d59-93ee-403f-9a28-86cae272d970: rfc_compliant_media_creation_uas
[2m2025-06-23T02:03:52.673307Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=0, ts=12328
[2m2025-06-23T02:03:52.673310Z[0m [32m INFO[0m New RTP stream detected with SSRC=1816bb16
[2m2025-06-23T02:03:52.710203Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=2, ts=12648
[2m2025-06-23T02:03:52.734207Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=4, ts=12968
[2m2025-06-23T02:03:52.751865Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:03:52.752049Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:52.752145Z[0m [32m INFO[0m 📊 Server Stats: Total=1, Active=1, Connected=1
[2m2025-06-23T02:03:52.814694Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=7, ts=13448
[2m2025-06-23T02:03:52.853856Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:03:52.853910Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:52.853923Z[0m [32m INFO[0m 📊 Server Stats: Total=1, Active=1, Connected=1
[2m2025-06-23T02:03:52.855047Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=9, ts=13768
[2m2025-06-23T02:03:52.873641Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=11, ts=14088
[2m2025-06-23T02:03:52.893901Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=12, ts=14248
[2m2025-06-23T02:03:52.913257Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=13, ts=14408
[2m2025-06-23T02:03:52.932924Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=14, ts=14568
[2m2025-06-23T02:03:52.953585Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=15, ts=14728
[2m2025-06-23T02:03:52.956138Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:03:52.956235Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:52.956283Z[0m [32m INFO[0m 📊 Server Stats: Total=1, Active=1, Connected=1
[2m2025-06-23T02:03:52.994014Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=17, ts=15048
[2m2025-06-23T02:03:53.011659Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=18, ts=15208
[2m2025-06-23T02:03:53.033867Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=19, ts=15368
[2m2025-06-23T02:03:53.058051Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:03:53.058109Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:53.058120Z[0m [32m INFO[0m 📊 Server Stats: Total=1, Active=1, Connected=1
[2m2025-06-23T02:03:53.073494Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=20, ts=15528
=== PARSING SIP MESSAGE ===
Input length: 557 bytes
Input as string: "INVITE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK-88319-2-0\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag002\r\nTo: service <sip:service@127.0.0.1:5060>\r\nCall-ID: 2-88319@127.0.0.1\r\nCSeq: 1 INVITE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nSubject: SIPp Test Call\r\nContent-Type: application/sdp\r\nContent-Length:   179\r\n\r\nv=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n"
Input as hex: [49, 4e, 56, 49, 54, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 2d, 38, 38, 33, 31, 39, 2d[2m2025-06-23T02:03:53.114224Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=23, ts=16008
, 32, 2d, 30, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 32, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 32, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 49, 4e, 56, 49, 54, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 53, 75, 62, 6a, 65, 63, 74, 3a, 20, 53, 49, 50, 70, 20, 54, 65, 73, 74, 20, 43, 61, 6c, 6c, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 54, 79, 70, 65, 3a, 20, 61, 70, 70, 6c, 69, 63, 61, 74, 69, 6f, 6e, 2f, 73, 64, 70, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 20, 20, 31, 37, 39, 0d, 0a, 0d, 0a, 76, 3d, 30, 0d, 0a, 6f, 3d, 75, 73, 65, 72, 31, 20, 35, 33, 36, 35, 35, 37, 36, 35, 20, 32, 33, 35, 33, 36, 38, 37, 36, 33, 37, 20, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 73, 3d, 53, 49, 50, 70, 20, 4d, 65, 64, 69, 61, 20, 54, 65, 73, 74, 0d, 0a, 63, 3d, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 74, 3d, 30, 20, 30, 0d, 0a, 6d, 3d, 61, 75, 64, 69, 6f, 20, 36, 35, 30, 38, 20, 52, 54, 50, 2f, 41, 56, 50, 20, 30, 20, 38, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 30, 20, 50, 43, 4d, 55, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 38, 20, 50, 43, 4d, 41, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 73, 65, 6e, 64, 72, 65, 63, 76, 0d, 0a]
===========================
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:03:53.117422Z[0m [32m INFO[0m Created new ServerInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK-88319-2-0:INVITE:server) [3mmethod[0m[2m=[0mINVITE
🎯 FOUND UNASSOCIATED INVITE: Processing new incoming INVITE from 127.0.0.1:5061
🔍 INVITE HANDLER: Processing initial INVITE request from 127.0.0.1:5061
Transaction loop starting for Key(z9hG4bK-88319-2-0:INVITE:server)
Initial state: Proceeding
Received command: TransitionTo(Proceeding) for transaction Key(z9hG4bK-88319-2-0:INVITE:server)
Processing TransitionTo(Proceeding) current state: Proceeding
Already in requested state, no transition needed: Proceeding
[2m2025-06-23T02:03:53.117481Z[0m [32m INFO[0m Created early dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8 from INVITE request
🔍 INVITE HANDLER: Created early dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
🔍 INVITE HANDLER: Associated transaction Key(z9hG4bK-88319-2-0:INVITE:server) with dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
🔍 INVITE HANDLER: About to send SessionCoordinationEvent::IncomingCall for dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
🔍 INVITE HANDLER: Successfully sent SessionCoordinationEvent::IncomingCall for dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: IncomingCall { dialog_id: DialogId(5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8), transaction_id: z9hG4bK-88319-2-0:INVITE:server, request: Request { method: Invite, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK-88319-2-0")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag002")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [] })), CallId(CallId("2-88319@127.0.0.1")), CSeq(CSeq { seq: 1, method: Invite }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), Subject(Subject("SIPp Test Call")), ContentType(ContentType(ContentTypeValue { m_type: "application", m_subtype: "sdp", parameters: {} })), ContentLength(ContentLength(179))], body: b"v=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n" }, source: 127.0.0.1:5061 }
[2m2025-06-23T02:03:53.117746Z[0m [32m INFO[0m handle_incoming_call called for dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
[2m2025-06-23T02:03:53.117678Z[0m [32m INFO[0m Initial INVITE processed, created dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
[2m2025-06-23T02:03:53.117763Z[0m [32m INFO[0m Incoming call from dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:53.117802Z[0m [32m INFO[0m Created session sess_6ed030fb-7528-4180-8dbd-227e54db965d for incoming call dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
[2m2025-06-23T02:03:53.117813Z[0m [32m INFO[0m Calling handler.on_incoming_call for session sess_6ed030fb-7528-4180-8dbd-227e54db965d
[2m2025-06-23T02:03:53.117856Z[0m [32m INFO[0m 📞 Incoming call from: sip:from@127.0.0.1 (Call-ID: e0594cc0-7b60-4e03-8af5-605e27acdfdb)
[2m2025-06-23T02:03:53.117861Z[0m [32m INFO[0m 📋 Call Info Debug:
[2m2025-06-23T02:03:53.117873Z[0m [32m INFO[0m    - CallId: e0594cc0-7b60-4e03-8af5-605e27acdfdb
[2m2025-06-23T02:03:53.117877Z[0m [32m INFO[0m    - Caller URI: sip:from@127.0.0.1
[2m2025-06-23T02:03:53.117881Z[0m [32m INFO[0m    - Callee URI: sip:to@local
[2m2025-06-23T02:03:53.117884Z[0m [32m INFO[0m    - Display Name: None
[2m2025-06-23T02:03:53.117888Z[0m [32m INFO[0m 🔔 Auto-answer enabled, deferring for SDP generation
[2m2025-06-23T02:03:53.117893Z[0m [32m INFO[0m Handler decision for session sess_6ed030fb-7528-4180-8dbd-227e54db965d: Defer
[2m2025-06-23T02:03:53.117897Z[0m [32m INFO[0m Deferring incoming call for session sess_6ed030fb-7528-4180-8dbd-227e54db965d (e.g., added to queue)
🎯 COORDINATOR: Handling event: SessionCreated { session_id: SessionId("sess_6ed030fb-7528-4180-8dbd-227e54db965d"), from: "sip:from@127.0.0.1", to: "sip:to@local", call_state: Ringing }
[2m2025-06-23T02:03:53.117916Z[0m [32m INFO[0m Session sess_6ed030fb-7528-4180-8dbd-227e54db965d created with state Ringing
[2m2025-06-23T02:03:53.131734Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=24, ts=16168
[2m2025-06-23T02:03:53.153869Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=25, ts=16328
[2m2025-06-23T02:03:53.159610Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:53.159631Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:53.159637Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:53.159643Z[0m [32m INFO[0m ✅ Found pending call to answer: e0594cc0-7b60-4e03-8af5-605e27acdfdb
[2m2025-06-23T02:03:53.159647Z[0m [32m INFO[0m    📋 Call details: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:53.159651Z[0m [32m INFO[0m    📞 URIs: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:53.159663Z[0m [32m INFO[0m Starting media session for dialog: media-sess_6ed030fb-7528-4180-8dbd-227e54db965d
[2m2025-06-23T02:03:53.172272Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=26, ts=16488
[2m2025-06-23T02:03:53.213653Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=28, ts=16808
[2m2025-06-23T02:03:53.232545Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=29, ts=16968
[2m2025-06-23T02:03:53.274169Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=31, ts=17288
Received command: Timer("100") for transaction Key(z9hG4bK-88319-2-0:INVITE:server)
[2m2025-06-23T02:03:53.318598Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:53.394549Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=36, ts=18088
[2m2025-06-23T02:03:53.413408Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=38, ts=18408
[2m2025-06-23T02:03:53.453991Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=40, ts=18728
[2m2025-06-23T02:03:53.494303Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=42, ts=19048
[2m2025-06-23T02:03:53.513066Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=43, ts=19208
[2m2025-06-23T02:03:53.533862Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=44, ts=19368
[2m2025-06-23T02:03:53.572466Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=46, ts=19688
[2m2025-06-23T02:03:53.591429Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=47, ts=19848
[2m2025-06-23T02:03:53.614205Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=48, ts=20008
[2m2025-06-23T02:03:53.653551Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=50, ts=20328
[2m2025-06-23T02:03:53.660929Z[0m [32m INFO[0m Started UDP transport receiver tasks
[2m2025-06-23T02:03:53.661104Z[0m [32m INFO[0m Started RTP session with SSRC=e044d98f
[2m2025-06-23T02:03:53.661151Z[0m [32m INFO[0m ✅ Created media session with REAL RTP session: media-sess_6ed030fb-7528-4180-8dbd-227e54db965d (port: 22642)
[2m2025-06-23T02:03:53.661199Z[0m [32m INFO[0m ✅ Created media session: media-sess_6ed030fb-7528-4180-8dbd-227e54db965d for SIP session: sess_6ed030fb-7528-4180-8dbd-227e54db965d with real MediaSessionController + zero-copy enabled
[2m2025-06-23T02:03:53.661297Z[0m [32m INFO[0m Created media session for sess_6ed030fb-7528-4180-8dbd-227e54db965d
[2m2025-06-23T02:03:53.661472Z[0m [32m INFO[0m ✅ Updated media session for SIP session: sess_6ed030fb-7528-4180-8dbd-227e54db965d with remote: 127.0.0.1:6508 and codecs: ["PCMU"]
[2m2025-06-23T02:03:53.661534Z[0m [32m INFO[0m Generated SDP answer for session sess_6ed030fb-7528-4180-8dbd-227e54db965d with codecs: ["PCMU", "PCMA"]
[2m2025-06-23T02:03:53.661586Z[0m [32m INFO[0m Answering call 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
[2m2025-06-23T02:03:53.661753Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
Received command: CancelTimer100 for transaction Key(z9hG4bK-88319-2-0:INVITE:server)
[2m2025-06-23T02:03:53.661987Z[0m [32m INFO[0m Dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8 local tag set to match response: tag-c221646ef7dd4140968c5b168d296623
[2m2025-06-23T02:03:53.662043Z[0m [32m INFO[0m Dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8 transitioned to Confirmed state
Received command: TransitionTo(Terminated) for transaction Key(z9hG4bK-88319-2-0:INVITE:server)
Processing TransitionTo(Terminated) current state: Proceeding
Valid state transition: Proceeding -> Terminated
State successfully changed to: Terminated
Sent StateChanged event result: Success
Transaction loop ending for Key(z9hG4bK-88319-2-0:INVITE:server). Final state: Terminated
[2m2025-06-23T02:03:53.662099Z[0m [32m INFO[0m Updated dialog lookup for confirmed dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
[2m2025-06-23T02:03:53.662366Z[0m [32m INFO[0m Successfully answered call 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
[2m2025-06-23T02:03:53.662397Z[0m [32m INFO[0m Accepted incoming call: sess_6ed030fb-7528-4180-8dbd-227e54db965d (dialog: 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8)
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallAnswered { dialog_id: DialogId(5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8), session_answer: "v=0\r\no=rvoip 1750644233 1750644233 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 22642 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_6ed030fb-7528-4180-8dbd-227e54db965d"), old_state: Ringing, new_state: Active }
[2m2025-06-23T02:03:53.662520Z[0m [32m INFO[0m 📞 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb state changed: "Proceeding" -> Connected
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: "ACK sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883192_ACK\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag002\r\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-c221646ef7dd4140968c5b168d296623\r\nCall-ID: 2-88319@127.0.0.1\r\nCSeq: 1 ACK\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nContent-Length: 0[2m2025-06-23T02:03:53.662694Z[0m [32m INFO[0m 💬 Reason: Call established
\r\n\r\n"
Input as hex: [41, 43, 4b, 20, 73, 69, 70, 3a, 73, 65, 72[2m2025-06-23T02:03:53.663677Z[0m [32m INFO[0m Call e0594cc0-7b60-4e03-8af5-605e27acdfdb established with SDP exchange
, 76, 69, 63[2m2025-06-23T02:03:53.664480Z[0m [32m INFO[0m Answered call e0594cc0-7b60-4e03-8af5-605e27acdfdb
[2m2025-06-23T02:03:53.664710Z[0m [32m INFO[0m 📞 Successfully answered call e0594cc0-7b60-4e03-8af5-605e27acdfdb with SDP
[2m2025-06-23T02:03:53.664755Z[0m [32m INFO[0m 📊 Active calls: 2
, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62[2m2025-06-23T02:03:53.664790Z[0m [32m INFO[0m 🎵 Call 71fab620-8547-4ca0-b528-10119ad9d5fc is connected
, 4b, 38[2m2025-06-23T02:03:53.662560Z[0m [32m INFO[0m Call answered for session sess_6ed030fb-7528-4180-8dbd-227e54db965d: 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8 (awaiting ACK per RFC 3261)
, 38, 33, 31, 39, [2m2025-06-23T02:03:53.667008Z[0m [32m INFO[0m 📞 Call answered for session sess_6ed030fb-7528-4180-8dbd-227e54db965d - keeping in Initiating state until media ready
32, 5f, 41, 43, 4b, 0d, 0a[2m2025-06-23T02:03:53.667447Z[0m [32m INFO[0m 🚫 RFC 3261: NOT creating media session yet - waiting for ACK
, 46[2m2025-06-23T02:03:53.662667Z[0m [32m INFO[0m Session sess_6ed030fb-7528-4180-8dbd-227e54db965d state changed: Ringing -> Active
, 72, 6f, 6d[2m2025-06-23T02:03:53.666886Z[0m [32m INFO[0m    📡 Local RTP: Some(20714)
, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40[2m2025-06-23T02:03:53.667650Z[0m [32m INFO[0m    📡 Remote RTP: Some(20714)
[2m2025-06-23T02:03:53.667859Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:53.667871Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 20714 from port 20714
, 31, 32, [2m2025-06-23T02:03:53.667879Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
37, 2e, 30, 2e[2m2025-06-23T02:03:53.667927Z[0m [32m INFO[0m 📊 Server Stats: Total=2, Active=2, Connected=1
, 30, 2e[2m2025-06-23T02:03:53.667623Z[0m [32m INFO[0m Media info available: true
[2m2025-06-23T02:03:53.668005Z[0m [32m INFO[0m Local SDP length: Some(156)
[2m2025-06-23T02:03:53.668013Z[0m [32m INFO[0m Remote SDP length: Some(179)
, 31, [2m2025-06-23T02:03:53.668027Z[0m [32m INFO[0m Notifying handler about call sess_6ed030fb-7528-4180-8dbd-227e54db965d establishment
3a, 35, 30, 36[2m2025-06-23T02:03:53.668067Z[0m [32m INFO[0m 📞 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb state changed: "Proceeding" -> Connected
[2m2025-06-23T02:03:53.668077Z[0m [32m INFO[0m 💬 Reason: Call established
[2m2025-06-23T02:03:53.668081Z[0m [32m INFO[0m Call e0594cc0-7b60-4e03-8af5-605e27acdfdb established with SDP exchange
, 🎯 COORDINATOR: Handling event: SdpEvent { session_id: SessionId("sess_6ed030fb-7528-4180-8dbd-227e54db965d"), event_type: "remote_sdp_answer", sdp: "v=0\r\no=rvoip 1750644233 1750644233 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 22642 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
31, 3e, 3b, [2m2025-06-23T02:03:53.668125Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_6ed030fb-7528-4180-8dbd-227e54db965d
[2m2025-06-23T02:03:53.668172Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_6ed030fb-7528-4180-8dbd-227e54db965d
74, 61, [2m2025-06-23T02:03:53.668198Z[0m [32m INFO[0m Applying negotiated config: codec=PCMU, remote=127.0.0.1:22642
67, 3d, [2m2025-06-23T02:03:53.668230Z[0m [32m INFO[0m SDP negotiation successful: codec=PCMU, local=127.0.0.1:22642, remote=127.0.0.1:22642
🎯 COORDINATOR: Handling event: MediaNegotiated { session_id: SessionId("sess_6ed030fb-7528-4180-8dbd-227e54db965d"), local_addr: 127.0.0.1:22642, remote_addr: 127.0.0.1:22642, codec: "PCMU" }
38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 32, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 63, 32, 32, 31, 36, 34, 36, 65, 66, 37, 64, 64, 34, 31, 34, 30, 39, 36, 38, 63, 35, 62, 31, 36, 38, 64, 32, 39, 36, 36, 32, 33, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 32, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 41, 43, 4b, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 99, 50, 50, 49, 54, 52, 54, 101, 102, 55, 100, 100, 52, 49, 52, 48, 57, 54, 56, 99, 53, 98, 49, 54, 56, 100, 50, 57, 54, 54, 50, 51]
Successfully parsed tag: tag-c221646ef7dd4140968c5b168d296623
=== PARSE SUCCESS ===
Successfully parsed message
=====================
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("sipp"), "params": Array([Object({"Tag": String("88319SIPpTag002")})]), "uri": Object({"headers": Object({}), "port": Number(5061.0), "raw_uri": Null, "password": Null, "user": String("sipp"), "host": Object({"Address": String("127.0.0.1")}), "scheme": String("Sip"), "parameters": Array([])})})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag002")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag002")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag002")
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("sipp"), "uri": Object({"host": Object({"Address": String("127.0.0.1")}), "headers": Object({}), "parameters": Array([]), "scheme": String("Sip"), "user": String("sipp"), "raw_uri": Null, "port": Number(5061.0), "password": Null}), "params": Array([Object({"Tag": String("88319SIPpTag002")})])})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag002")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag002")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag002")
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"params": Array([]), "uri": Object({"host": Object({"Address": String("127.0.0.1")}), "port": Number(5060.0), "password": Null, "headers": Object({}), "parameters": Array([]), "raw_uri": Null, "scheme": String("Sip"), "user": String("service")}), "display_name": String("service")})
Processing segment Index(0) at index 3, current value: Array([])
Index 0 out of bounds for array of length 0
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"params": Array([Object({"Tag": String("tag-c221646ef7dd4140968c5b168d296623")})]), "uri": Object({"user": String("service"), "password": Null, "parameters": Array([]), "scheme": String("Sip"), "headers": Object({}), "host": Object({"Address": String("127.0.0.1")}), "port": Number(5060.0), "raw_uri": Null}), "display_name": String("service")})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("tag-c221646ef7dd4140968c5b168d296623")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("tag-c221646ef7dd4140968c5b168d296623")})
Final value for path 'headers.To.params[0].Tag': String("tag-c221646ef7dd4140968c5b168d296623")
[2m2025-06-23T02:03:53.670410Z[0m [32m INFO[0m ✅ RFC 3261: ACK received for transaction Key(z9hG4bK-88319-2-0:INVITE:server) in dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8 - time to start media (UAS side)
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: AckReceived { dialog_id: DialogId(5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8), transaction_id: z9hG4bK-88319-2-0:INVITE:server, negotiated_sdp: None }
[2m2025-06-23T02:03:53.670441Z[0m [32m INFO[0m ✅ RFC 3261: ACK RECEIVED for session sess_6ed030fb-7528-4180-8dbd-227e54db965d - creating media session (UAS side)
🎯 COORDINATOR: Handling event: MediaEvent { session_id: SessionId("sess_6ed030fb-7528-4180-8dbd-227e54db965d"), event: "rfc_compliant_media_creation_uas" }
[2m2025-06-23T02:03:53.670461Z[0m [32m INFO[0m Media creation event for sess_6ed030fb-7528-4180-8dbd-227e54db965d: rfc_compliant_media_creation_uas
[2m2025-06-23T02:03:53.671475Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=51, ts=20488
[2m2025-06-23T02:03:53.689905Z[0m [32m INFO[0m New RTP stream detected with SSRC=1816bb18
[2m2025-06-23T02:03:53.714974Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=53, ts=20808
[2m2025-06-23T02:03:53.715026Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=1, ts=20656
[2m2025-06-23T02:03:53.750808Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=54, ts=20968
[2m2025-06-23T02:03:53.750816Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=3, ts=20976
[2m2025-06-23T02:03:53.769395Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:53.769589Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:53.769668Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:53.769711Z[0m [32m INFO[0m 📊 Server Stats: Total=2, Active=2, Connected=2
[2m2025-06-23T02:03:53.772809Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=4, ts=21136
[2m2025-06-23T02:03:53.773629Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=56, ts=21288
[2m2025-06-23T02:03:53.853902Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=59, ts=21768
[2m2025-06-23T02:03:53.853943Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=9, ts=21936
[2m2025-06-23T02:03:53.870576Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:53.870630Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:53.870639Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:53.870650Z[0m [32m INFO[0m 📊 Server Stats: Total=2, Active=2, Connected=2
[2m2025-06-23T02:03:53.874152Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=10, ts=22096
[2m2025-06-23T02:03:53.874156Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=61, ts=22088
[2m2025-06-23T02:03:53.912783Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=62, ts=22248
[2m2025-06-23T02:03:53.912783Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=11, ts=22256
[2m2025-06-23T02:03:53.932451Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=64, ts=22568
[2m2025-06-23T02:03:53.932457Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=13, ts=22576
[2m2025-06-23T02:03:53.971876Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:53.971939Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:53.971948Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:53.971957Z[0m [32m INFO[0m 📊 Server Stats: Total=2, Active=2, Connected=2
[2m2025-06-23T02:03:53.972910Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=66, ts=22888
[2m2025-06-23T02:03:53.972913Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=15, ts=22896
[2m2025-06-23T02:03:54.030676Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=68, ts=23208
[2m2025-06-23T02:03:54.050312Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=69, ts=23368
[2m2025-06-23T02:03:54.073436Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:54.073512Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.073521Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.073529Z[0m [32m INFO[0m 📊 Server Stats: Total=2, Active=2, Connected=2
[2m2025-06-23T02:03:54.074187Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=19, ts=23536
[2m2025-06-23T02:03:54.093018Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=72, ts=23848
=== PARSING SIP MESSAGE ===
Input length: 557 bytes
Input as string: "INVITE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK-88319-3-0\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag003\r\nTo: service <sip:service@127.0.0.1:5060>\r\nCall-ID: 3-88319@127.0.0.1\r\nCSeq: 1 INVITE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nSubject: SIPp Test Call\r\nContent-Type: application/sdp\r\nContent-Length:   179\r\n\r\nv=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n"
Input as hex: [49, 4e, 56, 49, 54, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 2d, 38, 38, 33, 31, 39, 2d, 33, 2d, 30, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 33, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 33, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 49, 4e, 56, 49, 54, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 53, 75, 62, 6a, 65, 63, 74, 3a, 20, 53, 49, 50, 70, 20, 54, 65, 73, 74, 20, 43, 61, 6c, 6c, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 54, 79, 70, 65, 3a, 20, 61, 70, 70, 6c, 69, 63, 61, 74, 69, 6f, 6e, 2f, 73, 64, 70, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 20, 20, 31, 37, 39, 0d, 0a, 0d, 0a, 76, 3d, 30, 0d, 0a, 6f, 3d, 75, 73, 65, 72, 31, 20, 35, 33, 36, 35, 35, 37, 36, 35, 20, 32, 33, 35, 33, 36, 38, 37, 36, 33, 37, 20, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 73, 3d, 53, 49, 50, 70, 20, 4d, 65, 64, 69, 61, 20, 54, 65, 73, 74, 0d, 0a, 63, 3d, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 74, 3d, 30, 20, 30, 0d, 0a, 6d, 3d, 61, 75, 64, 69, 6f, 20, 36, 35, 30, 38, 20, 52, 54, 50, 2f, 41, 56, 50, 20, 30, 20, 38, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 30, 20, 50, 43, 4d, 55, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 38, 20, 50, 43, 4d, 41, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 73, 65, 6e, 64, 72, 65, 63, 76, 0d, 0a]
===========================
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:03:54.115728Z[0m [32m INFO[0m Created new ServerInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK-88319-3-0:INVITE:server) [3mmethod[0m[2m=[0mINVITE
🎯 FOUND UNASSOCIATED INVITE: Processing new incoming INVITE from 127.0.0.1:5061
[2m2025-06-23T02:03:54.115790Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=22, ts=24016
🔍 INVITE HANDLER: Processing initial INVITE request from 127.0.0.1:5061
Transaction loop starting for Key(z9hG4bK-88319-3-0:INVITE:server)
Initial state: Proceeding
Received command: TransitionTo(Proceeding) for transaction Key(z9hG4bK-88319-3-0:INVITE:server)
Processing TransitionTo(Proceeding) current state: Proceeding
Already in requested state, no transition needed: Proceeding
[2m2025-06-23T02:03:54.115890Z[0m [32m INFO[0m Created early dialog 0c65bf38-1612-43d6-8cbd-b70baf419426 from INVITE request
🔍 INVITE HANDLER: Created early dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
🔍 INVITE HANDLER: Associated transaction Key(z9hG4bK-88319-3-0:INVITE:server) with dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
🔍 INVITE HANDLER: About to send SessionCoordinationEvent::IncomingCall for dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
🔍 INVITE HANDLER: Successfully sent SessionCoordinationEvent::IncomingCall for dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
[2m2025-06-23T02:03:54.115980Z[0m [32m INFO[0m Initial INVITE processed, created dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: IncomingCall { dialog_id: DialogId(0c65bf38-1612-43d6-8cbd-b70baf419426), transaction_id: z9hG4bK-88319-3-0:INVITE:server, request: Request { method: Invite, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK-88319-3-0")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag003")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [] })), CallId(CallId("3-88319@127.0.0.1")), CSeq(CSeq { seq: 1, method: Invite }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), Subject(Subject("SIPp Test Call")), ContentType(ContentType(ContentTypeValue { m_type: "application", m_subtype: "sdp", parameters: {} })), ContentLength(ContentLength(179))], body: b"v=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n" }, source: 127.0.0.1:5061 }
[2m2025-06-23T02:03:54.116062Z[0m [32m INFO[0m handle_incoming_call called for dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
[2m2025-06-23T02:03:54.116071Z[0m [32m INFO[0m Incoming call from dialog 0c65bf38-1612-43d6-8cbd-b70baf419426: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:54.116090Z[0m [32m INFO[0m Created session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed for incoming call dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
[2m2025-06-23T02:03:54.116105Z[0m [32m INFO[0m Calling handler.on_incoming_call for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed
[2m2025-06-23T02:03:54.116141Z[0m [32m INFO[0m 📞 Incoming call from: sip:from@127.0.0.1 (Call-ID: 4d852739-5111-4b42-82e7-b52c5df3cbcb)
[2m2025-06-23T02:03:54.116154Z[0m [32m INFO[0m 📋 Call Info Debug:
[2m2025-06-23T02:03:54.116161Z[0m [32m INFO[0m    - CallId: 4d852739-5111-4b42-82e7-b52c5df3cbcb
[2m2025-06-23T02:03:54.116167Z[0m [32m INFO[0m    - Caller URI: sip:from@127.0.0.1
[2m2025-06-23T02:03:54.116173Z[0m [32m INFO[0m    - Callee URI: sip:to@local
[2m2025-06-23T02:03:54.116178Z[0m [32m INFO[0m    - Display Name: None
[2m2025-06-23T02:03:54.116182Z[0m [32m INFO[0m 🔔 Auto-answer enabled, deferring for SDP generation
[2m2025-06-23T02:03:54.116189Z[0m [32m INFO[0m Handler decision for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed: Defer
[2m2025-06-23T02:03:54.116196Z[0m [32m INFO[0m Deferring incoming call for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed (e.g., added to queue)
🎯 COORDINATOR: Handling event: SessionCreated { session_id: SessionId("sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed"), from: "sip:from@127.0.0.1", to: "sip:to@local", call_state: Ringing }
[2m2025-06-23T02:03:54.116223Z[0m [32m INFO[0m Session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed created with state Ringing
[2m2025-06-23T02:03:54.155494Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=23, ts=24176
[2m2025-06-23T02:03:54.174597Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:54.174672Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.174708Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.174730Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:54.174749Z[0m [32m INFO[0m ✅ Found pending call to answer: 4d852739-5111-4b42-82e7-b52c5df3cbcb
[2m2025-06-23T02:03:54.174768Z[0m [32m INFO[0m    📋 Call details: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:54.174788Z[0m [32m INFO[0m    📞 URIs: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:54.174820Z[0m [32m INFO[0m Starting media session for dialog: media-sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed
[2m2025-06-23T02:03:54.194126Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=77, ts=24648
[2m2025-06-23T02:03:54.254882Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=80, ts=25128
[2m2025-06-23T02:03:54.271384Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=81, ts=25288
[2m2025-06-23T02:03:54.289674Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=30, ts=25296
[2m2025-06-23T02:03:54.311234Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=31, ts=25456
Received command: Timer("100") for transaction Key(z9hG4bK-88319-3-0:INVITE:server)
[2m2025-06-23T02:03:54.316439Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:54.350770Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=33, ts=25776
[2m2025-06-23T02:03:54.372900Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=34, ts=25936
[2m2025-06-23T02:03:54.393860Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=36, ts=26256
[2m2025-06-23T02:03:54.413934Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=37, ts=26416
[2m2025-06-23T02:03:54.454348Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=38, ts=26576
[2m2025-06-23T02:03:54.494992Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=40, ts=26896
[2m2025-06-23T02:03:54.513224Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=93, ts=27208
[2m2025-06-23T02:03:54.550884Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=94, ts=27368
[2m2025-06-23T02:03:54.550899Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=43, ts=27376
[2m2025-06-23T02:03:54.570571Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=44, ts=27536
[2m2025-06-23T02:03:54.570582Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=95, ts=27528
[2m2025-06-23T02:03:54.590071Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=45, ts=27696
[2m2025-06-23T02:03:54.590084Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=96, ts=27688
[2m2025-06-23T02:03:54.615184Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=47, ts=28016
[2m2025-06-23T02:03:54.632786Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=48, ts=28176
[2m2025-06-23T02:03:54.654167Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=100, ts=28328
[2m2025-06-23T02:03:54.676551Z[0m [32m INFO[0m Started UDP transport receiver tasks
[2m2025-06-23T02:03:54.676655Z[0m [32m INFO[0m Started RTP session with SSRC=aa09d7d4
[2m2025-06-23T02:03:54.676719Z[0m [32m INFO[0m ✅ Created media session with REAL RTP session: media-sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed (port: 23644)
[2m2025-06-23T02:03:54.676764Z[0m [32m INFO[0m ✅ Created media session: media-sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed for SIP session: sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed with real MediaSessionController + zero-copy enabled
[2m2025-06-23T02:03:54.676791Z[0m [32m INFO[0m Created media session for sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed
[2m2025-06-23T02:03:54.676830Z[0m [32m INFO[0m ✅ Updated media session for SIP session: sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed with remote: 127.0.0.1:6508 and codecs: ["PCMU"]
[2m2025-06-23T02:03:54.676854Z[0m [32m INFO[0m Generated SDP answer for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed with codecs: ["PCMU", "PCMA"]
[2m2025-06-23T02:03:54.676881Z[0m [32m INFO[0m Answering call 0c65bf38-1612-43d6-8cbd-b70baf419426
Received command: CancelTimer100 for transaction Key(z9hG4bK-88319-3-0:INVITE:server)
[2m2025-06-23T02:03:54.677033Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:54.677324Z[0m [32m INFO[0m Dialog 0c65bf38-1612-43d6-8cbd-b70baf419426 local tag set to match response: tag-a3e0327a4cf64931b9b03d67155bc634
[2m2025-06-23T02:03:54.677391Z[0m [32m INFO[0m Dialog 0c65bf38-1612-43d6-8cbd-b70baf419426 transitioned to Confirmed state
[2m2025-06-23T02:03:54.677437Z[0m [32m INFO[0m Updated dialog lookup for confirmed dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
Received command: TransitionTo(Terminated) for transaction Key(z9hG4bK-88319-3-0:INVITE:server)
Processing TransitionTo(Terminated) current state: Proceeding
Valid state transition: Proceeding -> Terminated
State successfully changed to: Terminated
Sent StateChanged event result: Success
Transaction loop ending for Key(z9hG4bK-88319-3-0:INVITE:server). Final state: Terminated
[2m2025-06-23T02:03:54.677484Z[0m [32m INFO[0m Successfully answered call 0c65bf38-1612-43d6-8cbd-b70baf419426
[2m2025-06-23T02:03:54.677909Z[0m [32m INFO[0m Accepted incoming call: sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed (dialog: 0c65bf38-1612-43d6-8cbd-b70baf419426)
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallAnswered { dialog_id: DialogId(0c65bf38-1612-43d6-8cbd-b70baf419426), session_answer: "v=0\r\no=rvoip 1750644234 1750644234 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 23644 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
[2m2025-06-23T02:03:54.677998Z[0m [32m INFO[0m Call answered for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed: 0c65bf38-1612-43d6-8cbd-b70baf419426 (awaiting ACK per RFC 3261)
[2m2025-06-23T02:03:54.678030Z[0m [32m INFO[0m 📞 Call answered for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed - keeping in Initiating state until media ready
[2m2025-06-23T02:03:54.678065Z[0m [32m INFO[0m 🚫 RFC 3261: NOT creating media session yet - waiting for ACK
[2m2025-06-23T02:03:54.677981Z[0m [32m INFO[0m 📞 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb state changed: "Proceeding" -> Connected
[2m2025-06-23T02:03:54.678118Z[0m [32m INFO[0m 💬 Reason: Call established
[2m2025-06-23T02:03:54.678138Z[0m [32m INFO[0m Call 4d852739-5111-4b42-82e7-b52c5df3cbcb established with SDP exchange
🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed"), old_state: Ringing, new_state: Active }
=== PARSING SIP MESSAGE ===
Input length: [2m2025-06-23T02:03:54.678211Z[0m [32m INFO[0m Session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed state changed: Ringing -> Active
353 bytes
Input as string: "ACK sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883193_ACK\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag003[2m2025-06-23T02:03:54.678325Z[0m [32m INFO[0m Media info available: true
\r\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-a3e0327a4cf64931b9b03d67155bc634\r\nCall-ID: 3-88319@127.0.0.1\r[2m2025-06-23T02:03:54.678570Z[0m [32m INFO[0m Local SDP length: Some(156)
[2m2025-06-23T02:03:54.678710Z[0m [32m INFO[0m Remote SDP length: Some(179)
[2m2025-06-23T02:03:54.678743Z[0m [32m INFO[0m Notifying handler about call sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed establishment
[2m2025-06-23T02:03:54.678158Z[0m [32m INFO[0m Answered call 4d852739-5111-4b42-82e7-b52c5df3cbcb
[2m2025-06-23T02:03:54.678823Z[0m [32m INFO[0m 📞 Successfully answered call 4d852739-5111-4b42-82e7-b52c5df3cbcb with SDP
[2m2025-06-23T02:03:54.678851Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:54.678880Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
\nCSeq: 1 ACK\r\n[2m2025-06-23T02:03:54.678780Z[0m [32m INFO[0m 📞 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb state changed: "Proceeding" -> Connected
[2m2025-06-23T02:03:54.679030Z[0m [32m INFO[0m 💬 Reason: Call established
[2m2025-06-23T02:03:54.679048Z[0m [32m INFO[0m Call 4d852739-5111-4b42-82e7-b52c5df3cbcb established with SDP exchange
[2m2025-06-23T02:03:54.678935Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:54.679088Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
Contact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nContent-Length: 0\r\n\r\n"
Input as hex: [[2m2025-06-23T02:03:54.679108Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
41, 43, 4b, 20, 73, 69[2m2025-06-23T02:03:54.679255Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37[2m2025-06-23T02:03:54.679381Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
, 2e, 30[2m2025-06-23T02:03:54.681228Z[0m [32m INFO[0m 🎵 Call 71fab620-8547-4ca0-b528-10119ad9d5fc is connected
, 2e🎯 COORDINATOR: Handling event: SdpEvent { session_id: SessionId("sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed"), event_type: "remote_sdp_answer", sdp: "v=0\r\no=rvoip 1750644234 1750644234 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 23644 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
, 30, 2e, 31, 3a, [2m2025-06-23T02:03:54.681288Z[0m [32m INFO[0m    📡 Local RTP: Some(20714)
35, 30[2m2025-06-23T02:03:54.681345Z[0m [32m INFO[0m    📡 Remote RTP: Some(20714)
[2m2025-06-23T02:03:54.681374Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
, 36[2m2025-06-23T02:03:54.681387Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 20714 from port 20714
[2m2025-06-23T02:03:54.681408Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:54.681290Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed
[2m2025-06-23T02:03:54.681428Z[0m [32m INFO[0m 📊 Server Stats: Total=3, Active=3, Connected=2
, 31, 3b, 62[2m2025-06-23T02:03:54.681429Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed
, 72, 61, 6e, 63, [2m2025-06-23T02:03:54.681494Z[0m [32m INFO[0m Applying negotiated config: codec=PCMU, remote=127.0.0.1:23644
[2m2025-06-23T02:03:54.681521Z[0m [32m INFO[0m SDP negotiation successful: codec=PCMU, local=127.0.0.1:23644, remote=127.0.0.1:23644
68, 3d, 7a, 39, 68, 47, 🎯 COORDINATOR: Handling event: MediaNegotiated { session_id: SessionId("sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed"), local_addr: 127.0.0.1:23644, remote_addr: 127.0.0.1:23644, codec: "PCMU" }
34, 62, 4b, 38, 38, 33, 31, 39, 33, 5f, 41, 43, 4b, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 33, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 61, 33, 65, 30, 33, 32, 37, 61, 34, 63, 66, 36, 34, 39, 33, 31, 62, 39, 62, 30, 33, 64, 36, 37, 31, 35, 35, 62, 63, 36, 33, 34, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 33, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 41, 43, 4b, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 97, 51, 101, 48, 51, 50, 55, 97, 52, 99, 102, 54, 52, 57, 51, 49, 98, 57, 98, 48, 51, 100, 54, 55, 49, 53, 53, 98, 99, 54, 51, 52]
Successfully parsed tag: tag-a3e0327a4cf64931b9b03d67155bc634
=== PARSE SUCCESS ===
Successfully parsed message
=====================
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"params": Array([Object({"Tag": String("88319SIPpTag003")})]), "display_name": String("sipp"), "uri": Object({"headers": Object({}), "host": Object({"Address": String("127.0.0.1")}), "port": Number(5061.0), "raw_uri": Null, "scheme": String("Sip"), "user": String("sipp"), "parameters": Array([]), "password": Null})})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag003")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag003")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag003")
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"uri": Object({"password": Null, "headers": Object({}), "raw_uri": Null, "scheme": String("Sip"), "host": Object({"Address": String("127.0.0.1")}), "parameters": Array([]), "user": String("sipp"), "port": Number(5061.0)}), "display_name": String("sipp"), "params": Array([Object({"Tag": String("88319SIPpTag003")})])})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag003")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag003")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag003")
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"uri": Object({"host": Object({"Address": String("127.0.0.1")}), "user": String("service"), "raw_uri": Null, "port": Number(5060.0), "headers": Object({}), "parameters": Array([]), "scheme": String("Sip"), "password": Null}), "params": Array([]), "display_name": String("service")})
Processing segment Index(0) at index 3, current value: Array([])
Index 0 out of bounds for array of length 0
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"uri": Object({"password": Null, "scheme": String("Sip"), "host": Object({"Address": String("127.0.0.1")}), "user": String("service"), "raw_uri": Null, "headers": Object({}), "port": Number(5060.0), "parameters": Array([])}), "display_name": String("service"), "params": Array([Object({"Tag": String("tag-a3e0327a4cf64931b9b03d67155bc634")})])})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("tag-a3e0327a4cf64931b9b03d67155bc634")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("tag-a3e0327a4cf64931b9b03d67155bc634")})
Final value for path 'headers.To.params[0].Tag': String("tag-a3e0327a4cf64931b9b03d67155bc634")
[2m2025-06-23T02:03:54.683998Z[0m [32m INFO[0m ✅ RFC 3261: ACK received for transaction Key(z9hG4bK-88319-3-0:INVITE:server) in dialog 0c65bf38-1612-43d6-8cbd-b70baf419426 - time to start media (UAS side)
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: AckReceived { dialog_id: DialogId(0c65bf38-1612-43d6-8cbd-b70baf419426), transaction_id: z9hG4bK-88319-3-0:INVITE:server, negotiated_sdp: None }
[2m2025-06-23T02:03:54.684026Z[0m [32m INFO[0m ✅ RFC 3261: ACK RECEIVED for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed - creating media session (UAS side)
🎯 COORDINATOR: Handling event: MediaEvent { session_id: SessionId("sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed"), event: "rfc_compliant_media_creation_uas" }
[2m2025-06-23T02:03:54.684037Z[0m [32m INFO[0m Media creation event for sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed: rfc_compliant_media_creation_uas
[2m2025-06-23T02:03:54.694015Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=51, ts=28656
[2m2025-06-23T02:03:54.694015Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=102, ts=28648
[2m2025-06-23T02:03:54.714031Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=0, ts=28672
[2m2025-06-23T02:03:54.714037Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=52, ts=28816
[2m2025-06-23T02:03:54.730647Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=1, ts=28832
[2m2025-06-23T02:03:54.750218Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=53, ts=28976
[2m2025-06-23T02:03:54.750249Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=2, ts=28992
[2m2025-06-23T02:03:54.750228Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=104, ts=28968
[2m2025-06-23T02:03:54.774070Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=54, ts=29136
[2m2025-06-23T02:03:54.774076Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=106, ts=29288
[2m2025-06-23T02:03:54.774092Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=3, ts=29152
[2m2025-06-23T02:03:54.782095Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:54.782106Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.782115Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.782119Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.782129Z[0m [32m INFO[0m 📊 Server Stats: Total=3, Active=3, Connected=3
[2m2025-06-23T02:03:54.794193Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=4, ts=29312
[2m2025-06-23T02:03:54.813032Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=108, ts=29608
[2m2025-06-23T02:03:54.813046Z[0m [32m INFO[0m New RTP stream detected with SSRC=1816bb1a
[2m2025-06-23T02:03:54.834654Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=6, ts=29632
[2m2025-06-23T02:03:54.834788Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=7, ts=29792
[2m2025-06-23T02:03:54.834788Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=58, ts=29776
[2m2025-06-23T02:03:54.852965Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=110, ts=29928
[2m2025-06-23T02:03:54.852972Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=59, ts=29936
[2m2025-06-23T02:03:54.873383Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=60, ts=30096
[2m2025-06-23T02:03:54.873490Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=8, ts=29952
[2m2025-06-23T02:03:54.883003Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:54.883072Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.883105Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.883125Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.883147Z[0m [32m INFO[0m 📊 Server Stats: Total=3, Active=3, Connected=3
[2m2025-06-23T02:03:54.892799Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=61, ts=30256
[2m2025-06-23T02:03:54.910508Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=10, ts=30272
[2m2025-06-23T02:03:54.930906Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=113, ts=30408
[2m2025-06-23T02:03:54.954848Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=64, ts=30736
[2m2025-06-23T02:03:54.954864Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=115, ts=30728
[2m2025-06-23T02:03:54.954880Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=13, ts=30752
[2m2025-06-23T02:03:54.983949Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:54.984012Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.984020Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.984026Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:54.984035Z[0m [32m INFO[0m 📊 Server Stats: Total=3, Active=3, Connected=3
[2m2025-06-23T02:03:55.015986Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=16, ts=31232
[2m2025-06-23T02:03:55.016017Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=66, ts=31056
[2m2025-06-23T02:03:55.032615Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=68, ts=31376
[2m2025-06-23T02:03:55.052934Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=17, ts=31392
[2m2025-06-23T02:03:55.074241Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=121, ts=31688
[2m2025-06-23T02:03:55.074279Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=18, ts=31552
[2m2025-06-23T02:03:55.085149Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:55.085175Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.085182Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.085188Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.085196Z[0m [32m INFO[0m 📊 Server Stats: Total=3, Active=3, Connected=3
=== PARSING SIP MESSAGE ===
Input length: 557 bytes
Input as string: "INVITE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK-88319-4-0\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag004\r\nTo: service <sip:service@127.0.0.1:5060>\r\nCall-ID: 4-88319@127.0.0.1\r\nCSeq: 1 INVITE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nSubject: SIPp Test Call\r\nContent-Type: application/sdp\r\nContent-Length:   179\r\n\r\nv=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n"
Input as hex: [49, 4e, 56, 49, 54, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 2d, 38, 38, 33, 31, 39, 2d, 34, 2d, 30, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 34, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 34, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 49, 4e, 56, 49, 54, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 53, 75, 62, 6a, 65, 63, 74, 3a, 20, 53, 49, 50, 70, 20, 54, 65, 73, 74, 20, 43, 61, 6c, 6c, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 54, 79, 70, 65, 3a, 20, 61, 70, 70, 6c, 69, 63, 61, 74, 69, 6f, 6e, 2f, 73, 64, 70, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 20, 20, 31, 37, 39, 0d, 0a, 0d, 0a, 76, 3d, 30, 0d, 0a, 6f, 3d, 75, 73, 65, 72, 31, 20, 35, 33, 36, 35, 35, 37, 36, 35, 20, 32, 33, 35, 33, 36, 38, 37, 36, 33, 37, 20, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 73, 3d, 53, 49, 50, 70, 20, 4d, 65, 64, 69, 61, 20, 54, 65, 73, 74, 0d, 0a, 63, 3d, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 74, 3d, 30, 20, 30, 0d, 0a, 6d, 3d, 61, 75, 64, 69, 6f, 20, 36, 35, 30, 38, 20, 52, 54, 50, 2f, 41, 56, 50, 20, 30, 20, 38, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 30, 20, 50, 43, 4d, 55, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 38, 20, 50, 43, 4d, 41, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 73, 65, 6e, 64, 72, 65, 63, 76, 0d, 0a]
===========================
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:03:55.116906Z[0m [32m INFO[0m Created new ServerInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK-88319-4-0:INVITE:server) [3mmethod[0m[2m=[0mINVITE
🎯 FOUND UNASSOCIATED INVITE: Processing new incoming INVITE from 127.0.0.1:5061
🔍 INVITE HANDLER: Processing initial INVITE request from 127.0.0.1:5061
Transaction loop starting for Key(z9hG4bK-88319-4-0:INVITE:server)
Initial state: Proceeding
Received command: TransitionTo(Proceeding) for transaction Key(z9hG4bK-88319-4-0:INVITE:server)
Processing TransitionTo(Proceeding) current state: Proceeding
Already in requested state, no transition needed: Proceeding
[2m2025-06-23T02:03:55.116967Z[0m [32m INFO[0m Created early dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642 from INVITE request
🔍 INVITE HANDLER: Created early dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
🔍 INVITE HANDLER: Associated transaction Key(z9hG4bK-88319-4-0:INVITE:server) with dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
[2m2025-06-23T02:03:55.116979Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=71, ts=31856
🔍 INVITE HANDLER: About to send SessionCoordinationEvent::IncomingCall for dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
🔍 INVITE HANDLER: Successfully sent SessionCoordinationEvent::IncomingCall for dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
[2m2025-06-23T02:03:55.117080Z[0m [32m INFO[0m Initial INVITE processed, created dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: IncomingCall { dialog_id: DialogId(43f5015a-0e99-4b8b-bef1-a75b420c1642), transaction_id: z9hG4bK-88319-4-0:INVITE:server, request: Request { method: Invite, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK-88319-4-0")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag004")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [] })), CallId(CallId("4-88319@127.0.0.1")), CSeq(CSeq { seq: 1, method: Invite }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), Subject(Subject("SIPp Test Call")), ContentType(ContentType(ContentTypeValue { m_type: "application", m_subtype: "sdp", parameters: {} })), ContentLength(ContentLength(179))], body: b"v=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n" }, source: 127.0.0.1:5061 }
[2m2025-06-23T02:03:55.117152Z[0m [32m INFO[0m handle_incoming_call called for dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
[2m2025-06-23T02:03:55.117158Z[0m [32m INFO[0m Incoming call from dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:55.117174Z[0m [32m INFO[0m Created session sess_bf439f50-a608-4f75-8532-0a114c914697 for incoming call dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
[2m2025-06-23T02:03:55.117183Z[0m [32m INFO[0m Calling handler.on_incoming_call for session sess_bf439f50-a608-4f75-8532-0a114c914697
[2m2025-06-23T02:03:55.117208Z[0m [32m INFO[0m 📞 Incoming call from: sip:from@127.0.0.1 (Call-ID: d73cd697-e3f3-447e-8422-d13ce2a6cbd6)
[2m2025-06-23T02:03:55.117213Z[0m [32m INFO[0m 📋 Call Info Debug:
[2m2025-06-23T02:03:55.117216Z[0m [32m INFO[0m    - CallId: d73cd697-e3f3-447e-8422-d13ce2a6cbd6
[2m2025-06-23T02:03:55.117220Z[0m [32m INFO[0m    - Caller URI: sip:from@127.0.0.1
[2m2025-06-23T02:03:55.117224Z[0m [32m INFO[0m    - Callee URI: sip:to@local
[2m2025-06-23T02:03:55.117227Z[0m [32m INFO[0m    - Display Name: None
[2m2025-06-23T02:03:55.117231Z[0m [32m INFO[0m 🔔 Auto-answer enabled, deferring for SDP generation
[2m2025-06-23T02:03:55.117236Z[0m [32m INFO[0m Handler decision for session sess_bf439f50-a608-4f75-8532-0a114c914697: Defer
[2m2025-06-23T02:03:55.117241Z[0m [32m INFO[0m Deferring incoming call for session sess_bf439f50-a608-4f75-8532-0a114c914697 (e.g., added to queue)
🎯 COORDINATOR: Handling event: SessionCreated { session_id: SessionId("sess_bf439f50-a608-4f75-8532-0a114c914697"), from: "sip:from@127.0.0.1", to: "sip:to@local", call_state: Ringing }
[2m2025-06-23T02:03:55.117260Z[0m [32m INFO[0m Session sess_bf439f50-a608-4f75-8532-0a114c914697 created with state Ringing
[2m2025-06-23T02:03:55.129724Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=21, ts=32032
[2m2025-06-23T02:03:55.154393Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=22, ts=32192
[2m2025-06-23T02:03:55.154436Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=74, ts=32336
[2m2025-06-23T02:03:55.172337Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=126, ts=32488
[2m2025-06-23T02:03:55.172375Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=75, ts=32496
[2m2025-06-23T02:03:55.186471Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:55.186544Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.186572Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:55.186590Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.186611Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.186633Z[0m [32m INFO[0m ✅ Found pending call to answer: d73cd697-e3f3-447e-8422-d13ce2a6cbd6
[2m2025-06-23T02:03:55.186654Z[0m [32m INFO[0m    📋 Call details: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:55.186673Z[0m [32m INFO[0m    📞 URIs: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:55.186707Z[0m [32m INFO[0m Starting media session for dialog: media-sess_bf439f50-a608-4f75-8532-0a114c914697
[2m2025-06-23T02:03:55.215279Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=127, ts=32648
[2m2025-06-23T02:03:55.252420Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=130, ts=33128
[2m2025-06-23T02:03:55.252445Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=79, ts=33136
[2m2025-06-23T02:03:55.252452Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=27, ts=32992
[2m2025-06-23T02:03:55.273870Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=131, ts=33288
[2m2025-06-23T02:03:55.273885Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=28, ts=33152
[2m2025-06-23T02:03:55.293984Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=132, ts=33448
[2m2025-06-23T02:03:55.293984Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=81, ts=33456
[2m2025-06-23T02:03:55.313372Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=82, ts=33616
Received command: Timer("100") for transaction Key(z9hG4bK-88319-4-0:INVITE:server)
[2m2025-06-23T02:03:55.318131Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:55.354655Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=32, ts=33792
[2m2025-06-23T02:03:55.354658Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=83, ts=33776
[2m2025-06-23T02:03:55.354684Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=135, ts=33928
[2m2025-06-23T02:03:55.354702Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=33, ts=33952
[2m2025-06-23T02:03:55.372373Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=85, ts=34096
[2m2025-06-23T02:03:55.392380Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=137, ts=34248
[2m2025-06-23T02:03:55.392415Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=34, ts=34112
[2m2025-06-23T02:03:55.392393Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=86, ts=34256
[2m2025-06-23T02:03:55.414199Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=87, ts=34416
[2m2025-06-23T02:03:55.414220Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=35, ts=34272
[2m2025-06-23T02:03:55.431395Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=139, ts=34568
[2m2025-06-23T02:03:55.431395Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=36, ts=34432
[2m2025-06-23T02:03:55.453962Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=37, ts=34592
[2m2025-06-23T02:03:55.453976Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=88, ts=34576
[2m2025-06-23T02:03:55.474126Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=90, ts=34896
[2m2025-06-23T02:03:55.474129Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=38, ts=34752
[2m2025-06-23T02:03:55.494313Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=40, ts=35072
[2m2025-06-23T02:03:55.513232Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=92, ts=35216
[2m2025-06-23T02:03:55.530435Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=41, ts=35232
[2m2025-06-23T02:03:55.552137Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=145, ts=35528
[2m2025-06-23T02:03:55.552240Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=93, ts=35376
[2m2025-06-23T02:03:55.573758Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=94, ts=35536
[2m2025-06-23T02:03:55.593340Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=96, ts=35856
[2m2025-06-23T02:03:55.593356Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=147, ts=35848
[2m2025-06-23T02:03:55.610916Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=45, ts=35872
[2m2025-06-23T02:03:55.630749Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=46, ts=36032
[2m2025-06-23T02:03:55.652517Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=149, ts=36168
[2m2025-06-23T02:03:55.652554Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=47, ts=36192
[2m2025-06-23T02:03:55.652570Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=99, ts=36336
[2m2025-06-23T02:03:55.673535Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=100, ts=36496
[2m2025-06-23T02:03:55.673535Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=151, ts=36488
[2m2025-06-23T02:03:55.673569Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=48, ts=36352
[2m2025-06-23T02:03:55.688652Z[0m [32m INFO[0m Started UDP transport receiver tasks
[2m2025-06-23T02:03:55.688731Z[0m [32m INFO[0m Started RTP session with SSRC=ed5763f6
[2m2025-06-23T02:03:55.688751Z[0m [32m INFO[0m ✅ Created media session with REAL RTP session: media-sess_bf439f50-a608-4f75-8532-0a114c914697 (port: 27666)
[2m2025-06-23T02:03:55.688763Z[0m [32m INFO[0m ✅ Created media session: media-sess_bf439f50-a608-4f75-8532-0a114c914697 for SIP session: sess_bf439f50-a608-4f75-8532-0a114c914697 with real MediaSessionController + zero-copy enabled
[2m2025-06-23T02:03:55.688768Z[0m [32m INFO[0m Created media session for sess_bf439f50-a608-4f75-8532-0a114c914697
[2m2025-06-23T02:03:55.688800Z[0m [32m INFO[0m ✅ Updated media session for SIP session: sess_bf439f50-a608-4f75-8532-0a114c914697 with remote: 127.0.0.1:6508 and codecs: ["PCMU"]
[2m2025-06-23T02:03:55.688809Z[0m [32m INFO[0m Generated SDP answer for session sess_bf439f50-a608-4f75-8532-0a114c914697 with codecs: ["PCMU", "PCMA"]
[2m2025-06-23T02:03:55.688827Z[0m [32m INFO[0m Answering call 43f5015a-0e99-4b8b-bef1-a75b420c1642
[2m2025-06-23T02:03:55.688900Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
Received command: CancelTimer100 for transaction Key(z9hG4bK-88319-4-0:INVITE:server)
[2m2025-06-23T02:03:55.688998Z[0m [32m INFO[0m Dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642 local tag set to match response: tag-939fd13e6b35497eb74aaa5a480fb853
[2m2025-06-23T02:03:55.689003Z[0m [32m INFO[0m Dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642 transitioned to Confirmed state
Received command: TransitionTo(Terminated) for transaction Key(z9hG4bK-88319-4-0:INVITE:server)
Processing TransitionTo(Terminated) current state: Proceeding
Valid state transition: Proceeding -> Terminated
State successfully changed to: Terminated
Sent StateChanged event result: Success
[2m2025-06-23T02:03:55.689010Z[0m [32m INFO[0m Updated dialog lookup for confirmed dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
Transaction loop ending for Key(z9hG4bK-88319-4-0:INVITE:server). Final state: Terminated
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallAnswered { dialog_id: DialogId(43f5015a-0e99-4b8b-bef1-a75b420c1642), session_answer: "v=0\r\no=rvoip 1750644235 1750644235 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 27666 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
[2m2025-06-23T02:03:55.689070Z[0m [32m INFO[0m Successfully answered call 43f5015a-0e99-4b8b-bef1-a75b420c1642
[2m2025-06-23T02:03:55.689124Z[0m [32m INFO[0m Call answered for session sess_bf439f50-a608-4f75-8532-0a114c914697: 43f5015a-0e99-4b8b-bef1-a75b420c1642 (awaiting ACK per RFC 3261)
[2m2025-06-23T02:03:55.689196Z[0m [32m INFO[0m 📞 Call answered for session sess_bf439f50-a608-4f75-8532-0a114c914697 - keeping in Initiating state until media ready
[2m2025-06-23T02:03:55.689206Z[0m [32m INFO[0m 🚫 RFC 3261: NOT creating media session yet - waiting for ACK
[2m2025-06-23T02:03:55.689171Z[0m [32m INFO[0m Accepted incoming call: sess_bf439f50-a608-4f75-8532-0a114c914697 (dialog: 43f5015a-0e99-4b8b-bef1-a75b420c1642)
🎯 COORDINATOR: Handling event: SdpEvent { session_id: SessionId("sess_bf439f50-a608-4f75-8532-0a114c914697"), event_type: "remote_sdp_answer", sdp: "v=0\r\no=rvoip 1750644235 1750644235 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 27666 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
[2m2025-06-23T02:03:55.689243Z[0m [32m INFO[0m 📞 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 state changed: "Proceeding" -> Connected
[2m2025-06-23T02:03:55.689259Z[0m [32m INFO[0m 💬 Reason: Call established
[2m2025-06-23T02:03:55.689272Z[0m [32m INFO[0m Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 established with SDP exchange
[2m2025-06-23T02:03:55.689256Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_bf439f50-a608-4f75-8532-0a114c914697
[2m2025-06-23T02:03:55.689293Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_bf439f50-a608-4f75-8532-0a114c914697
[2m2025-06-23T02:03:55.689285Z[0m [32m INFO[0m Answered call d73cd697-e3f3-447e-8422-d13ce2a6cbd6
[2m2025-06-23T02:03:55.689306Z[0m [32m INFO[0m 📞 Successfully answered call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 with SDP
[2m2025-06-23T02:03:55.689313Z[0m [32m INFO[0m Applying negotiated config: codec=PCMU, remote=127.0.0.1:27666
[2m2025-06-23T02:03:55.689313Z[0m [32m INFO[0m 📊 Active calls: 4
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: "ACK sip:service@127.0.0.1:5060 SIP/2.0\r\n[2m2025-06-23T02:03:55.689337Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
Via: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883194_ACK\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag004\r\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-939fd13e6b35497eb74aaa5a480fb853\r[2m2025-06-23T02:03:55.689329Z[0m [32m INFO[0m SDP negotiation successful: codec=PCMU, local=127.0.0.1:27666, remote=127.0.0.1:27666
[2m2025-06-23T02:03:55.689394Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:55.689404Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:55.689408Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
\nCall-ID: 4-88319@127.0.0.1\r[2m2025-06-23T02:03:55.689414Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:55.689428Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:55.689432Z[0m [32m INFO[0m 🎵 Call 71fab620-8547-4ca0-b528-10119ad9d5fc is connected
\n[2m2025-06-23T02:03:55.689446Z[0m [32m INFO[0m    📡 Local RTP: Some(20714)
[2m2025-06-23T02:03:55.689453Z[0m [32m INFO[0m    📡 Remote RTP: Some(20714)
[2m2025-06-23T02:03:55.689456Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:55.689459Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 20714 from port 20714
CSeq: 1 ACK\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r[2m2025-06-23T02:03:55.689464Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:55.689503Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
\nContent-Length: 0\r\n🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_bf439f50-a608-4f75-8532-0a114c914697"), old_state: Ringing, new_state: Active }
\r\n"
Input as hex: [41, 43, 4b[2m2025-06-23T02:03:55.689530Z[0m [32m INFO[0m Session sess_bf439f50-a608-4f75-8532-0a114c914697 state changed: Ringing -> Active
, [2m2025-06-23T02:03:55.689518Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
20, 73, 69, 70, [2m2025-06-23T02:03:55.689594Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:55.689629Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
3a, 73, 65[2m2025-06-23T02:03:55.689639Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:55.689668Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
, 72, 76, 69, 63, 65, [2m2025-06-23T02:03:55.689581Z[0m [32m INFO[0m Media info available: true
[2m2025-06-23T02:03:55.689716Z[0m [32m INFO[0m Local SDP length: Some(156)
40, 31, 32, [2m2025-06-23T02:03:55.689720Z[0m [32m INFO[0m Remote SDP length: Some(179)
37, 2e, 30, 2e, 30, 2e, 31[2m2025-06-23T02:03:55.689751Z[0m [32m INFO[0m Notifying handler about call sess_bf439f50-a608-4f75-8532-0a114c914697 establishment
, 3a, 35, [2m2025-06-23T02:03:55.689804Z[0m [32m INFO[0m 📞 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 state changed: "Proceeding" -> Connected
[2m2025-06-23T02:03:55.689843Z[0m [32m INFO[0m 💬 Reason: Call established
30, 36, 30, 20, 53[2m2025-06-23T02:03:55.689854Z[0m [32m INFO[0m Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 established with SDP exchange
, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 🎯 COORDINATOR: Handling event: MediaNegotiated { session_id: SessionId("sess_bf439f50-a608-4f75-8532-0a114c914697"), local_addr: 127.0.0.1:27666, remote_addr: 127.0.0.1:27666, codec: "PCMU" }
56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32[2m2025-06-23T02:03:55.689677Z[0m [32m INFO[0m 📊 Server Stats: Total=4, Active=4, Connected=3
, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 38, 38, 33, 31, 39, 34, 5f, 41, 43, 4b, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 34, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 39, 33, 39, 66, 64, 31, 33, 65, 36, 62, 33, 35, 34, 39, 37, 65, 62, 37, 34, 61, 61, 61, 35, 61, 34, 38, 30, 66, 62, 38, 35, 33, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 34, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 41, 43, 4b, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 57, 51, 57, 102, 100, 49, 51, 101, 54, 98, 51, 53, 52, 57, 55, 101, 98, 55, 52, 97, 97, 97, 53, 97, 52, 56, 48, 102, 98, 56, 53, 51]
Successfully parsed tag: tag-939fd13e6b35497eb74aaa5a480fb853
=== PARSE SUCCESS ===
Successfully parsed message
=====================
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("sipp"), "params": Array([Object({"Tag": String("88319SIPpTag004")})]), "uri": Object({"raw_uri": Null, "headers": Object({}), "password": Null, "host": Object({"Address": String("127.0.0.1")}), "user": String("sipp"), "port": Number(5061.0), "scheme": String("Sip"), "parameters": Array([])})})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag004")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag004")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag004")
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"uri": Object({"port": Number(5061.0), "host": Object({"Address": String("127.0.0.1")}), "parameters": Array([]), "scheme": String("Sip"), "user": String("sipp"), "raw_uri": Null, "headers": Object({}), "password": Null}), "params": Array([Object({"Tag": String("88319SIPpTag004")})]), "display_name": String("sipp")})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag004")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag004")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag004")
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("service"), "params": Array([]), "uri": Object({"raw_uri": Null, "host": Object({"Address": String("127.0.0.1")}), "parameters": Array([]), "scheme": String("Sip"), "user": String("service"), "port": Number(5060.0), "headers": Object({}), "password": Null})})
Processing segment Index(0) at index 3, current value: Array([])
Index 0 out of bounds for array of length 0
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("service"), "params": Array([Object({"Tag": String("tag-939fd13e6b35497eb74aaa5a480fb853")})]), "uri": Object({"headers": Object({}), "host": Object({"Address": String("127.0.0.1")}), "password": Null, "scheme": String("Sip"), "parameters": Array([]), "raw_uri": Null, "port": Number(5060.0), "user": String("service")})})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("tag-939fd13e6b35497eb74aaa5a480fb853")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("tag-939fd13e6b35497eb74aaa5a480fb853")})
Final value for path 'headers.To.params[0].Tag': String("tag-939fd13e6b35497eb74aaa5a480fb853")
[2m2025-06-23T02:03:55.691845Z[0m [32m INFO[0m ✅ RFC 3261: ACK received for transaction Key(z9hG4bK-88319-4-0:INVITE:server) in dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642 - time to start media (UAS side)
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: AckReceived { dialog_id: DialogId(43f5015a-0e99-4b8b-bef1-a75b420c1642), transaction_id: z9hG4bK-88319-4-0:INVITE:server, negotiated_sdp: None }
[2m2025-06-23T02:03:55.691871Z[0m [32m INFO[0m ✅ RFC 3261: ACK RECEIVED for session sess_bf439f50-a608-4f75-8532-0a114c914697 - creating media session (UAS side)
🎯 COORDINATOR: Handling event: MediaEvent { session_id: SessionId("sess_bf439f50-a608-4f75-8532-0a114c914697"), event: "rfc_compliant_media_creation_uas" }
[2m2025-06-23T02:03:55.691880Z[0m [32m INFO[0m Media creation event for sess_bf439f50-a608-4f75-8532-0a114c914697: rfc_compliant_media_creation_uas
[2m2025-06-23T02:03:55.692254Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=101, ts=36656
[2m2025-06-23T02:03:55.692265Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=49, ts=36512
[2m2025-06-23T02:03:55.709386Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=50, ts=36672
[2m2025-06-23T02:03:55.709392Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=0, ts=36664
[2m2025-06-23T02:03:55.730410Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=153, ts=36808
[2m2025-06-23T02:03:55.730419Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=1, ts=36824
[2m2025-06-23T02:03:55.754297Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=154, ts=36968
[2m2025-06-23T02:03:55.754303Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=52, ts=36992
[2m2025-06-23T02:03:55.754337Z[0m [32m INFO[0m New RTP stream detected with SSRC=1816bb1c
[2m2025-06-23T02:03:55.754330Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=155, ts=37128
[2m2025-06-23T02:03:55.754333Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=2, ts=36984
[2m2025-06-23T02:03:55.754312Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=103, ts=36976
[2m2025-06-23T02:03:55.791164Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:55.791193Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.791198Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.791202Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.791205Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.791210Z[0m [32m INFO[0m 📊 Server Stats: Total=4, Active=4, Connected=4
[2m2025-06-23T02:03:55.794322Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=106, ts=37456
[2m2025-06-23T02:03:55.794322Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=157, ts=37448
[2m2025-06-23T02:03:55.794343Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=4, ts=37304
[2m2025-06-23T02:03:55.794346Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=54, ts=37312
[2m2025-06-23T02:03:55.813183Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=6, ts=37624
[2m2025-06-23T02:03:55.833266Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=159, ts=37768
[2m2025-06-23T02:03:55.833288Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=7, ts=37784
[2m2025-06-23T02:03:55.833293Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=56, ts=37632
[2m2025-06-23T02:03:55.853331Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=8, ts=37944
[2m2025-06-23T02:03:55.853335Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=57, ts=37792
[2m2025-06-23T02:03:55.873395Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=9, ts=38104
[2m2025-06-23T02:03:55.873396Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=58, ts=37952
[2m2025-06-23T02:03:55.889790Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=59, ts=38112
[2m2025-06-23T02:03:55.892092Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:55.892103Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.892118Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.892121Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.892124Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.892130Z[0m [32m INFO[0m 📊 Server Stats: Total=4, Active=4, Connected=4
[2m2025-06-23T02:03:55.913860Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=162, ts=38248
[2m2025-06-23T02:03:55.913883Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=163, ts=38408
[2m2025-06-23T02:03:55.913913Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=11, ts=38424
[2m2025-06-23T02:03:55.913926Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=112, ts=38416
[2m2025-06-23T02:03:55.934082Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=61, ts=38432
[2m2025-06-23T02:03:55.934106Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=12, ts=38584
[2m2025-06-23T02:03:55.951751Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=62, ts=38592
[2m2025-06-23T02:03:55.970157Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=13, ts=38744
[2m2025-06-23T02:03:55.970173Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=114, ts=38736
[2m2025-06-23T02:03:55.990947Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=115, ts=38896
[2m2025-06-23T02:03:55.990954Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=14, ts=38904
[2m2025-06-23T02:03:55.993345Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:55.993362Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.993368Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.993373Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.993376Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:55.993383Z[0m [32m INFO[0m 📊 Server Stats: Total=4, Active=4, Connected=4
[2m2025-06-23T02:03:56.013089Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=116, ts=39056
[2m2025-06-23T02:03:56.013119Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=168, ts=39208
[2m2025-06-23T02:03:56.013124Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=15, ts=39064
[2m2025-06-23T02:03:56.030047Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=16, ts=39224
[2m2025-06-23T02:03:56.051246Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=118, ts=39376
[2m2025-06-23T02:03:56.051403Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=17, ts=39384
[2m2025-06-23T02:03:56.051292Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=169, ts=39368
[2m2025-06-23T02:03:56.073075Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=119, ts=39536
[2m2025-06-23T02:03:56.073339Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=18, ts=39544
[2m2025-06-23T02:03:56.073450Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=120, ts=39696
[2m2025-06-23T02:03:56.093787Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=172, ts=39848
[2m2025-06-23T02:03:56.094056Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:56.094150Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=19, ts=39704
[2m2025-06-23T02:03:56.094153Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.094399Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.094450Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.094066Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=69, ts=39712
[2m2025-06-23T02:03:56.094482Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.094621Z[0m [32m INFO[0m 📊 Server Stats: Total=4, Active=4, Connected=4
[2m2025-06-23T02:03:56.110495Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=70, ts=39872
=== PARSING SIP MESSAGE ===
Input length: 557 bytes
Input as string: "INVITE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK-88319-5-0\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag005\r\nTo: service <sip:service@127.0.0.1:5060>\r\nCall-ID: 5-88319@127.0.0.1\r\nCSeq: 1 INVITE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nSubject: SIPp Test Call\r\nContent-Type: application/sdp\r\nContent-Length:   179\r\n\r\nv=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n"
Input as hex: [49, 4e, 56, 49, 54, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 2d, 38, 38, 33, 31, 39, 2d, 35, 2d, 30, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 35, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 35, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 49, 4e, 56, 49, 54, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 53, 75, 62, 6a, 65, 63, 74, 3a, 20, 53, 49, 50, 70, 20, 54, 65, 73, 74, 20, 43, 61, 6c, 6c, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 54, 79, 70, 65, 3a, 20, 61, 70, 70, 6c, 69, 63, 61, 74, 69, 6f, 6e, 2f, 73, 64, 70, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 20, 20, 31, 37, 39, 0d, 0a, 0d, 0a, 76, 3d, 30, 0d, 0a, 6f, 3d, 75, 73, 65, 72, 31, 20, 35, 33, 36, 35, 35, 37, 36, 35, 20, 32, 33, 35, 33, 36, 38, 37, 36, 33, 37, 20, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 73, 3d, 53, 49, 50, 70, 20, 4d, 65, 64, 69, 61, 20, 54, 65, 73, 74, 0d, 0a, 63, 3d, 49, 4e, 20, 49, 50, 34, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 74, 3d, 30, 20, 30, 0d, 0a, 6d, 3d, 61, 75, 64, 69, 6f, 20, 36, 35, 30, 38, 20, 52, 54, 50, 2f, 41, 56, 50, 20, 30, 20, 38, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 30, 20, 50, 43, 4d, 55, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 72, 74, 70, 6d, 61, 70, 3a, 38, 20, 50, 43, 4d, 41, 2f, 38, 30, 30, 30, 0d, 0a, 61, 3d, 73, 65, 6e, 64, 72, 65, 63, 76, 0d, 0a]
===========================
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:03:56.119003Z[0m [32m INFO[0m Created new ServerInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK-88319-5-0:INVITE:server) [3mmethod[0m[2m=[0mINVITE
🎯 FOUND UNASSOCIATED INVITE: Processing new incoming INVITE from 127.0.0.1:5061
🔍 INVITE HANDLER: Processing initial INVITE request from 127.0.0.1:5061
[2m2025-06-23T02:03:56.119050Z[0m [32m INFO[0m Created early dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3 from INVITE request
🔍 INVITE HANDLER: Created early dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
🔍 INVITE HANDLER: Associated transaction Key(z9hG4bK-88319-5-0:INVITE:server) with dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
🔍 INVITE HANDLER: About to send SessionCoordinationEvent::IncomingCall for dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
🔍 INVITE HANDLER: Successfully sent SessionCoordinationEvent::IncomingCall for dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
[2m2025-06-23T02:03:56.119076Z[0m [32m INFO[0m Initial INVITE processed, created dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: IncomingCall { dialog_id: DialogId(9bf121bb-a573-4383-8c94-8a648b1f76d3), transaction_id: z9hG4bK-88319-5-0:INVITE:server, request: Request { method: Invite, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK-88319-5-0")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag005")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [] })), CallId(CallId("5-88319@127.0.0.1")), CSeq(CSeq { seq: 1, method: Invite }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), Subject(Subject("SIPp Test Call")), ContentType(ContentType(ContentTypeValue { m_type: "application", m_subtype: "sdp", parameters: {} })), ContentLength(ContentLength(179))], body: b"v=0\r\no=user1 53655765 2353687637 IN IP4 127.0.0.1\r\ns=SIPp Media Test\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 6508 RTP/AVP 0 8\r\na=rtpmap:0 PCMU/8000\r\na=rtpmap:8 PCMA/8000\r\na=sendrecv\r\n" }, source: 127.0.0.1:5061 }
[2m2025-06-23T02:03:56.119246Z[0m [32m INFO[0m handle_incoming_call called for dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
[2m2025-06-23T02:03:56.119259Z[0m [32m INFO[0m Incoming call from dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3: sip:from@127.0.0.1 -> sip:to@local
Transaction loop starting for Key(z9hG4bK-88319-5-0:INVITE:server)
Initial state: Proceeding
Received command: TransitionTo(Proceeding) for transaction Key(z9hG4bK-88319-5-0:INVITE:server)
Processing TransitionTo(Proceeding) current state: Proceeding
Already in requested state, no transition needed: Proceeding
[2m2025-06-23T02:03:56.119323Z[0m [32m INFO[0m Created session sess_08fe24db-0259-407a-b5ec-326570c14038 for incoming call dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
[2m2025-06-23T02:03:56.119384Z[0m [32m INFO[0m Calling handler.on_incoming_call for session sess_08fe24db-0259-407a-b5ec-326570c14038
[2m2025-06-23T02:03:56.119418Z[0m [32m INFO[0m 📞 Incoming call from: sip:from@127.0.0.1 (Call-ID: 68fe7b67-67c8-40c1-93a4-4889eb9dd84f)
[2m2025-06-23T02:03:56.119428Z[0m [32m INFO[0m 📋 Call Info Debug:
[2m2025-06-23T02:03:56.119436Z[0m [32m INFO[0m    - CallId: 68fe7b67-67c8-40c1-93a4-4889eb9dd84f
[2m2025-06-23T02:03:56.119444Z[0m [32m INFO[0m    - Caller URI: sip:from@127.0.0.1
[2m2025-06-23T02:03:56.119449Z[0m [32m INFO[0m    - Callee URI: sip:to@local
[2m2025-06-23T02:03:56.119452Z[0m [32m INFO[0m    - Display Name: None
[2m2025-06-23T02:03:56.119456Z[0m [32m INFO[0m 🔔 Auto-answer enabled, deferring for SDP generation
[2m2025-06-23T02:03:56.119460Z[0m [32m INFO[0m Handler decision for session sess_08fe24db-0259-407a-b5ec-326570c14038: Defer
[2m2025-06-23T02:03:56.119464Z[0m [32m INFO[0m Deferring incoming call for session sess_08fe24db-0259-407a-b5ec-326570c14038 (e.g., added to queue)
🎯 COORDINATOR: Handling event: SessionCreated { session_id: SessionId("sess_08fe24db-0259-407a-b5ec-326570c14038"), from: "sip:from@127.0.0.1", to: "sip:to@local", call_state: Ringing }
[2m2025-06-23T02:03:56.119492Z[0m [32m INFO[0m Session sess_08fe24db-0259-407a-b5ec-326570c14038 created with state Ringing
[2m2025-06-23T02:03:56.134357Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=71, ts=40032
[2m2025-06-23T02:03:56.134383Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=173, ts=40008
[2m2025-06-23T02:03:56.134357Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=122, ts=40016
[2m2025-06-23T02:03:56.134398Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=21, ts=40024
[2m2025-06-23T02:03:56.153268Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=175, ts=40328
[2m2025-06-23T02:03:56.153300Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=124, ts=40336
[2m2025-06-23T02:03:56.153303Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=23, ts=40344
[2m2025-06-23T02:03:56.173086Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=73, ts=40352
[2m2025-06-23T02:03:56.173090Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=125, ts=40496
[2m2025-06-23T02:03:56.194398Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=24, ts=40504
[2m2025-06-23T02:03:56.194423Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=25, ts=40664
[2m2025-06-23T02:03:56.194404Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=74, ts=40512
[2m2025-06-23T02:03:56.195619Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:56.195630Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:56.195636Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.195641Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.195645Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.195649Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.195655Z[0m [32m INFO[0m ✅ Found pending call to answer: 68fe7b67-67c8-40c1-93a4-4889eb9dd84f
[2m2025-06-23T02:03:56.195659Z[0m [32m INFO[0m    📋 Call details: state=IncomingPending, direction=Incoming
[2m2025-06-23T02:03:56.195663Z[0m [32m INFO[0m    📞 URIs: sip:from@127.0.0.1 -> sip:to@local
[2m2025-06-23T02:03:56.195679Z[0m [32m INFO[0m Starting media session for dialog: media-sess_08fe24db-0259-407a-b5ec-326570c14038
[2m2025-06-23T02:03:56.251286Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=179, ts=40968
[2m2025-06-23T02:03:56.251293Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=77, ts=40992
[2m2025-06-23T02:03:56.292385Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=182, ts=41448
[2m2025-06-23T02:03:56.292623Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=29, ts=41304
[2m2025-06-23T02:03:56.310070Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=131, ts=41456
[2m2025-06-23T02:03:56.310081Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=30, ts=41464
Received command: Timer("100") for transaction Key(z9hG4bK-88319-5-0:INVITE:server)
[2m2025-06-23T02:03:56.320571Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:56.334703Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=132, ts=41616
[2m2025-06-23T02:03:56.334715Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=183, ts=41608
[2m2025-06-23T02:03:56.334735Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=133, ts=41776
[2m2025-06-23T02:03:56.334749Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=31, ts=41624
[2m2025-06-23T02:03:56.353644Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=134, ts=41936
[2m2025-06-23T02:03:56.353679Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=33, ts=41944
[2m2025-06-23T02:03:56.353658Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=185, ts=41928
[2m2025-06-23T02:03:56.390965Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=34, ts=42104
[2m2025-06-23T02:03:56.415232Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=136, ts=42256
[2m2025-06-23T02:03:56.415350Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=85, ts=42272
[2m2025-06-23T02:03:56.415510Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=35, ts=42264
[2m2025-06-23T02:03:56.432939Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=189, ts=42568
[2m2025-06-23T02:03:56.432958Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=138, ts=42576
[2m2025-06-23T02:03:56.450878Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=87, ts=42592
[2m2025-06-23T02:03:56.474561Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=88, ts=42752
[2m2025-06-23T02:03:56.474744Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=89, ts=42912
[2m2025-06-23T02:03:56.474662Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=191, ts=42888
[2m2025-06-23T02:03:56.515353Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=90, ts=43072
[2m2025-06-23T02:03:56.515631Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=142, ts=43216
[2m2025-06-23T02:03:56.515706Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=91, ts=43232
[2m2025-06-23T02:03:56.533443Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=143, ts=43376
[2m2025-06-23T02:03:56.553606Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=195, ts=43528
[2m2025-06-23T02:03:56.553606Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=144, ts=43536
[2m2025-06-23T02:03:56.553653Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=92, ts=43392
[2m2025-06-23T02:03:56.573774Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=93, ts=43552
[2m2025-06-23T02:03:56.573785Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=196, ts=43688
[2m2025-06-23T02:03:56.590563Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=94, ts=43712
[2m2025-06-23T02:03:56.615309Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=198, ts=44008
[2m2025-06-23T02:03:56.615676Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=146, ts=43856
[2m2025-06-23T02:03:56.615914Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=147, ts=44016
[2m2025-06-23T02:03:56.615933Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=45, ts=43864
[2m2025-06-23T02:03:56.652118Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=97, ts=44192
[2m2025-06-23T02:03:56.652317Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=47, ts=44184
[2m2025-06-23T02:03:56.671680Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=98, ts=44352
[2m2025-06-23T02:03:56.671722Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=48, ts=44344
[2m2025-06-23T02:03:56.671704Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=201, ts=44488
[2m2025-06-23T02:03:56.671685Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=149, ts=44336
[2m2025-06-23T02:03:56.690048Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=49, ts=44504
[2m2025-06-23T02:03:56.697016Z[0m [32m INFO[0m Started UDP transport receiver tasks
[2m2025-06-23T02:03:56.697078Z[0m [32m INFO[0m Started RTP session with SSRC=704f9e16
[2m2025-06-23T02:03:56.697094Z[0m [32m INFO[0m ✅ Created media session with REAL RTP session: media-sess_08fe24db-0259-407a-b5ec-326570c14038 (port: 25573)
[2m2025-06-23T02:03:56.697105Z[0m [32m INFO[0m ✅ Created media session: media-sess_08fe24db-0259-407a-b5ec-326570c14038 for SIP session: sess_08fe24db-0259-407a-b5ec-326570c14038 with real MediaSessionController + zero-copy enabled
[2m2025-06-23T02:03:56.697111Z[0m [32m INFO[0m Created media session for sess_08fe24db-0259-407a-b5ec-326570c14038
[2m2025-06-23T02:03:56.697139Z[0m [32m INFO[0m ✅ Updated media session for SIP session: sess_08fe24db-0259-407a-b5ec-326570c14038 with remote: 127.0.0.1:6508 and codecs: ["PCMU"]
[2m2025-06-23T02:03:56.697147Z[0m [32m INFO[0m Generated SDP answer for session sess_08fe24db-0259-407a-b5ec-326570c14038 with codecs: ["PCMU", "PCMA"]
[2m2025-06-23T02:03:56.697165Z[0m [32m INFO[0m Answering call 9bf121bb-a573-4383-8c94-8a648b1f76d3
Received command: CancelTimer100 for transaction Key(z9hG4bK-88319-5-0:INVITE:server)
[2m2025-06-23T02:03:56.697231Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:56.697302Z[0m [32m INFO[0m Dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3 local tag set to match response: tag-2122f0b20ef84e97ab09f43ad2b36b01
[2m2025-06-23T02:03:56.697306Z[0m [32m INFO[0m Dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3 transitioned to Confirmed state
Received command: TransitionTo(Terminated) for transaction Key(z9hG4bK-88319-5-0:INVITE:server)
Processing TransitionTo(Terminated) current state: Proceeding
Valid state transition: Proceeding -> Terminated
State successfully changed to: Terminated
Sent StateChanged event result: Success
[2m2025-06-23T02:03:56.697314Z[0m [32m INFO[0m Updated dialog lookup for confirmed dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
[2m2025-06-23T02:03:56.697376Z[0m [32m INFO[0m Successfully answered call 9bf121bb-a573-4383-8c94-8a648b1f76d3
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallAnswered { dialog_id: DialogId(9bf121bb-a573-4383-8c94-8a648b1f76d3), session_answer: "v=0\r\no=rvoip 1750644236 1750644236 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 25573 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
[2m2025-06-23T02:03:56.697404Z[0m [32m INFO[0m Call answered for session sess_08fe24db-0259-407a-b5ec-326570c14038: 9bf121bb-a573-4383-8c94-8a648b1f76d3 (awaiting ACK per RFC 3261)
[2m2025-06-23T02:03:56.697414Z[0m [32m INFO[0m 📞 Call answered for session sess_08fe24db-0259-407a-b5ec-326570c14038 - keeping in Initiating state until media ready
[2m2025-06-23T02:03:56.697422Z[0m [32m INFO[0m 🚫 RFC 3261: NOT creating media session yet - waiting for ACK
Transaction loop ending for Key(z9hG4bK-88319-5-0:INVITE:server). Final state: Terminated
🎯 COORDINATOR: Handling event: SdpEvent { session_id: SessionId("sess_08fe24db-0259-407a-b5ec-326570c14038"), event_type: "remote_sdp_answer", sdp: "v=0\r\no=rvoip 1750644236 1750644236 IN IP4 127.0.0.1\r\ns=RVOIP Session\r\nc=IN IP4 127.0.0.1\r\nt=0 0\r\nm=audio 25573 RTP/AVP 0\r\na=rtpmap:0 PCMU/8000\r\na=sendrecv\r\n" }
[2m2025-06-23T02:03:56.697461Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_08fe24db-0259-407a-b5ec-326570c14038
[2m2025-06-23T02:03:56.697469Z[0m [32m INFO[0m Negotiating SDP as UAC for session sess_08fe24db-0259-407a-b5ec-326570c14038
[2m2025-06-23T02:03:56.697385Z[0m [32m INFO[0m Accepted incoming call: sess_08fe24db-0259-407a-b5ec-326570c14038 (dialog: 9bf121bb-a573-4383-8c94-8a648b1f76d3)
[2m2025-06-23T02:03:56.697484Z[0m [32m INFO[0m Applying negotiated config: codec=PCMU, remote=127.0.0.1:25573
[2m2025-06-23T02:03:56.697492Z[0m [32m INFO[0m 📞 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f state changed: "Proceeding" -> Connected
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: [2m2025-06-23T02:03:56.697504Z[0m [32m INFO[0m 💬 Reason: Call established
[2m2025-06-23T02:03:56.697535Z[0m [32m INFO[0m Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f established with SDP exchange
[2m2025-06-23T02:03:56.697554Z[0m [32m INFO[0m Answered call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f
[2m2025-06-23T02:03:56.697562Z[0m [32m INFO[0m 📞 Successfully answered call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f with SDP
[2m2025-06-23T02:03:56.697494Z[0m [32m INFO[0m SDP negotiation successful: codec=PCMU, local=127.0.0.1:25573, remote=127.0.0.1:25573
"ACK sip:service@127.0.0.1:5060 SIP/2.0\r\n🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_08fe24db-0259-407a-b5ec-326570c14038"), old_state: Ringing, new_state: Active }
[2m2025-06-23T02:03:56.697618Z[0m [32m INFO[0m Session sess_08fe24db-0259-407a-b5ec-326570c14038 state changed: Ringing -> Active
Via: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883195_ACK\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag005\r[2m2025-06-23T02:03:56.697630Z[0m [32m INFO[0m Media info available: true
[2m2025-06-23T02:03:56.697649Z[0m [32m INFO[0m Local SDP length: Some(156)
[2m2025-06-23T02:03:56.697653Z[0m [32m INFO[0m Remote SDP length: Some(179)
\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-2122f0b20ef84e97ab09f43ad2b36b01\r\nCall-ID: 5-88319@127.0.0.1\r\n[2m2025-06-23T02:03:56.697568Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:56.697689Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:56.697658Z[0m [32m INFO[0m Notifying handler about call sess_08fe24db-0259-407a-b5ec-326570c14038 establishment
[2m2025-06-23T02:03:56.697704Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
CSeq: 1 ACK\r\n[2m2025-06-23T02:03:56.697713Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:56.697731Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
Contact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r[2m2025-06-23T02:03:56.697735Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:56.697758Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
\nContent-Length: 0\r\n\r[2m2025-06-23T02:03:56.697762Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
\n"
Input as hex: [41, [2m2025-06-23T02:03:56.697705Z[0m [32m INFO[0m 📞 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f state changed: "Proceeding" -> Connected
[2m2025-06-23T02:03:56.697814Z[0m [32m INFO[0m 💬 Reason: Call established
[2m2025-06-23T02:03:56.697820Z[0m [32m INFO[0m Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f established with SDP exchange
43, 4b🎯 COORDINATOR: Handling event: MediaNegotiated { session_id: SessionId("sess_08fe24db-0259-407a-b5ec-326570c14038"), local_addr: 127.0.0.1:25573, remote_addr: 127.0.0.1:25573, codec: "PCMU" }
, 20, 73, 69, 70, 3a, 73, 65[2m2025-06-23T02:03:56.697791Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:56.697889Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
, 72, [2m2025-06-23T02:03:56.697893Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:56.697907Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:56.697911Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
76, [2m2025-06-23T02:03:56.697914Z[0m [32m INFO[0m 🎵 Call 71fab620-8547-4ca0-b528-10119ad9d5fc is connected
69, 63, 65, 40, 31[2m2025-06-23T02:03:56.697928Z[0m [32m INFO[0m    📡 Local RTP: Some(20714)
[2m2025-06-23T02:03:56.697949Z[0m [32m INFO[0m    📡 Remote RTP: Some(20714)
[2m2025-06-23T02:03:56.697953Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:56.697957Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 20714 from port 20714
, 32, 37, 2e, [2m2025-06-23T02:03:56.697960Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:56.697985Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
30[2m2025-06-23T02:03:56.697993Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:56.697998Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
, 2e[2m2025-06-23T02:03:56.698001Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:56.698010Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:56.698013Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
, 30, 2e[2m2025-06-23T02:03:56.698017Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=4
, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 38, 38, 33, 31, 39, 35, 5f, 41, 43, 4b, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 35, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 32, 31, 32, 32, 66, 30, 62, 32, 30, 65, 66, 38, 34, 65, 39, 37, 61, 62, 30, 39, 66, 34, 33, 61, 64, 32, 62, 33, 36, 62, 30, 31, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 35, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 31, 20, 41, 43, 4b, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 50, 49, 50, 50, 102, 48, 98, 50, 48, 101, 102, 56, 52, 101, 57, 55, 97, 98, 48, 57, 102, 52, 51, 97, 100, 50, 98, 51, 54, 98, 48, 49]
Successfully parsed tag: tag-2122f0b20ef84e97ab09f43ad2b36b01
=== PARSE SUCCESS ===
Successfully parsed message
=====================
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("sipp"), "uri": Object({"scheme": String("Sip"), "port": Number(5061.0), "password": Null, "raw_uri": Null, "headers": Object({}), "parameters": Array([]), "host": Object({"Address": String("127.0.0.1")}), "user": String("sipp")}), "params": Array([Object({"Tag": String("88319SIPpTag005")})])})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag005")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag005")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag005")
Parsed path: [Field("headers"), Field("From"), Field("params"), Index(0), Field("Tag")] from 'headers.From.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("sipp"), "params": Array([Object({"Tag": String("88319SIPpTag005")})]), "uri": Object({"scheme": String("Sip"), "headers": Object({}), "port": Number(5061.0), "raw_uri": Null, "user": String("sipp"), "password": Null, "parameters": Array([]), "host": Object({"Address": String("127.0.0.1")})})})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("88319SIPpTag005")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("88319SIPpTag005")})
Final value for path 'headers.From.params[0].Tag': String("88319SIPpTag005")
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("service"), "uri": Object({"parameters": Array([]), "scheme": String("Sip"), "port": Number(5060.0), "user": String("service"), "password": Null, "headers": Object({}), "host": Object({"Address": String("127.0.0.1")}), "raw_uri": Null}), "params": Array([])})
Processing segment Index(0) at index 3, current value: Array([])
Index 0 out of bounds for array of length 0
Parsed path: [Field("headers"), Field("To"), Field("params"), Index(0), Field("Tag")] from 'headers.To.params[0].Tag'
Processing segment Field("params") at index 2, current value: Object({"display_name": String("service"), "uri": Object({"scheme": String("Sip"), "raw_uri": Null, "host": Object({"Address": String("127.0.0.1")}), "parameters": Array([]), "password": Null, "headers": Object({}), "port": Number(5060.0), "user": String("service")}), "params": Array([Object({"Tag": String("tag-2122f0b20ef84e97ab09f43ad2b36b01")})])})
Processing segment Index(0) at index 3, current value: Array([Object({"Tag": String("tag-2122f0b20ef84e97ab09f43ad2b36b01")})])
Processing segment Field("Tag") at index 4, current value: Object({"Tag": String("tag-2122f0b20ef84e97ab09f43ad2b36b01")})
Final value for path 'headers.To.params[0].Tag': String("tag-2122f0b20ef84e97ab09f43ad2b36b01")
[2m2025-06-23T02:03:56.699842Z[0m [32m INFO[0m ✅ RFC 3261: ACK received for transaction Key(z9hG4bK-88319-5-0:INVITE:server) in dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3 - time to start media (UAS side)
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: AckReceived { dialog_id: DialogId(9bf121bb-a573-4383-8c94-8a648b1f76d3), transaction_id: z9hG4bK-88319-5-0:INVITE:server, negotiated_sdp: None }
[2m2025-06-23T02:03:56.699858Z[0m [32m INFO[0m ✅ RFC 3261: ACK RECEIVED for session sess_08fe24db-0259-407a-b5ec-326570c14038 - creating media session (UAS side)
🎯 COORDINATOR: Handling event: MediaEvent { session_id: SessionId("sess_08fe24db-0259-407a-b5ec-326570c14038"), event: "rfc_compliant_media_creation_uas" }
[2m2025-06-23T02:03:56.699866Z[0m [32m INFO[0m Media creation event for sess_08fe24db-0259-407a-b5ec-326570c14038: rfc_compliant_media_creation_uas
[2m2025-06-23T02:03:56.715113Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=151, ts=44656
[2m2025-06-23T02:03:56.715132Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=50, ts=44664
[2m2025-06-23T02:03:56.715166Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=152, ts=44816
[2m2025-06-23T02:03:56.715186Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=51, ts=44824
[2m2025-06-23T02:03:56.732484Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=204, ts=44968
[2m2025-06-23T02:03:56.732523Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=0, ts=44848
[2m2025-06-23T02:03:56.753814Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=205, ts=45128
[2m2025-06-23T02:03:56.753823Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=1, ts=45008
[2m2025-06-23T02:03:56.772245Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=2, ts=45168
[2m2025-06-23T02:03:56.793576Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=3, ts=45328
[2m2025-06-23T02:03:56.793590Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=104, ts=45312
[2m2025-06-23T02:03:56.793581Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=54, ts=45304
[2m2025-06-23T02:03:56.799394Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:56.799404Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.799409Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.799413Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.799417Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.799421Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.799428Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:56.810252Z[0m [32m INFO[0m New RTP stream detected with SSRC=1816bb1e
[2m2025-06-23T02:03:56.834137Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=157, ts=45616
[2m2025-06-23T02:03:56.834147Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=5, ts=45648
[2m2025-06-23T02:03:56.834166Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=106, ts=45632
[2m2025-06-23T02:03:56.834181Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=209, ts=45768
[2m2025-06-23T02:03:56.853028Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=107, ts=45792
[2m2025-06-23T02:03:56.853044Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=6, ts=45808
[2m2025-06-23T02:03:56.872279Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=211, ts=46088
[2m2025-06-23T02:03:56.872280Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=160, ts=46096
[2m2025-06-23T02:03:56.872295Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=7, ts=45968
[2m2025-06-23T02:03:56.893629Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=161, ts=46256
[2m2025-06-23T02:03:56.893643Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=212, ts=46248
[2m2025-06-23T02:03:56.893664Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=8, ts=46128
[2m2025-06-23T02:03:56.893679Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=109, ts=46112
[2m2025-06-23T02:03:56.900583Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:56.900598Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.900605Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.900611Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.900615Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.900621Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:56.900629Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:56.913978Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=9, ts=46288
[2m2025-06-23T02:03:56.914000Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=110, ts=46272
[2m2025-06-23T02:03:56.914017Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=162, ts=46416
[2m2025-06-23T02:03:56.914031Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=61, ts=46424
[2m2025-06-23T02:03:56.934064Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=214, ts=46568
[2m2025-06-23T02:03:56.934229Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=62, ts=46584
[2m2025-06-23T02:03:56.934238Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=111, ts=46432
[2m2025-06-23T02:03:56.934348Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=10, ts=46448
[2m2025-06-23T02:03:56.953457Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=11, ts=46608
[2m2025-06-23T02:03:56.953456Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=164, ts=46736
[2m2025-06-23T02:03:56.953522Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=112, ts=46592
[2m2025-06-23T02:03:56.973459Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=165, ts=46896
[2m2025-06-23T02:03:56.974143Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=12, ts=46768
[2m2025-06-23T02:03:56.974183Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=63, ts=46744
[2m2025-06-23T02:03:56.994135Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=13, ts=46928
[2m2025-06-23T02:03:56.994176Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=114, ts=46912
[2m2025-06-23T02:03:57.001761Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:57.001788Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.001796Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.001803Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.001810Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.001817Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.001827Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:57.011661Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=14, ts=47088
[2m2025-06-23T02:03:57.011673Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=218, ts=47208
[2m2025-06-23T02:03:57.034311Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=167, ts=47216
[2m2025-06-23T02:03:57.034333Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=15, ts=47248
[2m2025-06-23T02:03:57.034339Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=116, ts=47232
[2m2025-06-23T02:03:57.034353Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=66, ts=47224
[2m2025-06-23T02:03:57.053269Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=68, ts=47544
[2m2025-06-23T02:03:57.053297Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=16, ts=47408
[2m2025-06-23T02:03:57.073352Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=170, ts=47696
[2m2025-06-23T02:03:57.073382Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=17, ts=47568
[2m2025-06-23T02:03:57.090519Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=18, ts=47728
[2m2025-06-23T02:03:57.090575Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=119, ts=47712
[2m2025-06-23T02:03:57.102955Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:57.103085Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.103137Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.103162Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.103182Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.103198Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.103219Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:57.110986Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=222, ts=47848
[2m2025-06-23T02:03:57.111208Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=19, ts=47888
[2m2025-06-23T02:03:57.129963Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=223, ts=48008
[2m2025-06-23T02:03:57.130616Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=121, ts=48032
[2m2025-06-23T02:03:57.130725Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=20, ts=48048
[2m2025-06-23T02:03:57.151585Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=122, ts=48192
[2m2025-06-23T02:03:57.151673Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=21, ts=48208
[2m2025-06-23T02:03:57.174586Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=226, ts=48488
[2m2025-06-23T02:03:57.174689Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=174, ts=48336
[2m2025-06-23T02:03:57.174727Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=22, ts=48368
[2m2025-06-23T02:03:57.174951Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=124, ts=48512
[2m2025-06-23T02:03:57.193857Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=23, ts=48528
[2m2025-06-23T02:03:57.193868Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=75, ts=48664
[2m2025-06-23T02:03:57.204162Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:57.204200Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.204209Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.204214Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.204219Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.204223Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.204231Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:57.214706Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=177, ts=48816
[2m2025-06-23T02:03:57.214832Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=125, ts=48672
[2m2025-06-23T02:03:57.215507Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=24, ts=48688
[2m2025-06-23T02:03:57.230792Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=126, ts=48832
[2m2025-06-23T02:03:57.230792Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=25, ts=48848
[2m2025-06-23T02:03:57.254701Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=178, ts=48976
[2m2025-06-23T02:03:57.254773Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=26, ts=49008
[2m2025-06-23T02:03:57.254754Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=128, ts=49152
[2m2025-06-23T02:03:57.254701Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=229, ts=48968
[2m2025-06-23T02:03:57.254823Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=230, ts=49128
[2m2025-06-23T02:03:57.272064Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=231, ts=49288
[2m2025-06-23T02:03:57.297267Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=232, ts=49448
[2m2025-06-23T02:03:57.306019Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:57.306046Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.306050Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.306054Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.306056Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.306059Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.306064Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:57.311792Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=233, ts=49608
[2m2025-06-23T02:03:57.330137Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=81, ts=49624
[2m2025-06-23T02:03:57.330148Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=131, ts=49632
[2m2025-06-23T02:03:57.354001Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=234, ts=49768
[2m2025-06-23T02:03:57.354090Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=235, ts=49928
[2m2025-06-23T02:03:57.354108Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=83, ts=49944
[2m2025-06-23T02:03:57.372637Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=236, ts=50088
[2m2025-06-23T02:03:57.372706Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=133, ts=49952
[2m2025-06-23T02:03:57.372714Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=185, ts=50096
[2m2025-06-23T02:03:57.394640Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=237, ts=50248
[2m2025-06-23T02:03:57.394830Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=134, ts=50112
[2m2025-06-23T02:03:57.394891Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=135, ts=50272
[2m2025-06-23T02:03:57.394859Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=186, ts=50256
[2m2025-06-23T02:03:57.407721Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:57.407755Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.407762Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.407768Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.407772Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.407777Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.407784Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:57.412592Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=238, ts=50408
[2m2025-06-23T02:03:57.412668Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=187, ts=50416
[2m2025-06-23T02:03:57.434038Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=239, ts=50568
[2m2025-06-23T02:03:57.434223Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=136, ts=50432
[2m2025-06-23T02:03:57.434358Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=188, ts=50576
[2m2025-06-23T02:03:57.434363Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=86, ts=50424
[2m2025-06-23T02:03:57.451439Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=240, ts=50728
[2m2025-06-23T02:03:57.473663Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=241, ts=50888
[2m2025-06-23T02:03:57.473750Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=189, ts=50736
[2m2025-06-23T02:03:57.473788Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=190, ts=50896
[2m2025-06-23T02:03:57.473790Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=88, ts=50744
[2m2025-06-23T02:03:57.508946Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:57.509022Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.509056Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.509075Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.509092Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.509105Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.509122Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:57.512687Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=191, ts=51056
[2m2025-06-23T02:03:57.512755Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=39, ts=51088
[2m2025-06-23T02:03:57.512692Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=242, ts=51048
[2m2025-06-23T02:03:57.512907Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=243, ts=51208
[2m2025-06-23T02:03:57.512949Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=192, ts=51216
[2m2025-06-23T02:03:57.530742Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=40, ts=51248
[2m2025-06-23T02:03:57.530754Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=91, ts=51224
[2m2025-06-23T02:03:57.553214Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=244, ts=51368
[2m2025-06-23T02:03:57.553250Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=41, ts=51408
[2m2025-06-23T02:03:57.553225Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=92, ts=51384
[2m2025-06-23T02:03:57.553260Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=245, ts=51528
[2m2025-06-23T02:03:57.571305Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=143, ts=51552
[2m2025-06-23T02:03:57.571305Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=246, ts=51688
[2m2025-06-23T02:03:57.571325Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=42, ts=51568
[2m2025-06-23T02:03:57.593940Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=195, ts=51696
[2m2025-06-23T02:03:57.593959Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=144, ts=51712
[2m2025-06-23T02:03:57.593968Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=247, ts=51848
[2m2025-06-23T02:03:57.593986Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=43, ts=51728
[2m2025-06-23T02:03:57.594042Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=196, ts=51856
[2m2025-06-23T02:03:57.593992Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=94, ts=51704
[2m2025-06-23T02:03:57.610321Z[0m [32m INFO[0m 📊 Active calls: 5
[2m2025-06-23T02:03:57.610362Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.610379Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.610395Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.610434Z[0m [32m INFO[0m    - Call 71fab620-8547-4ca0-b528-10119ad9d5fc: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.610455Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.610471Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=5, Connected=5
[2m2025-06-23T02:03:57.613974Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=248, ts=52008
[2m2025-06-23T02:03:57.614212Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=44, ts=51888
[2m2025-06-23T02:03:57.614344Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=96, ts=52024
[2m2025-06-23T02:03:57.614227Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=145, ts=51872
[2m2025-06-23T02:03:57.614363Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=197, ts=52016
[2m2025-06-23T02:03:57.633043Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb16, seq=249, ts=52168
[2m2025-06-23T02:03:57.633106Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=45, ts=52048
[2m2025-06-23T02:03:57.633150Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=198, ts=52176
[2m2025-06-23T02:03:57.649280Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=147, ts=52192
[2m2025-06-23T02:03:57.649323Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=97, ts=52184
[2m2025-06-23T02:03:57.649302Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=46, ts=52208
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: "BYE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883191_BYE\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag001\r\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-0540be0d486a45168f0f59d6fefb470d\r\nCall-ID: 1-88319@127.0.0.1\r\nCSeq: 2 BYE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nContent-Length: 0\r\n\r\n"
Input as hex: [42, 59, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 38, 38, 33, 31, 39, 31, 5f, 42, 59, 45, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 31, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 30, 35, 34, 30, 62, 65, 30, 64, 34, 38, 36, 61, 34, 35, 31, 36, 38, 66, 30, 66, 35, 39, 64, 36, 66, 65, 66, 62, 34, 37, 30, 64, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 31, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 32, 20, 42, 59, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 48, 53, 52, 48, 98, 101, 48, 100, 52, 56, 54, 97, 52, 53, 49, 54, 56, 102, 48, 102, 53, 57, 100, 54, 102, 101, 102, 98, 52, 55, 48, 100]
Successfully parsed tag: tag-0540be0d486a45168f0f59d6fefb470d
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:03:57.654085Z[0m [32m INFO[0m Created new ServerNonInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK883191_BYE:BYE:server) [3mmethod[0m[2m=[0mBYE
Transaction loop starting for Key(z9hG4bK883191_BYE:BYE:server)
Initial state: Trying
Received command: TransitionTo(Trying) for transaction Key(z9hG4bK883191_BYE:BYE:server)
Processing TransitionTo(Trying) current state: Trying
Already in requested state, no transition needed: Trying
Received command: ProcessMessage(Request(Request { method: Bye, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK883191_BYE")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag001")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [Tag("tag-0540be0d486a45168f0f59d6fefb470d")] })), CallId(CallId("1-88319@127.0.0.1")), CSeq(CSeq { seq: 2, method: Bye }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), ContentLength(ContentLength(0))], body: b"" })) for transaction Key(z9hG4bK883191_BYE:BYE:server)
[2m2025-06-23T02:03:57.654195Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:57.654362Z[0m [32m INFO[0m BYE processed for dialog 0be11ba4-f399-4580-adc6-2a0c378583d2
Received command: TransitionTo(Completed) for transaction Key(z9hG4bK883191_BYE:BYE:server)
Processing TransitionTo(Completed) current state: Trying
Valid state transition: Trying -> Completed
State successfully changed to: Completed
Sent StateChanged event result: Success
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallTerminated { dialog_id: DialogId(0be11ba4-f399-4580-adc6-2a0c378583d2), reason: "BYE received" }
[2m2025-06-23T02:03:57.654491Z[0m [32m INFO[0m handle_call_terminated called for dialog 0be11ba4-f399-4580-adc6-2a0c378583d2: BYE received
[2m2025-06-23T02:03:57.654500Z[0m [32m INFO[0m Call terminated for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970: 0be11ba4-f399-4580-adc6-2a0c378583d2 - BYE received
🎯 COORDINATOR: Handling event: SessionTerminated { session_id: SessionId("sess_b5bc6d59-93ee-403f-9a28-86cae272d970"), reason: "BYE received" }
🎯 COORDINATOR: Matched SessionTerminated event for sess_b5bc6d59-93ee-403f-9a28-86cae272d970 - BYE received
🔴 COORDINATOR: handle_session_terminated called for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 with reason: BYE received
[2m2025-06-23T02:03:57.654536Z[0m [32m INFO[0m Session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 terminated: BYE received
[2m2025-06-23T02:03:57.654549Z[0m [33m WARN[0m No media session found for SIP session: sess_b5bc6d59-93ee-403f-9a28-86cae272d970
🔔 COORDINATOR: Handler exists, checking for session sess_b5bc6d59-93ee-403f-9a28-86cae272d970
✅ COORDINATOR: Found session sess_b5bc6d59-93ee-403f-9a28-86cae272d970, calling handler.on_call_ended
[2m2025-06-23T02:03:57.654611Z[0m [32m INFO[0m Notifying handler about session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 termination
[2m2025-06-23T02:03:57.654625Z[0m [32m INFO[0m 🔚 Call 71fab620-8547-4ca0-b528-10119ad9d5fc state changed: "None" -> Terminated
[2m2025-06-23T02:03:57.654638Z[0m [32m INFO[0m 💬 Reason: BYE received
🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_b5bc6d59-93ee-403f-9a28-86cae272d970"), old_state: Active, new_state: Terminated }
[2m2025-06-23T02:03:57.654665Z[0m [32m INFO[0m Session sess_b5bc6d59-93ee-403f-9a28-86cae272d970 state changed: Active -> Terminated
[2m2025-06-23T02:03:57.654677Z[0m [33m WARN[0m No media session found for SIP session: sess_b5bc6d59-93ee-403f-9a28-86cae272d970
[2m2025-06-23T02:03:57.671932Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=148, ts=52352
[2m2025-06-23T02:03:57.672116Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=98, ts=52344
[2m2025-06-23T02:03:57.689714Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=149, ts=52512
[2m2025-06-23T02:03:57.711847Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:57.711878Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.711890Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.711898Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.711906Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.711919Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:57.711928Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:57.713312Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=150, ts=52672
[2m2025-06-23T02:03:57.731655Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=151, ts=52832
[2m2025-06-23T02:03:57.753132Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=51, ts=53008
[2m2025-06-23T02:03:57.753141Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=203, ts=52976
[2m2025-06-23T02:03:57.753169Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=152, ts=52992
[2m2025-06-23T02:03:57.753170Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=102, ts=52984
[2m2025-06-23T02:03:57.773457Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=205, ts=53296
[2m2025-06-23T02:03:57.773471Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=52, ts=53168
[2m2025-06-23T02:03:57.773504Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=103, ts=53144
[2m2025-06-23T02:03:57.773551Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=153, ts=53152
[2m2025-06-23T02:03:57.792492Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=206, ts=53456
[2m2025-06-23T02:03:57.812714Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=207, ts=53616
[2m2025-06-23T02:03:57.812721Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=54, ts=53488
[2m2025-06-23T02:03:57.812942Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:57.812975Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.812992Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.813001Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.813010Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.813018Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:57.813026Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:57.813050Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:57.813068Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:57.813077Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:57.813086Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:57.813093Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:57.813100Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:57.813118Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:57.813130Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:57.813138Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:57.813144Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:57.813150Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:57.813157Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:57.813169Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:57.813178Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:57.813185Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:57.813193Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:57.813210Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:57.813218Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:57.813237Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:57.813249Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:57.813257Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:57.813267Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:57.813274Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:57.813292Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:57.813305Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:57.833770Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=156, ts=53632
[2m2025-06-23T02:03:57.853179Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=157, ts=53792
[2m2025-06-23T02:03:57.872726Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=210, ts=54096
[2m2025-06-23T02:03:57.873188Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=108, ts=53944
[2m2025-06-23T02:03:57.889877Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=58, ts=54128
[2m2025-06-23T02:03:57.889891Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=159, ts=54112
[2m2025-06-23T02:03:57.889908Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=109, ts=54104
[2m2025-06-23T02:03:57.912592Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=211, ts=54256
[2m2025-06-23T02:03:57.912589Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=59, ts=54288
[2m2025-06-23T02:03:57.912638Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=110, ts=54264
[2m2025-06-23T02:03:57.912640Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=160, ts=54272
[2m2025-06-23T02:03:57.915076Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:57.915139Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.915148Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.915153Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.915158Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:57.915164Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:57.915169Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:57.915202Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:57.915210Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:57.915215Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:57.915220Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:57.915224Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:57.915228Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:57.915269Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:57.915283Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:57.915288Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:57.915293Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:57.915298Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:57.915303Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:57.915320Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:57.915325Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:57.915330Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:57.915334Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:57.915338Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:57.915342Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:57.915356Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:57.915360Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:57.915364Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:57.915368Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:57.915371Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:57.915382Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:57.915387Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:57.930234Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=111, ts=54424
[2m2025-06-23T02:03:57.954266Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=214, ts=54736
[2m2025-06-23T02:03:57.954272Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=162, ts=54592
[2m2025-06-23T02:03:57.954274Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=112, ts=54584
[2m2025-06-23T02:03:57.972261Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=163, ts=54752
[2m2025-06-23T02:03:57.990275Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=63, ts=54928
[2m2025-06-23T02:03:57.990365Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=114, ts=54904
[2m2025-06-23T02:03:58.014128Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=64, ts=55088
[2m2025-06-23T02:03:58.014804Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=115, ts=55064
[2m2025-06-23T02:03:58.014924Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=216, ts=55056
[2m2025-06-23T02:03:58.014839Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=165, ts=55072
[2m2025-06-23T02:03:58.015062Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=116, ts=55224
[2m2025-06-23T02:03:58.016310Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.016377Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.016403Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.016422Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.016439Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.016456Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.016469Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.016505Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.016534Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.016550Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.016565Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.016579Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.016594Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:58.016618Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:58.016643Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:58.016661Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.016679Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:58.016696Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.016713Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.016759Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.016792Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.016812Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.016831Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.016847Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.016863Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.016891Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.016919Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.016939Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.016959Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.016975Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.016993Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:58.017013Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:58.030728Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=65, ts=55248
[2m2025-06-23T02:03:58.031261Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=166, ts=55232
[2m2025-06-23T02:03:58.053987Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=218, ts=55376
[2m2025-06-23T02:03:58.054195Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=66, ts=55408
[2m2025-06-23T02:03:58.054295Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=167, ts=55392
[2m2025-06-23T02:03:58.054249Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=117, ts=55384
[2m2025-06-23T02:03:58.071409Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=168, ts=55552
[2m2025-06-23T02:03:58.091082Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=169, ts=55712
[2m2025-06-23T02:03:58.091120Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=119, ts=55704
[2m2025-06-23T02:03:58.113067Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=120, ts=55864
[2m2025-06-23T02:03:58.113090Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=221, ts=55856
[2m2025-06-23T02:03:58.118842Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.118858Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.118865Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.118871Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.118876Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.118882Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.118887Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.118910Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.118916Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.118919Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.118924Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.118928Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.118933Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:58.118943Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:58.118947Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:58.118951Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.118954Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:58.118958Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.118962Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.118973Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.118977Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.118981Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.118984Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.118988Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.118991Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.118999Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.119003Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.119006Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.119010Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.119013Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.119021Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:58.119025Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:58.134159Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=223, ts=56176
[2m2025-06-23T02:03:58.134205Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=121, ts=56024
[2m2025-06-23T02:03:58.134218Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=171, ts=56032
[2m2025-06-23T02:03:58.134167Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=70, ts=56048
[2m2025-06-23T02:03:58.134222Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=122, ts=56184
[2m2025-06-23T02:03:58.150868Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=71, ts=56208
[2m2025-06-23T02:03:58.172764Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=72, ts=56368
[2m2025-06-23T02:03:58.173203Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=123, ts=56344
[2m2025-06-23T02:03:58.193713Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=226, ts=56656
[2m2025-06-23T02:03:58.193957Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=125, ts=56664
[2m2025-06-23T02:03:58.193795Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=174, ts=56512
[2m2025-06-23T02:03:58.213118Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=74, ts=56688
[2m2025-06-23T02:03:58.213134Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=175, ts=56672
[2m2025-06-23T02:03:58.220394Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.220476Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.220517Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.220540Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.220558Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.220577Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.220596Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.220637Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.220679Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.220704Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.220726Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.220746Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.220763Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:58.220790Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:58.220819Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:58.220838Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.220856Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:58.220874Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.220892Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.220920Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.220949Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.220970Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.220985Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.220998Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.221010Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.221044Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.221082Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.221105Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.221126Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.221144Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.221168Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:58.221192Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:58.231889Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=75, ts=56848
[2m2025-06-23T02:03:58.252829Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=76, ts=57008
[2m2025-06-23T02:03:58.252866Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=228, ts=56976
[2m2025-06-23T02:03:58.252883Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=177, ts=56992
[2m2025-06-23T02:03:58.252876Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=127, ts=56984
[2m2025-06-23T02:03:58.274290Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=178, ts=57152
[2m2025-06-23T02:03:58.274340Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=128, ts=57144
[2m2025-06-23T02:03:58.314430Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=180, ts=57472
[2m2025-06-23T02:03:58.314485Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=130, ts=57464
[2m2025-06-23T02:03:58.322854Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.322909Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.322917Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.322923Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.322928Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.322933Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.322938Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.322967Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.322972Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.322977Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.322983Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.322987Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.322991Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:58.323003Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:58.323007Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:58.323011Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.323015Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:58.323018Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.323022Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.323033Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.323037Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.323041Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.323044Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.323048Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.323052Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.323062Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.323066Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.323070Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.323074Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.323078Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.323087Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:58.323091Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:58.331243Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=181, ts=57632
[2m2025-06-23T02:03:58.353963Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=132, ts=57784
[2m2025-06-23T02:03:58.354016Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=182, ts=57792
[2m2025-06-23T02:03:58.354191Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=133, ts=57944
[2m2025-06-23T02:03:58.372491Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=82, ts=57968
[2m2025-06-23T02:03:58.373030Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=183, ts=57952
[2m2025-06-23T02:03:58.394146Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=184, ts=58112
[2m2025-06-23T02:03:58.394297Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=134, ts=58104
[2m2025-06-23T02:03:58.394146Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=236, ts=58256
[2m2025-06-23T02:03:58.409795Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=185, ts=58272
[2m2025-06-23T02:03:58.424685Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.424719Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.424727Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.424742Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.424747Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.424752Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.424755Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.424777Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.424783Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.424787Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.424791Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.424794Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.424801Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:58.424813Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:58.424820Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:58.424827Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.424835Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:58.424842Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.424849Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.424861Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.424868Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.424875Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.424882Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.424889Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.424897Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.424907Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.424914Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.424921Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.424928Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.424935Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.424946Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:58.424953Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:58.431762Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=237, ts=58416
[2m2025-06-23T02:03:58.431788Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=136, ts=58424
[2m2025-06-23T02:03:58.431766Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=85, ts=58448
[2m2025-06-23T02:03:58.431798Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=186, ts=58432
[2m2025-06-23T02:03:58.450226Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=187, ts=58592
[2m2025-06-23T02:03:58.472062Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=87, ts=58768
[2m2025-06-23T02:03:58.472084Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=138, ts=58744
[2m2025-06-23T02:03:58.472089Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=239, ts=58736
[2m2025-06-23T02:03:58.490341Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=139, ts=58904
[2m2025-06-23T02:03:58.514778Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=89, ts=59088
[2m2025-06-23T02:03:58.514781Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=241, ts=59056
[2m2025-06-23T02:03:58.526940Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.527027Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.527068Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.527096Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.527120Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.527146Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.527170Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.527216Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.527256Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.527282Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.527307Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.527331Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.527352Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:58.527384Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:58.527417Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:58.527439Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.527459Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:58.527478Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.527496Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.527554Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.527595Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.527619Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.527639Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.527682Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.527703Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.527735Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.527766Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.527789Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.527811Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.527850Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.527877Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:58.527896Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:58.532129Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=90, ts=59248
[2m2025-06-23T02:03:58.553983Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=142, ts=59384
[2m2025-06-23T02:03:58.554003Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=192, ts=59392
[2m2025-06-23T02:03:58.554056Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=244, ts=59536
[2m2025-06-23T02:03:58.573480Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=193, ts=59552
[2m2025-06-23T02:03:58.573593Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=245, ts=59696
[2m2025-06-23T02:03:58.573706Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=144, ts=59704
[2m2025-06-23T02:03:58.573632Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=92, ts=59568
[2m2025-06-23T02:03:58.592244Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=194, ts=59712
[2m2025-06-23T02:03:58.609545Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=246, ts=59856
[2m2025-06-23T02:03:58.609564Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=145, ts=59864
[2m2025-06-23T02:03:58.609567Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=195, ts=59872
[2m2025-06-23T02:03:58.629291Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.629354Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.629363Z[0m [32m INFO[0m    - Call e0594cc0-7b60-4e03-8af5-605e27acdfdb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.629369Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.629374Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.629380Z[0m [32m INFO[0m 📊 Active calls: 4
[2m2025-06-23T02:03:58.629385Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.629413Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.629419Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.629423Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.629428Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.629432Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.629435Z[0m [32m INFO[0m 🎵 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb is connected
[2m2025-06-23T02:03:58.629450Z[0m [32m INFO[0m    📡 Local RTP: Some(22642)
[2m2025-06-23T02:03:58.629454Z[0m [32m INFO[0m    📡 Remote RTP: Some(22642)
[2m2025-06-23T02:03:58.629457Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.629461Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 22642 from port 22642
[2m2025-06-23T02:03:58.629464Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.629468Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.629481Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.629485Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.629488Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.629491Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.629495Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.629498Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.629510Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.629514Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.629517Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.629520Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.629525Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.629532Z[0m [32m INFO[0m 🧹 Cleaning up 1 terminated calls
[2m2025-06-23T02:03:58.629539Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=3, Connected=4
[2m2025-06-23T02:03:58.630694Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=95, ts=60048
[2m2025-06-23T02:03:58.630694Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=247, ts=60016
[2m2025-06-23T02:03:58.630728Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=146, ts=60024
[2m2025-06-23T02:03:58.652708Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb18, seq=249, ts=60336
[2m2025-06-23T02:03:58.652721Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=197, ts=60192
[2m2025-06-23T02:03:58.652721Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=147, ts=60184
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: "BYE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883192_BYE\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag002\r\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-c221646ef7dd4140968c5b168d296623\r\nCall-ID: 2-88319@127.0.0.1\r\nCSeq: 2 BYE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nContent-Length: 0\r\n\r\n"
Input as hex: [42, 59, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 38, 38, 33, 31, 39, 32, 5f, 42, 59, 45, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 32, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 63, 32, 32, 31, 36, 34, 36, 65, 66, 37, 64, 64, 34, 31, 34, 30, 39, 36, 38, 63, 35, 62, 31, 36, 38, 64, 32, 39, 36, 36, 32, 33, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 32, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 32, 20, 42, 59, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 99, 50, 50, 49, 54, 52, 54, 101, 102, 55, 100, 100, 52, 49, 52, 48, 57, 54, 56, 99, 53, 98, 49, 54, 56, 100, 50, 57, 54, 54, 50, 51]
Successfully parsed tag: tag-c221646ef7dd4140968c5b168d296623
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:03:58.670466Z[0m [32m INFO[0m Created new ServerNonInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK883192_BYE:BYE:server) [3mmethod[0m[2m=[0mBYE
[2m2025-06-23T02:03:58.670536Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
Transaction loop starting for Key(z9hG4bK883192_BYE:BYE:server)
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallTerminated { dialog_id: DialogId(5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8), reason: "BYE received" }
[2m2025-06-23T02:03:58.670635Z[0m [32m INFO[0m BYE processed for dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8
Initial state: Trying
Received command: TransitionTo(Trying) for transaction Key(z9hG4bK883192_BYE:BYE:server)
Processing TransitionTo(Trying) current state: Trying
Already in requested state, no transition needed: Trying
Received command: ProcessMessage(Request(Request { method: Bye, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK883192_BYE")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag002")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [Tag("tag-c221646ef7dd4140968c5b168d296623")] })), CallId(CallId("2-88319@127.0.0.1")), CSeq(CSeq { seq: 2, method: Bye }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), ContentLength(ContentLength(0))], body: b"" })) for transaction Key(z9hG4bK883192_BYE:BYE:server)
Received command: TransitionTo(Completed) for transaction Key(z9hG4bK883192_BYE:BYE:server)
Processing TransitionTo(Completed) current state: Trying
Valid state transition: Trying -> Completed
State successfully changed to: Completed
[2m2025-06-23T02:03:58.670711Z[0m [32m INFO[0m handle_call_terminated called for dialog 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8: BYE received
[2m2025-06-23T02:03:58.670898Z[0m [32m INFO[0m Call terminated for session sess_6ed030fb-7528-4180-8dbd-227e54db965d: 5a5373dd-02e2-4f1d-9fcf-4772c99ac0d8 - BYE received
Sent StateChanged event result: Success
🎯 COORDINATOR: Handling event: SessionTerminated { session_id: SessionId("sess_6ed030fb-7528-4180-8dbd-227e54db965d"), reason: "BYE received" }
🎯 COORDINATOR: Matched SessionTerminated event for sess_6ed030fb-7528-4180-8dbd-227e54db965d - BYE received
🔴 COORDINATOR: handle_session_terminated called for session sess_6ed030fb-7528-4180-8dbd-227e54db965d with reason: BYE received
[2m2025-06-23T02:03:58.670944Z[0m [32m INFO[0m Session sess_6ed030fb-7528-4180-8dbd-227e54db965d terminated: BYE received
[2m2025-06-23T02:03:58.670953Z[0m [33m WARN[0m No media session found for SIP session: sess_6ed030fb-7528-4180-8dbd-227e54db965d
🔔 COORDINATOR: Handler exists, checking for session sess_6ed030fb-7528-4180-8dbd-227e54db965d
✅ COORDINATOR: Found session sess_6ed030fb-7528-4180-8dbd-227e54db965d, calling handler.on_call_ended
[2m2025-06-23T02:03:58.670971Z[0m [32m INFO[0m Notifying handler about session sess_6ed030fb-7528-4180-8dbd-227e54db965d termination
[2m2025-06-23T02:03:58.670981Z[0m [32m INFO[0m 🔚 Call e0594cc0-7b60-4e03-8af5-605e27acdfdb state changed: "None" -> Terminated
[2m2025-06-23T02:03:58.670985Z[0m [32m INFO[0m 💬 Reason: BYE received
🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_6ed030fb-7528-4180-8dbd-227e54db965d"), old_state: Active, new_state: Terminated }
[2m2025-06-23T02:03:58.671002Z[0m [32m INFO[0m Session sess_6ed030fb-7528-4180-8dbd-227e54db965d state changed: Active -> Terminated
[2m2025-06-23T02:03:58.671007Z[0m [33m WARN[0m No media session found for SIP session: sess_6ed030fb-7528-4180-8dbd-227e54db965d
[2m2025-06-23T02:03:58.672340Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=198, ts=60352
[2m2025-06-23T02:03:58.672345Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=148, ts=60344
[2m2025-06-23T02:03:58.691773Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=149, ts=60504
[2m2025-06-23T02:03:58.691784Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=98, ts=60528
[2m2025-06-23T02:03:58.691800Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=199, ts=60512
[2m2025-06-23T02:03:58.713996Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=99, ts=60688
[2m2025-06-23T02:03:58.731087Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:58.731604Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.731745Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.731813Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.731875Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:58.731916Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:58.749487Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=152, ts=60984
[2m2025-06-23T02:03:58.771405Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=102, ts=61168
[2m2025-06-23T02:03:58.790574Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=154, ts=61304
[2m2025-06-23T02:03:58.813898Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=104, ts=61488
[2m2025-06-23T02:03:58.813929Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=156, ts=61624
[2m2025-06-23T02:03:58.833382Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:58.833403Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.833410Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.833414Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.833419Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:58.833423Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.833444Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.833449Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.833453Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.833457Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.833461Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.833465Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.833473Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.833476Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.833480Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.833483Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.833487Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.833490Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.833497Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.833501Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.833504Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.833507Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.833510Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.833518Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:58.833521Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:58.854037Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=106, ts=61808
[2m2025-06-23T02:03:58.854070Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=207, ts=61792
[2m2025-06-23T02:03:58.854077Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=158, ts=61944
[2m2025-06-23T02:03:58.890059Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=108, ts=62128
[2m2025-06-23T02:03:58.890080Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=209, ts=62112
[2m2025-06-23T02:03:58.913360Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=160, ts=62264
[2m2025-06-23T02:03:58.913529Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=210, ts=62272
[2m2025-06-23T02:03:58.933681Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=161, ts=62424
[2m2025-06-23T02:03:58.933708Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=211, ts=62432
[2m2025-06-23T02:03:58.934878Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:58.934891Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.934898Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.934903Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:58.934908Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:58.934912Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:58.934933Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:58.934938Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:58.934943Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.934948Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:58.934952Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.934956Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:58.934966Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:58.934970Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:58.934974Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.934978Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:58.934981Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.934985Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:58.934998Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:58.935001Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:58.935005Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:58.935008Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:58.935012Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:58.935020Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:58.935024Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:58.953785Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=163, ts=62744
[2m2025-06-23T02:03:58.953816Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=212, ts=62592
[2m2025-06-23T02:03:58.973939Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=213, ts=62752
[2m2025-06-23T02:03:58.973947Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=164, ts=62904
[2m2025-06-23T02:03:58.991127Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=113, ts=62928
[2m2025-06-23T02:03:59.011626Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=114, ts=63088
[2m2025-06-23T02:03:59.011817Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=215, ts=63072
[2m2025-06-23T02:03:59.011851Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=165, ts=63064
[2m2025-06-23T02:03:59.034066Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=216, ts=63232
[2m2025-06-23T02:03:59.036731Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.036808Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.036838Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.036862Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.036882Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.036898Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:59.036958Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:59.036999Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:59.037018Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.037035Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:59.037053Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.037069Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:59.037091Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:59.037116Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:59.037130Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.037144Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:59.037158Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.037170Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:59.037193Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:59.037218Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:59.037230Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.037244Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:59.037259Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.037282Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:59.037301Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:59.073960Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=168, ts=63544
[2m2025-06-23T02:03:59.074075Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=169, ts=63704
[2m2025-06-23T02:03:59.090733Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=118, ts=63728
[2m2025-06-23T02:03:59.090737Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=219, ts=63712
[2m2025-06-23T02:03:59.114189Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=220, ts=63872
[2m2025-06-23T02:03:59.114192Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=170, ts=63864
[2m2025-06-23T02:03:59.132590Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=221, ts=64032
[2m2025-06-23T02:03:59.132604Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=120, ts=64048
[2m2025-06-23T02:03:59.138276Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.138301Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.138308Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.138313Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.138318Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.138323Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:59.138347Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:59.138366Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:59.138374Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.138381Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:59.138388Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.138393Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:59.138405Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:59.138412Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:59.138418Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.138423Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:59.138429Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.138436Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:59.138451Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:59.138458Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:59.138463Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.138468Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:59.138474Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.138488Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:59.138495Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:59.152183Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=172, ts=64184
[2m2025-06-23T02:03:59.152210Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=222, ts=64192
[2m2025-06-23T02:03:59.152190Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=121, ts=64208
[2m2025-06-23T02:03:59.169302Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=122, ts=64368
[2m2025-06-23T02:03:59.169318Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=173, ts=64344
[2m2025-06-23T02:03:59.169319Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=223, ts=64352
[2m2025-06-23T02:03:59.190628Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=174, ts=64504
[2m2025-06-23T02:03:59.190639Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=123, ts=64528
[2m2025-06-23T02:03:59.190657Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=224, ts=64512
[2m2025-06-23T02:03:59.214066Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=175, ts=64664
[2m2025-06-23T02:03:59.214066Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=225, ts=64672
[2m2025-06-23T02:03:59.231364Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=226, ts=64832
[2m2025-06-23T02:03:59.239421Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.239433Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.239443Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.239447Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.239452Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.239456Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:59.239473Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:59.239478Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:59.239481Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.239486Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:59.239489Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.239493Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:59.239501Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:59.239505Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:59.239509Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.239512Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:59.239516Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.239519Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:59.239528Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:59.239532Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:59.239535Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.239539Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:59.239542Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.239551Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:59.239554Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:59.251469Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=126, ts=65008
[2m2025-06-23T02:03:59.251487Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=227, ts=64992
[2m2025-06-23T02:03:59.274208Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=179, ts=65304
[2m2025-06-23T02:03:59.274217Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=228, ts=65152
[2m2025-06-23T02:03:59.292665Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=229, ts=65312
[2m2025-06-23T02:03:59.292682Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=128, ts=65328
[2m2025-06-23T02:03:59.311104Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=180, ts=65464
[2m2025-06-23T02:03:59.311112Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=129, ts=65488
[2m2025-06-23T02:03:59.311131Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=230, ts=65472
[2m2025-06-23T02:03:59.331495Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=231, ts=65632
[2m2025-06-23T02:03:59.331498Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=181, ts=65624
[2m2025-06-23T02:03:59.340766Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.340790Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.340796Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.340800Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.340804Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.340808Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:59.340825Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:59.340833Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:59.340836Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.340840Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:59.340844Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.340848Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:59.340859Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:59.340863Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:59.340866Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.340869Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:59.340872Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.340875Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:59.340886Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:59.340890Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:59.340893Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.340896Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:59.340898Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.340908Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:59.340913Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:59.352331Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=232, ts=65792
[2m2025-06-23T02:03:59.369648Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=233, ts=65952
[2m2025-06-23T02:03:59.369658Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=183, ts=65944
[2m2025-06-23T02:03:59.394789Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=133, ts=66128
[2m2025-06-23T02:03:59.394796Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=234, ts=66112
[2m2025-06-23T02:03:59.394814Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=184, ts=66104
[2m2025-06-23T02:03:59.410810Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=134, ts=66288
[2m2025-06-23T02:03:59.430586Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=186, ts=66424
[2m2025-06-23T02:03:59.430596Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=135, ts=66448
[2m2025-06-23T02:03:59.430612Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=236, ts=66432
[2m2025-06-23T02:03:59.442255Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.442304Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.442311Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.442316Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.442321Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.442326Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:59.442343Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:59.442348Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:59.442352Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.442357Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:59.442361Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.442365Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:59.442378Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:59.442382Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:59.442385Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.442389Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:59.442392Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.442396Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:59.442404Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:59.442408Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:59.442411Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.442415Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:59.442418Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.442426Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:59.442430Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:59.454570Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=187, ts=66584
[2m2025-06-23T02:03:59.454570Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=237, ts=66592
[2m2025-06-23T02:03:59.492670Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=239, ts=66912
[2m2025-06-23T02:03:59.492674Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=189, ts=66904
[2m2025-06-23T02:03:59.509942Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=240, ts=67072
[2m2025-06-23T02:03:59.509964Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=139, ts=67088
[2m2025-06-23T02:03:59.530985Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=191, ts=67224
[2m2025-06-23T02:03:59.530985Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=241, ts=67232
[2m2025-06-23T02:03:59.543672Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.543686Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.543693Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.543698Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.543703Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.543708Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:59.543731Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:59.543736Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:59.543740Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.543746Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:59.543750Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.543755Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:59.543765Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:59.543769Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:59.543772Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.543776Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:59.543779Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.543783Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:59.543796Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:59.543800Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:59.543803Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.543807Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:59.543810Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.543831Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:59.543835Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:59.550579Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=141, ts=67408
[2m2025-06-23T02:03:59.550601Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=242, ts=67392
[2m2025-06-23T02:03:59.550608Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=192, ts=67384
[2m2025-06-23T02:03:59.571931Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=193, ts=67544
[2m2025-06-23T02:03:59.571946Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=243, ts=67552
[2m2025-06-23T02:03:59.593361Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=244, ts=67712
[2m2025-06-23T02:03:59.593428Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=194, ts=67704
[2m2025-06-23T02:03:59.610786Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=144, ts=67888
[2m2025-06-23T02:03:59.632385Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=246, ts=68032
[2m2025-06-23T02:03:59.644975Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.645000Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.645008Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.645013Z[0m [32m INFO[0m    - Call 4d852739-5111-4b42-82e7-b52c5df3cbcb: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.645017Z[0m [32m INFO[0m 📊 Active calls: 3
[2m2025-06-23T02:03:59.645021Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:59.645042Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:59.645051Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:59.645058Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.645066Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:59.645073Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.645081Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:59.645093Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:59.645101Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:59.645108Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.645115Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:59.645122Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.645129Z[0m [32m INFO[0m 🎵 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb is connected
[2m2025-06-23T02:03:59.645137Z[0m [32m INFO[0m    📡 Local RTP: Some(23644)
[2m2025-06-23T02:03:59.645140Z[0m [32m INFO[0m    📡 Remote RTP: Some(23644)
[2m2025-06-23T02:03:59.645143Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.645146Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 23644 from port 23644
[2m2025-06-23T02:03:59.645149Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.645158Z[0m [32m INFO[0m 🧹 Cleaning up 2 terminated calls
[2m2025-06-23T02:03:59.645161Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=1, Connected=3
[2m2025-06-23T02:03:59.651196Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=146, ts=68208
[2m2025-06-23T02:03:59.651226Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=247, ts=68192
[2m2025-06-23T02:03:59.673773Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1a, seq=248, ts=68352
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: "BYE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883193_BYE\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag003\r\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-a3e0327a4cf64931b9b03d67155bc634\r\nCall-ID: 3-88319@127.0.0.1\r\nCSeq: 2 BYE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nContent-Length: 0\r\n\r\n"
Input as hex: [42, 59, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 38, 38, 33, 31, 39, 33, 5f, 42, 59, 45, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 33, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 61, 33, 65, 30, 33, 32, 37, 61, 34, 63, 66, 36, 34, 39, 33, 31, 62, 39, 62, 30, 33, 64, 36, 37, 31, 35, 35, 62, 63, 36, 33, 34, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 33, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 32, 20, 42, 59, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 97, 51, 101, 48, 51, 50, 55, 97, 52, 99, 102, 54, 52, 57, 51, 49, 98, 57, 98, 48, 51, 100, 54, 55, 49, 53, 53, 98, 99, 54, 51, 52]
Successfully parsed tag: tag-a3e0327a4cf64931b9b03d67155bc634
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:03:59.682245Z[0m [32m INFO[0m Created new ServerNonInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK883193_BYE:BYE:server) [3mmethod[0m[2m=[0mBYE
Transaction loop starting for Key(z9hG4bK883193_BYE:BYE:server)
Initial state: Trying
Received command: TransitionTo(Trying) for transaction Key(z9hG4bK883193_BYE:BYE:server)
Processing TransitionTo(Trying) current state: Trying
Already in requested state, no transition needed: Trying
Received command: ProcessMessage(Request(Request { method: Bye, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK883193_BYE")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag003")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [Tag("tag-a3e0327a4cf64931b9b03d67155bc634")] })), CallId(CallId("3-88319@127.0.0.1")), CSeq(CSeq { seq: 2, method: Bye }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), ContentLength(ContentLength(0))], body: b"" })) for transaction Key(z9hG4bK883193_BYE:BYE:server)
[2m2025-06-23T02:03:59.682314Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:03:59.682436Z[0m [32m INFO[0m BYE processed for dialog 0c65bf38-1612-43d6-8cbd-b70baf419426
Received command: TransitionTo(Completed) for transaction Key(z9hG4bK883193_BYE:BYE:server)
Processing TransitionTo(Completed) current state: Trying
Valid state transition: Trying -> Completed
State successfully changed to: Completed
Sent StateChanged event result: Success
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallTerminated { dialog_id: DialogId(0c65bf38-1612-43d6-8cbd-b70baf419426), reason: "BYE received" }
[2m2025-06-23T02:03:59.682509Z[0m [32m INFO[0m handle_call_terminated called for dialog 0c65bf38-1612-43d6-8cbd-b70baf419426: BYE received
[2m2025-06-23T02:03:59.682518Z[0m [32m INFO[0m Call terminated for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed: 0c65bf38-1612-43d6-8cbd-b70baf419426 - BYE received
🎯 COORDINATOR: Handling event: SessionTerminated { session_id: SessionId("sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed"), reason: "BYE received" }
🎯 COORDINATOR: Matched SessionTerminated event for sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed - BYE received
🔴 COORDINATOR: handle_session_terminated called for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed with reason: BYE received
[2m2025-06-23T02:03:59.682544Z[0m [32m INFO[0m Session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed terminated: BYE received
[2m2025-06-23T02:03:59.682549Z[0m [33m WARN[0m No media session found for SIP session: sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed
🔔 COORDINATOR: Handler exists, checking for session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed
✅ COORDINATOR: Found session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed, calling handler.on_call_ended
[2m2025-06-23T02:03:59.682563Z[0m [32m INFO[0m Notifying handler about session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed termination
[2m2025-06-23T02:03:59.682571Z[0m [32m INFO[0m 🔚 Call 4d852739-5111-4b42-82e7-b52c5df3cbcb state changed: "None" -> Terminated
[2m2025-06-23T02:03:59.682575Z[0m [32m INFO[0m 💬 Reason: BYE received
🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed"), old_state: Active, new_state: Terminated }
[2m2025-06-23T02:03:59.682587Z[0m [32m INFO[0m Session sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed state changed: Active -> Terminated
[2m2025-06-23T02:03:59.682591Z[0m [33m WARN[0m No media session found for SIP session: sess_a1578590-f36e-41e5-8dce-dc9a1b0288ed
[2m2025-06-23T02:03:59.693884Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=200, ts=68664
[2m2025-06-23T02:03:59.734117Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=150, ts=68848
[2m2025-06-23T02:03:59.745894Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:59.746375Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.746408Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.746418Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:59.746428Z[0m [32m INFO[0m 🎵 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f is connected
[2m2025-06-23T02:03:59.746465Z[0m [32m INFO[0m    📡 Local RTP: Some(25573)
[2m2025-06-23T02:03:59.746474Z[0m [32m INFO[0m    📡 Remote RTP: Some(25573)
[2m2025-06-23T02:03:59.746482Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.746488Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 25573 from port 25573
[2m2025-06-23T02:03:59.746496Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.746503Z[0m [32m INFO[0m 🎵 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 is connected
[2m2025-06-23T02:03:59.746524Z[0m [32m INFO[0m    📡 Local RTP: Some(27666)
[2m2025-06-23T02:03:59.746533Z[0m [32m INFO[0m    📡 Remote RTP: Some(27666)
[2m2025-06-23T02:03:59.746541Z[0m [32m INFO[0m    🎵 Codec: Some("PCMU")
[2m2025-06-23T02:03:59.746550Z[0m [32m INFO[0m    ✅ Ready to receive RTP packets on port 27666 from port 27666
[2m2025-06-23T02:03:59.746560Z[0m [32m INFO[0m    📨 The media session will automatically process incoming RTP packets
[2m2025-06-23T02:03:59.746585Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:03:59.746594Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:03:59.773519Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=203, ts=69144
[2m2025-06-23T02:03:59.813042Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=154, ts=69488
[2m2025-06-23T02:03:59.813053Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=205, ts=69464
[2m2025-06-23T02:03:59.830398Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=206, ts=69624
[2m2025-06-23T02:03:59.830416Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=155, ts=69648
[2m2025-06-23T02:03:59.847860Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:59.847916Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.847928Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.847942Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:03:59.847952Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:03:59.854321Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=208, ts=69944
[2m2025-06-23T02:03:59.893546Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=209, ts=70104
[2m2025-06-23T02:03:59.911447Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=159, ts=70288
[2m2025-06-23T02:03:59.930896Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=211, ts=70424
[2m2025-06-23T02:03:59.930913Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=160, ts=70448
[2m2025-06-23T02:03:59.949996Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:03:59.950051Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.950060Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:03:59.950072Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:03:59.950077Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:03:59.950837Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=212, ts=70584
[2m2025-06-23T02:03:59.950838Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=161, ts=70608
[2m2025-06-23T02:03:59.974745Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=213, ts=70744
[2m2025-06-23T02:03:59.974750Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=162, ts=70768
[2m2025-06-23T02:03:59.993553Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=215, ts=71064
[2m2025-06-23T02:03:59.993561Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=163, ts=70928
[2m2025-06-23T02:04:00.013164Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=164, ts=71088
[2m2025-06-23T02:04:00.051923Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:04:00.051958Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.051966Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.051980Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:04:00.051995Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:04:00.052018Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=166, ts=71408
[2m2025-06-23T02:04:00.074643Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=167, ts=71568
[2m2025-06-23T02:04:00.074659Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=219, ts=71704
[2m2025-06-23T02:04:00.113056Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=169, ts=71888
[2m2025-06-23T02:04:00.133323Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=222, ts=72184
[2m2025-06-23T02:04:00.133323Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=170, ts=72048
[2m2025-06-23T02:04:00.152868Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:04:00.152921Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.152932Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.152949Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:04:00.152957Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:04:00.170293Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=223, ts=72344
[2m2025-06-23T02:04:00.170308Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=172, ts=72368
[2m2025-06-23T02:04:00.192210Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=224, ts=72504
[2m2025-06-23T02:04:00.192222Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=173, ts=72528
[2m2025-06-23T02:04:00.213545Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=225, ts=72664
[2m2025-06-23T02:04:00.213558Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=174, ts=72688
[2m2025-06-23T02:04:00.231048Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=175, ts=72848
[2m2025-06-23T02:04:00.254300Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:04:00.254358Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.254368Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.254384Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:04:00.254394Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:04:00.254892Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=228, ts=73144
[2m2025-06-23T02:04:00.273739Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=177, ts=73168
[2m2025-06-23T02:04:00.273739Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=229, ts=73304
[2m2025-06-23T02:04:00.331107Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=180, ts=73648
[2m2025-06-23T02:04:00.331114Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=231, ts=73624
[2m2025-06-23T02:04:00.351905Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=232, ts=73784
[2m2025-06-23T02:04:00.355357Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:04:00.355371Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.355378Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.355391Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:04:00.355397Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:04:00.374473Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=234, ts=74104
[2m2025-06-23T02:04:00.389720Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=183, ts=74128
[2m2025-06-23T02:04:00.413392Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=184, ts=74288
[2m2025-06-23T02:04:00.413395Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=236, ts=74424
[2m2025-06-23T02:04:00.429808Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=185, ts=74448
[2m2025-06-23T02:04:00.454713Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=238, ts=74744
[2m2025-06-23T02:04:00.455937Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:04:00.456007Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.456017Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.456033Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:04:00.456038Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:04:00.471236Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=187, ts=74768
[2m2025-06-23T02:04:00.493895Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=239, ts=74904
[2m2025-06-23T02:04:00.557290Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:04:00.557357Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.557368Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.557400Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:04:00.557407Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:04:00.633050Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=195, ts=76048
[2m2025-06-23T02:04:00.633050Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=246, ts=76024
[2m2025-06-23T02:04:00.651580Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=196, ts=76208
[2m2025-06-23T02:04:00.651580Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=247, ts=76184
[2m2025-06-23T02:04:00.658596Z[0m [32m INFO[0m 📊 Active calls: 2
[2m2025-06-23T02:04:00.658635Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.658643Z[0m [32m INFO[0m    - Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.658658Z[0m [32m INFO[0m 🧹 Cleaning up 3 terminated calls
[2m2025-06-23T02:04:00.658664Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551615, Connected=2
[2m2025-06-23T02:04:00.674242Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1c, seq=248, ts=76344
[2m2025-06-23T02:04:00.674242Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=197, ts=76368
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: "BYE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883194_BYE\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag004\r\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-939fd13e6b35497eb74aaa5a480fb853\r\nCall-ID: 4-88319@127.0.0.1\r\nCSeq: 2 BYE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nContent-Length: 0\r\n\r\n"
Input as hex: [42, 59, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 38, 38, 33, 31, 39, 34, 5f, 42, 59, 45, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 34, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 39, 33, 39, 66, 64, 31, 33, 65, 36, 62, 33, 35, 34, 39, 37, 65, 62, 37, 34, 61, 61, 61, 35, 61, 34, 38, 30, 66, 62, 38, 35, 33, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 34, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 32, 20, 42, 59, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 57, 51, 57, 102, 100, 49, 51, 101, 54, 98, 51, 53, 52, 57, 55, 101, 98, 55, 52, 97, 97, 97, 53, 97, 52, 56, 48, 102, 98, 56, 53, 51]
Successfully parsed tag: tag-939fd13e6b35497eb74aaa5a480fb853
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:04:00.693331Z[0m [32m INFO[0m Created new ServerNonInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK883194_BYE:BYE:server) [3mmethod[0m[2m=[0mBYE
Transaction loop starting for Key(z9hG4bK883194_BYE:BYE:server)
Initial state: Trying
[2m2025-06-23T02:04:00.693400Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
Received command: TransitionTo(Trying) for transaction Key(z9hG4bK883194_BYE:BYE:server)
Processing TransitionTo(Trying) current state: Trying
Already in requested state, no transition needed: Trying
Received command: ProcessMessage(Request(Request { method: Bye, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK883194_BYE")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag004")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [Tag("tag-939fd13e6b35497eb74aaa5a480fb853")] })), CallId(CallId("4-88319@127.0.0.1")), CSeq(CSeq { seq: 2, method: Bye }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), ContentLength(ContentLength(0))], body: b"" })) for transaction Key(z9hG4bK883194_BYE:BYE:server)
[2m2025-06-23T02:04:00.693462Z[0m [32m INFO[0m BYE processed for dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642
Received command: TransitionTo(Completed) for transaction Key(z9hG4bK883194_BYE:BYE:server)
Processing TransitionTo(Completed) current state: Trying
Valid state transition: Trying -> Completed
State successfully changed to: Completed
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallTerminated { dialog_id: DialogId(43f5015a-0e99-4b8b-bef1-a75b420c1642), reason: "BYE received" }
Sent StateChanged event result: Success
[2m2025-06-23T02:04:00.693515Z[0m [32m INFO[0m handle_call_terminated called for dialog 43f5015a-0e99-4b8b-bef1-a75b420c1642: BYE received
[2m2025-06-23T02:04:00.693542Z[0m [32m INFO[0m Call terminated for session sess_bf439f50-a608-4f75-8532-0a114c914697: 43f5015a-0e99-4b8b-bef1-a75b420c1642 - BYE received
🎯 COORDINATOR: Handling event: SessionTerminated { session_id: SessionId("sess_bf439f50-a608-4f75-8532-0a114c914697"), reason: "BYE received" }
🎯 COORDINATOR: Matched SessionTerminated event for sess_bf439f50-a608-4f75-8532-0a114c914697 - BYE received
🔴 COORDINATOR: handle_session_terminated called for session sess_bf439f50-a608-4f75-8532-0a114c914697 with reason: BYE received
[2m2025-06-23T02:04:00.693570Z[0m [32m INFO[0m Session sess_bf439f50-a608-4f75-8532-0a114c914697 terminated: BYE received
[2m2025-06-23T02:04:00.693576Z[0m [33m WARN[0m No media session found for SIP session: sess_bf439f50-a608-4f75-8532-0a114c914697
🔔 COORDINATOR: Handler exists, checking for session sess_bf439f50-a608-4f75-8532-0a114c914697
✅ COORDINATOR: Found session sess_bf439f50-a608-4f75-8532-0a114c914697, calling handler.on_call_ended
[2m2025-06-23T02:04:00.693596Z[0m [32m INFO[0m Notifying handler about session sess_bf439f50-a608-4f75-8532-0a114c914697 termination
[2m2025-06-23T02:04:00.693607Z[0m [32m INFO[0m 🔚 Call d73cd697-e3f3-447e-8422-d13ce2a6cbd6 state changed: "None" -> Terminated
[2m2025-06-23T02:04:00.693614Z[0m [32m INFO[0m 💬 Reason: BYE received
🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_bf439f50-a608-4f75-8532-0a114c914697"), old_state: Active, new_state: Terminated }
[2m2025-06-23T02:04:00.693628Z[0m [32m INFO[0m Session sess_bf439f50-a608-4f75-8532-0a114c914697 state changed: Active -> Terminated
[2m2025-06-23T02:04:00.693632Z[0m [33m WARN[0m No media session found for SIP session: sess_bf439f50-a608-4f75-8532-0a114c914697
[2m2025-06-23T02:04:00.758863Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:00.758892Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.758908Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:00.758911Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:00.773229Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=202, ts=77168
[2m2025-06-23T02:04:00.809699Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=204, ts=77488
[2m2025-06-23T02:04:00.860313Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:00.860331Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.860341Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:00.860347Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:00.869593Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=207, ts=77968
[2m2025-06-23T02:04:00.892537Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=208, ts=78128
[2m2025-06-23T02:04:00.931203Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=210, ts=78448
[2m2025-06-23T02:04:00.951959Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=211, ts=78608
[2m2025-06-23T02:04:00.961054Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:00.961065Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:00.961080Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:00.961084Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:01.062913Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:01.062954Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:01.062969Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:01.062975Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:01.070138Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=217, ts=79568
[2m2025-06-23T02:04:01.089708Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=218, ts=79728
[2m2025-06-23T02:04:01.150353Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=221, ts=80208
[2m2025-06-23T02:04:01.164683Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:01.164774Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:01.164883Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:01.164938Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:01.253341Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=226, ts=81008
[2m2025-06-23T02:04:01.266054Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:01.266077Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:01.266096Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:01.266102Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:01.269600Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=227, ts=81168
[2m2025-06-23T02:04:01.294730Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=228, ts=81328
[2m2025-06-23T02:04:01.333779Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=230, ts=81648
[2m2025-06-23T02:04:01.367742Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:01.367789Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:01.367812Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:01.367823Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:01.392814Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=233, ts=82128
[2m2025-06-23T02:04:01.469981Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:01.470039Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:01.470061Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:01.470071Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:01.473338Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=237, ts=82768
[2m2025-06-23T02:04:01.530982Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=240, ts=83248
[2m2025-06-23T02:04:01.554785Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=241, ts=83408
[2m2025-06-23T02:04:01.570934Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:01.570965Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:01.570982Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:01.570988Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
[2m2025-06-23T02:04:01.592806Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=243, ts=83728
[2m2025-06-23T02:04:01.633015Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=245, ts=84048
[2m2025-06-23T02:04:01.653291Z[0m [32m INFO[0m Transport received packet with SSRC=1816bb1e, seq=246, ts=84208
[2m2025-06-23T02:04:01.672096Z[0m [32m INFO[0m 📊 Active calls: 1
[2m2025-06-23T02:04:01.672207Z[0m [32m INFO[0m    - Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f: state=Connected, direction=Incoming
[2m2025-06-23T02:04:01.672349Z[0m [32m INFO[0m 🧹 Cleaning up 4 terminated calls
[2m2025-06-23T02:04:01.672413Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551613, Connected=1
=== PARSING SIP MESSAGE ===
Input length: 353 bytes
Input as string: "BYE sip:service@127.0.0.1:5060 SIP/2.0\r\nVia: SIP/2.0/UDP 127.0.0.1:5061;branch=z9hG4bK883195_BYE\r\nFrom: sipp <sip:sipp@127.0.0.1:5061>;tag=88319SIPpTag005\r\nTo: service <sip:service@127.0.0.1:5060>;tag=tag-2122f0b20ef84e97ab09f43ad2b36b01\r\nCall-ID: 5-88319@127.0.0.1\r\nCSeq: 2 BYE\r\nContact: sip:sipp@127.0.0.1:5061\r\nMax-Forwards: 70\r\nContent-Length: 0\r\n\r\n"
Input as hex: [42, 59, 45, 20, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 20, 53, 49, 50, 2f, 32, 2e, 30, 0d, 0a, 56, 69, 61, 3a, 20, 53, 49, 50, 2f, 32, 2e, 30, 2f, 55, 44, 50, 20, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3b, 62, 72, 61, 6e, 63, 68, 3d, 7a, 39, 68, 47, 34, 62, 4b, 38, 38, 33, 31, 39, 35, 5f, 42, 59, 45, 0d, 0a, 46, 72, 6f, 6d, 3a, 20, 73, 69, 70, 70, 20, 3c, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 3e, 3b, 74, 61, 67, 3d, 38, 38, 33, 31, 39, 53, 49, 50, 70, 54, 61, 67, 30, 30, 35, 0d, 0a, 54, 6f, 3a, 20, 73, 65, 72, 76, 69, 63, 65, 20, 3c, 73, 69, 70, 3a, 73, 65, 72, 76, 69, 63, 65, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 30, 3e, 3b, 74, 61, 67, 3d, 74, 61, 67, 2d, 32, 31, 32, 32, 66, 30, 62, 32, 30, 65, 66, 38, 34, 65, 39, 37, 61, 62, 30, 39, 66, 34, 33, 61, 64, 32, 62, 33, 36, 62, 30, 31, 0d, 0a, 43, 61, 6c, 6c, 2d, 49, 44, 3a, 20, 35, 2d, 38, 38, 33, 31, 39, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 0d, 0a, 43, 53, 65, 71, 3a, 20, 32, 20, 42, 59, 45, 0d, 0a, 43, 6f, 6e, 74, 61, 63, 74, 3a, 20, 73, 69, 70, 3a, 73, 69, 70, 70, 40, 31, 32, 37, 2e, 30, 2e, 30, 2e, 31, 3a, 35, 30, 36, 31, 0d, 0a, 4d, 61, 78, 2d, 46, 6f, 72, 77, 61, 72, 64, 73, 3a, 20, 37, 30, 0d, 0a, 43, 6f, 6e, 74, 65, 6e, 74, 2d, 4c, 65, 6e, 67, 74, 68, 3a, 20, 30, 0d, 0a, 0d, 0a]
===========================
Attempting to parse tag from: [116, 97, 103, 61, 116, 97, 103, 45, 50, 49, 50, 50, 102, 48, 98, 50, 48, 101, 102, 56, 52, 101, 57, 55, 97, 98, 48, 57, 102, 52, 51, 97, 100, 50, 98, 51, 54, 98, 48, 49]
Successfully parsed tag: tag-2122f0b20ef84e97ab09f43ad2b36b01
=== PARSE SUCCESS ===
Successfully parsed message
=====================
[2m2025-06-23T02:04:01.705247Z[0m [32m INFO[0m Created new ServerNonInviteTransaction [3mid[0m[2m=[0mKey(z9hG4bK883195_BYE:BYE:server) [3mmethod[0m[2m=[0mBYE
Transaction loop starting for Key(z9hG4bK883195_BYE:BYE:server)
Initial state: Trying
Received command: TransitionTo(Trying) for transaction Key(z9hG4bK883195_BYE:BYE:server)
Processing TransitionTo(Trying) current state: Trying
Already in requested state, no transition needed: Trying
Received command: ProcessMessage(Request(Request { method: Bye, uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, version: Version { major: 2, minor: 0 }, headers: [Via(Via([ViaHeader { sent_protocol: SentProtocol { name: "SIP", version: "2.0", transport: "UDP" }, sent_by_host: Address(127.0.0.1), sent_by_port: Some(5061), params: [Branch("z9hG4bK883195_BYE")] }])), From(From(Address { display_name: Some("sipp"), uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [Tag("88319SIPpTag005")] })), To(To(Address { display_name: Some("service"), uri: Uri { scheme: Sip, user: Some("service"), password: None, host: Address(127.0.0.1), port: Some(5060), parameters: [], headers: {}, raw_uri: None }, params: [Tag("tag-2122f0b20ef84e97ab09f43ad2b36b01")] })), CallId(CallId("5-88319@127.0.0.1")), CSeq(CSeq { seq: 2, method: Bye }), Contact(Contact([Params([ContactParamInfo { address: Address { display_name: None, uri: Uri { scheme: Sip, user: Some("sipp"), password: None, host: Address(127.0.0.1), port: Some(5061), parameters: [], headers: {}, raw_uri: None }, params: [] } }])])), MaxForwards(MaxForwards(70)), ContentLength(ContentLength(0))], body: b"" })) for transaction Key(z9hG4bK883195_BYE:BYE:server)
[2m2025-06-23T02:04:01.705329Z[0m [32m INFO[0m Sending response message to 127.0.0.1:5061
[2m2025-06-23T02:04:01.705499Z[0m [32m INFO[0m BYE processed for dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3
Received command: TransitionTo(Completed) for transaction Key(z9hG4bK883195_BYE:BYE:server)
Processing TransitionTo(Completed) current state: Trying
Valid state transition: Trying -> Completed
State successfully changed to: Completed
Sent StateChanged event result: Success
📨 EVENT LOOP: Received session coordination event in background task
🎪 SESSION COORDINATION: Received event: CallTerminated { dialog_id: DialogId(9bf121bb-a573-4383-8c94-8a648b1f76d3), reason: "BYE received" }
[2m2025-06-23T02:04:01.705577Z[0m [32m INFO[0m handle_call_terminated called for dialog 9bf121bb-a573-4383-8c94-8a648b1f76d3: BYE received
[2m2025-06-23T02:04:01.705585Z[0m [32m INFO[0m Call terminated for session sess_08fe24db-0259-407a-b5ec-326570c14038: 9bf121bb-a573-4383-8c94-8a648b1f76d3 - BYE received
🎯 COORDINATOR: Handling event: SessionTerminated { session_id: SessionId("sess_08fe24db-0259-407a-b5ec-326570c14038"), reason: "BYE received" }
🎯 COORDINATOR: Matched SessionTerminated event for sess_08fe24db-0259-407a-b5ec-326570c14038 - BYE received
🔴 COORDINATOR: handle_session_terminated called for session sess_08fe24db-0259-407a-b5ec-326570c14038 with reason: BYE received
[2m2025-06-23T02:04:01.705619Z[0m [32m INFO[0m Session sess_08fe24db-0259-407a-b5ec-326570c14038 terminated: BYE received
[2m2025-06-23T02:04:01.705628Z[0m [33m WARN[0m No media session found for SIP session: sess_08fe24db-0259-407a-b5ec-326570c14038
🔔 COORDINATOR: Handler exists, checking for session sess_08fe24db-0259-407a-b5ec-326570c14038
✅ COORDINATOR: Found session sess_08fe24db-0259-407a-b5ec-326570c14038, calling handler.on_call_ended
[2m2025-06-23T02:04:01.705645Z[0m [32m INFO[0m Notifying handler about session sess_08fe24db-0259-407a-b5ec-326570c14038 termination
[2m2025-06-23T02:04:01.705655Z[0m [32m INFO[0m 🔚 Call 68fe7b67-67c8-40c1-93a4-4889eb9dd84f state changed: "None" -> Terminated
[2m2025-06-23T02:04:01.705661Z[0m [32m INFO[0m 💬 Reason: BYE received
🎯 COORDINATOR: Handling event: StateChanged { session_id: SessionId("sess_08fe24db-0259-407a-b5ec-326570c14038"), old_state: Active, new_state: Terminated }
[2m2025-06-23T02:04:01.705677Z[0m [32m INFO[0m Session sess_08fe24db-0259-407a-b5ec-326570c14038 state changed: Active -> Terminated
[2m2025-06-23T02:04:01.705682Z[0m [33m WARN[0m No media session found for SIP session: sess_08fe24db-0259-407a-b5ec-326570c14038
[2m2025-06-23T02:04:01.773817Z[0m [32m INFO[0m 🧹 Cleaning up 5 terminated calls
[2m2025-06-23T02:04:01.773884Z[0m [32m INFO[0m 📊 Server Stats: Total=5, Active=18446744073709551611, Connected=0
