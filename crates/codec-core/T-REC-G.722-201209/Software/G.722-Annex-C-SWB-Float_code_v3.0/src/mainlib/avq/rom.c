/* ITU G.722 3rd Edition (2012-09) */

/*--------------------------------------------------------------------------
 ITU-T G.722 Annex C (ex G.722-SWB-Float) Source Code
 Software Release 1.01 (2012-07)
 (C) 2012 France Telecom, Huawei Technologies, VoiceAge Corp., NTT.
--------------------------------------------------------------------------*/

#include "rom.h"

/*------------------------------------------------------------------------------*
 * RE8 related tables rom
 *------------------------------------------------------------------------------*/

/* select table */
const Short Select_table22[5][9]={
    {1,  1,  1,  1,  1,  1,  1,  1,  1},
    {0,  1,  2,  3,  4,  5,  6,  7,  8},
    {0,  0,  1,  3,  6, 10, 15, 21, 28},
    {0,  0,  0,  1,  4, 10, 20, 35, 56},
    {0,  0,  0,  0,  1,  5, 15, 35, 70}
};

/* value of leader element */
const Short Vals_a[36][3]={
    {1},     {0,2},    {0,2},    {1,3},    {0,4},     {2,0},    {1,3},   {0,2,4},
    {2},     {1,3},    {2,0,4},  {0,4},    {1,5},     {1,3},    {2,0,4}, {0,2,4},
    {1,3,5}, {0,2,6},  {0,4},    {0,2,6},  {0,2,4},   {1,7},    {0,8},   {0,6},
    {0,2,8}, {0,4,8},  {1,9},    {0,2,10}, {0,8},     {0,6,10}, {0,12},  {0,4,12},
    {0,10},  {0,2,14}, {0,8,12}, {0,16} };

/* code parameter for every leader */
const Short Vals_q[36][4]={
    {7,1},     {2,2,2},   {4,2,4},   {7,2,1},   {1,2,1},   {6,2,2},   {7,2,2},   {3,3,3,1},
    {8,1},     {7,2,3},   {5,3,4,1}, {2,2,2},   {7,2,1},   {7,2,4},   {7,3,2,1}, {4,3,4,2},
    {7,3,2,1}, {2,3,2,1}, {3,2,3},   {4,3,4,1}, {3,4,3,2}, {7,2,1},   {1,2,1},   {2,2,2},
    {3,3,3,1}, {2,3,2,1}, {7,2,1},   {2,3,2,1}, {2,2,2},   {2,3,2,1}, {1,2,1},   {2,3,2,1},
    {2,2,2},   {2,3,2,1}, {2,3,2,1}, {1,2,1} };

/* codebook start address for every leader */
const unsigned short IS_new[36]={
    0,    128,   256,  1376,   240,     0,  1792,  2400,
 5376,   5632, 12800,  3744, 21760, 22784, 31744, 38912,
 45632,  3856, 52800, 53248, 57728, 60416,  4080, 61440,
 61552, 62896, 63120, 64144, 64368, 64480, 64704, 64720,
 64944, 65056, 65280, 65504};

/*------------------------------------------------------------------------------*
 * Da_pos - Position of the first absolute leader on a spherical shell (or sphere)
 *------------------------------------------------------------------------------*/
const Short Da_pos_[NB_SPHERE] = {
  0,  2,  5,  8, 13, 18, 20, 22, 23, 25, 26, 27, 27, 28, 28, 28,
 29, 30, 31, 31, 32, 32, 32, 32, 32, 34, 35, 35, 35, 35, 35, 35};

/*------------------------------------------------------------------------------*
 * Da_nb - Number of absolute leaders on a spherical shell
 *------------------------------------------------------------------------------*/
const Short Da_nb_[NB_SPHERE] = {
 2, 3, 3, 5, 5, 2, 2, 1, 2, 1, 1, 0, 1, 0, 0, 1,
 1, 1, 0, 1, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 1};

/*------------------------------------------------------------------------------*
 * Da_id - identification code of an absolute leader
 *------------------------------------------------------------------------------*/
Short Da_id_[NB_LEADER] = {
 0x0001, 0x0004, 0x0008, 0x000B, 0x0020, 0x000C, 0x0015, 0x0024,
 0x0010, 0x001F, 0x0028, 0x0040, 0x004F, 0x0029, 0x002C, 0x0044,
 0x0059, 0x00A4, 0x0060, 0x00A8, 0x00C4, 0x012D, 0x0200, 0x0144,
 0x0204, 0x0220, 0x0335, 0x04E4, 0x0400, 0x0584, 0x0A20, 0x0A40,
 0x09C4, 0x12C4, 0x0C20, 0x2000};

/*------------------------------------------------------------------------------*
 * Da_nq - Codebook number for each absolute leader
 *------------------------------------------------------------------------------*/
const Short Da_nq_[NB_LEADER+2] = {
  2,  2,  3,  3,  2,  4,  4,  3,  4,  4,  4,  3,  4,  4,  4,  4,
  4,  3,  4,  4,  4,  4,  3,  4,  4,  4,  4,  4,  4,  4,  4,  4,
  4,  4,  4,  4,  0, 100};

/*------------------------------------------------------------------------------*
 * RE8 related tables rom
 *------------------------------------------------------------------------------*/

const Short DIV_mult[7] = {1,1,1,342,1,1,171};
const Short DIV_shift[7] ={0,0,1, 10,2,0, 10};
/* ------------------------------------------------------------------- */
/*        method memory:   9  table of A3                              */
/*        Part 3           27 table of A4                              */
/*                         9  table of I3                              */
/*                         27 table of I4                              */
/*               total :   72                                          */
/* ------------------------------------------------------------------- */

/* A3 - Number of the absolute leaders in codebook */
const Short A3_[NB_LDQ3]={
   0,  1,  4,  2,  3,  7, 11, 17, 22};
/* A4 - Number of the absolute leaders in codebook */
const Short A4_[NB_LDQ4]={
   5,  6,  8,  9, 10, 12, 13, 14, 15,
  16, 18, 19, 20, 21, 23, 24, 25, 26,
  27, 28, 29, 30, 31, 32, 33, 34, 35};
/* I3 - Cardinality offsets for absolute leaders */
const unsigned short I3_[NB_LDQ3+1]={
      0,   128,   240,   256,  1376,  2400,  3744,  3856,  4080,  65520};
/* I4 - Cardinality offset for absolute leaders */
const unsigned short I4_[NB_LDQ4+1]={
      0,  1792,  5376,  5632, 12800, 21760, 22784, 31744, 38912,
  45632, 52800, 53248, 57728, 60416, 61440, 61552, 62896, 63120,
  64144, 64368, 64480, 64704, 64720, 64944, 65056, 65280, 65504, 65520};

/*------------------------------------------------------------------------------*
 * swb_avq_decode.c/swb_avq_encode.c tables rom
 *------------------------------------------------------------------------------*/

Float codebookL[256]={
        0.1857f,0.1857f,0.1857f,0.1857f,
        0.1857f,0.1857f,0.1857f,0.5571f,
        0.1857f,0.1857f,0.1857f,0.9286f,
        0.1857f,0.1857f,0.5571f,0.1857f,
        0.1857f,0.1857f,0.5571f,0.5571f,
        0.1857f,0.1857f,0.5571f,0.9286f,
        0.1857f,0.1857f,0.9286f,0.1857f,
        0.1857f,0.1857f,0.9286f,0.5571f,
        0.1857f,0.5571f,0.1857f,0.1857f,
        0.1857f,0.5571f,0.1857f,0.5571f,
        0.1857f,0.5571f,0.1857f,0.9286f,
        0.1857f,0.5571f,0.5571f,0.1857f,
        0.1857f,0.5571f,0.5571f,0.5571f,
        0.1857f,0.5571f,0.5571f,0.9286f,
        0.1857f,0.5571f,0.9286f,0.1857f,
        0.1857f,0.5571f,0.9286f,0.5571f,
        0.1857f,0.9286f,0.1857f,0.1857f,
        0.1857f,0.9286f,0.1857f,0.5571f,
        0.1857f,0.9286f,0.5571f,0.1857f,
        0.1857f,0.9286f,0.5571f,0.5571f,
        0.3714f,0.3714f,0.3714f,0.3714f,
        0.3714f,0.3714f,0.3714f,0.7429f,
        0.3714f,0.3714f,0.3714f,1.1143f,
        0.3714f,0.3714f,0.7429f,0.3714f,
        0.3714f,0.3714f,0.7429f,0.7429f,
        0.3714f,0.3714f,1.1143f,0.3714f,
        0.3714f,0.7429f,0.3714f,0.3714f,
        0.3714f,0.7429f,0.3714f,0.7429f,
        0.3714f,0.7429f,0.7429f,0.3714f,
        0.3714f,1.1143f,0.3714f,0.3714f,
        0.5571f,0.1857f,0.1857f,0.1857f,
        0.5571f,0.1857f,0.1857f,0.5571f,
        0.5571f,0.1857f,0.1857f,0.9286f,
        0.5571f,0.1857f,0.5571f,0.1857f,
        0.5571f,0.1857f,0.5571f,0.5571f,
        0.5571f,0.1857f,0.5571f,0.9286f,
        0.5571f,0.1857f,0.9286f,0.1857f,
        0.5571f,0.1857f,0.9286f,0.5571f,
        0.5571f,0.5571f,0.1857f,0.1857f,
        0.5571f,0.5571f,0.1857f,0.5571f,
        0.5571f,0.5571f,0.1857f,0.9286f,
        0.5571f,0.5571f,0.5571f,0.1857f,
        0.5571f,0.5571f,0.5571f,0.5571f,
        0.5571f,0.5571f,0.9286f,0.1857f,
        0.5571f,0.9286f,0.1857f,0.1857f,
        0.5571f,0.9286f,0.1857f,0.5571f,
        0.5571f,0.9286f,0.5571f,0.1857f,
        0.7429f,0.3714f,0.3714f,0.3714f,
        0.7429f,0.3714f,0.3714f,0.7429f,
        0.7429f,0.3714f,0.7429f,0.3714f,
        0.7429f,0.7429f,0.3714f,0.3714f,
        0.9286f,0.1857f,0.1857f,0.1857f,
        0.9286f,0.1857f,0.1857f,0.5571f,
        0.9286f,0.1857f,0.5571f,0.1857f,
        0.9286f,0.1857f,0.5571f,0.5571f,
        0.9286f,0.5571f,0.1857f,0.1857f,
        0.9286f,0.5571f,0.1857f,0.5571f,
        0.9286f,0.5571f,0.5571f,0.1857f,
        1.1143f,0.3714f,0.3714f,0.3714f,
        0.0223f,0.0223f,0.0223f,0.0223f,
        0.0929f,0.0464f,0.0464f,0.0464f,
        0.0464f,0.0929f,0.0464f,0.0464f,
        0.0464f,0.0464f,0.0929f,0.0464f,
        0.0464f,0.0464f,0.0464f,0.0929f
};


Float codebookH[256]={
        0.9300f,0.6374f,0.5553f,0.7465f,
        1.3130f,0.9437f,0.4517f,0.3173f,
        0.5893f,0.5564f,0.5060f,1.3523f,
        1.1058f,1.1373f,0.7109f,0.6353f,
        0.7891f,1.0056f,0.5395f,0.3628f,
        1.9455f,0.5411f,0.4185f,0.2455f,
        0.6170f,0.5985f,1.1183f,0.6905f,
        1.6763f,1.6116f,1.6630f,1.5902f,
        0.6464f,0.8915f,0.6567f,0.7813f,
        1.2191f,0.9536f,0.6168f,1.2332f,
        0.7156f,1.2481f,0.6675f,1.2325f,
        1.6156f,1.2715f,0.6041f,0.4975f,
        0.7076f,2.3183f,0.6425f,0.4246f,
        1.8983f,1.1219f,1.1787f,0.5012f,
        1.1881f,0.7768f,1.7488f,0.8966f,
        2.3944f,1.6275f,1.8143f,1.0900f,
        0.9748f,0.6479f,0.8420f,0.4001f,
        1.5950f,0.7094f,0.8116f,0.4098f,
        0.4671f,0.4327f,0.5291f,2.2856f,
        1.2853f,1.5810f,0.6926f,0.9422f,
        0.6929f,1.0926f,1.0478f,0.5307f,
        2.1905f,1.3303f,0.4568f,0.3053f,
        0.6144f,0.7236f,2.1698f,0.6760f,
        1.7527f,1.8631f,2.9335f,1.5676f,
        1.2948f,0.8212f,1.1477f,1.1591f,
        1.7374f,0.7485f,1.2871f,0.8542f,
        0.9761f,0.8021f,1.2523f,1.5392f,
        1.8466f,2.3131f,1.2286f,1.0324f,
        0.7945f,1.7977f,1.4741f,0.5687f,
        2.0506f,1.2634f,0.7836f,0.6596f,
        1.3350f,1.5435f,1.2715f,0.6942f,
        3.1633f,1.2491f,1.0440f,0.8044f,
        1.3418f,0.6816f,0.6805f,0.8092f,
        1.3997f,0.4227f,0.3595f,0.2333f,
        0.9525f,0.8192f,0.7367f,1.8940f,
        1.5474f,1.1217f,0.8973f,0.8734f,
        0.6888f,1.5372f,0.5596f,0.3547f,
        2.5833f,0.5193f,0.4318f,0.2319f,
        0.6888f,0.9892f,1.3870f,1.1087f,
        1.6787f,1.7517f,1.6691f,2.6628f,
        0.8678f,0.7839f,0.9271f,1.0530f,
        1.6745f,0.9363f,0.8532f,1.5204f,
        1.0303f,1.3738f,1.0570f,1.5486f,
        1.8344f,1.7658f,0.5740f,0.4489f,
        1.3319f,1.9681f,0.8034f,0.5600f,
        2.2647f,0.7340f,1.0734f,0.4181f,
        1.5358f,1.1476f,1.6798f,0.6042f,
        2.9652f,1.9769f,1.9471f,2.0011f,
        1.1736f,0.9261f,1.1759f,0.6262f,
        2.0202f,0.8259f,0.6636f,0.9295f,
        1.0887f,0.6779f,0.4438f,0.3381f,
        1.6685f,1.5102f,0.8646f,1.0968f,
        1.0068f,1.2944f,1.0657f,0.9709f,
        2.3789f,0.9382f,0.5904f,0.4417f,
        0.8876f,1.3528f,1.7860f,0.9326f,
        3.1716f,2.7570f,1.5365f,1.2436f,
        1.3483f,1.2382f,1.3761f,1.0979f,
        1.9137f,1.1523f,1.2115f,1.0207f,
        0.5225f,0.7566f,1.7482f,1.7971f,
        2.0256f,3.1176f,1.8769f,1.6109f,
        0.9459f,1.8767f,1.0746f,1.0430f,
        2.4571f,1.7263f,0.9636f,0.9219f,
        1.7337f,1.5607f,1.0723f,0.5942f,
        4.1317f,1.8700f,1.4056f,1.0738f};

const float t_qua_MB_coef[2*8] = {
        0.3919f, 0.3773f, 1.2206f, 1.0933f, 0.3859f, 1.3158f, 1.3488f, 0.3453f,
        2.5938f, 0.5083f, 1.3331f, 2.1450f, 2.3953f, 1.6594f, 0.5223f, 2.8367f };

const Float f_sg0[5] = { 0, 0.20001220703125f, 0.4000244140625f, 0.5999755859375f, 0.79998779296875f };
const Float fgain_frac[8] = { 0.54522705078125f, 0.6484375000000f, 0.77111816406250f, 0.84088134765625f,
                              0.91699218750000f, 1.0000000000000f, 1.09051513671875f, 1.29681396484375f };

const Float f_dentbl[9] = { 0.125000000000000f, 0.142852783203125f, 0.166656494140625f, 0.200012207031250f,
                            0.250000000000000f, 0.333343505859375f, 0.500000000000000f, 1.000000000000000f,
                            1.000000000000000f };

const Float Gain_In_flt[] = { 0.013675299f, 0.025574400f, 0.047827300f, 0.089442801f,
                              0.167268801f, 0.312813103f, 0.584998706f, 1.000000000f };
const Float Gain_Out_flt[9] = { 0.010000000f, 0.018707275f, 0.034973145f, 0.065399170f,
                                0.122314453f, 0.228729248f, 0.427764893f, 0.800000000f };
const Float fgrad[] = { 1.34997558593750f, 1.25000000000000f, 1.15002441406250f, 1.04998779296875f,
                        0.95001220703125f, 0.84997558593750f, 0.75000000000000f, 0.65002441406250f,
                        1.17498779296875f, 1.12500000000000f, 1.07501220703125f, 1.02502441406250f,
                        0.97497558593750f, 0.92498779296875f, 0.87500000000000f, 0.82501220703125f,
                        0.65002441406250f, 0.75000000000000f, 0.84997558593750f, 0.95001220703125f,
                        1.04998779296875f, 1.15002441406250f, 1.25000000000000f, 1.34997558593750f };
