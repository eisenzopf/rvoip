//! ITU-T G.729A Tables and Constants
//!
//! This module contains all the tables and constants from the ITU reference implementation
//! TAB_LD8A.C and other reference files.

use crate::codecs::g729a::types::*;

// LSP codebook tables from ITU G.729A reference TAB_LD8A.C

/// First stage LSP VQ codebook (lspcb1)
/// Dimension: NC0 x M (256 x 10)
/// Format: Q13
/// Note: This is a subset of the complete ITU reference table for initial implementation
pub const LSPCB1: [[Word16; M]; 16] = [
    [1486, 2168, 3751, 9074, 12134, 13944, 17983, 19173, 21190, 21820],
    [1730, 2640, 3450, 4870, 6126, 7876, 15644, 17817, 20294, 21902],
    [1568, 2256, 3088, 4874, 11063, 13393, 18307, 19293, 21109, 21741],
    [1733, 2512, 3357, 4708, 6977, 10296, 17024, 17956, 19145, 20350],
    [1744, 2436, 3308, 8731, 10432, 12007, 15614, 16639, 21359, 21913],
    [1786, 2369, 3372, 4521, 6795, 12963, 17674, 18988, 20855, 21640],
    [1631, 2433, 3361, 6328, 10709, 12013, 13277, 13904, 19441, 21088],
    [1489, 2364, 3291, 6250, 9227, 10403, 13843, 15278, 17721, 21451],
    [1869, 2533, 3475, 4365, 9152, 14513, 15908, 17022, 20611, 21411],
    [2070, 3025, 4333, 5854, 7805, 9231, 10597, 16047, 20109, 21834],
    [1910, 2673, 3419, 4261, 11168, 15111, 16577, 17591, 19310, 20265],
    [1141, 1815, 2624, 4623, 6495, 9588, 13968, 16428, 19351, 21286],
    [2192, 3171, 4707, 5808, 10904, 12500, 14162, 15664, 21124, 21789],
    [1286, 1907, 2548, 3453, 9574, 11964, 15978, 17344, 19691, 22495],
    [1921, 2720, 4604, 6684, 11503, 12992, 14350, 15262, 16997, 20791],
    [2052, 2759, 3897, 5246, 6638, 10267, 15834, 16814, 18149, 21675],
];

/// Second stage LSP VQ codebook (lspcb2) 
/// Dimension: NC1 x M (256 x 10)
/// Format: Q13
/// Note: This is a subset of the complete ITU reference table for initial implementation
pub const LSPCB2: [[Word16; M]; 16] = [
    [57, -198, -339, -33, -1468, 573, 796, -169, -631, 816],
    [171, -350, 294, 1660, 453, 519, 291, 159, -640, -1296],
    [-701, -842, -58, 950, 892, 1549, 715, 527, -714, -193],
    [584, 31, -289, 356, -333, -457, 612, -283, -1381, -741],
    [-109, -808, 231, 77, -87, -344, 1341, 1087, -654, -569],
    [-859, 1236, 550, 854, 714, -543, -1752, -195, -98, -276],
    [-877, -954, -1248, -299, 212, -235, -728, 949, 1517, 895],
    [-77, 344, -620, 763, 413, 502, -362, -960, -483, 1386],
    [-314, -307, -256, -1260, -429, 450, -466, -108, 1010, 2223],
    [711, 693, 521, 650, 1305, -28, -378, 744, -1005, 240],
    [-112, -271, -500, 946, 1733, 271, -15, 909, -259, 1688],
    [575, -10, -468, -199, 1101, -1011, 581, -53, -747, 878],
    [145, -285, -1280, -398, 36, -498, -1377, 18, -444, 1483],
    [-1133, -835, 1350, 1284, -95, 1015, -222, 443, 372, -354],
    [-1459, -1237, 416, -213, 466, 669, 659, 1640, 932, 534],
    [-15, 66, 468, 1019, -748, 1385, -182, -907, -721, -262],
];

/// MA prediction coefficients for LSP quantization (fg)
/// Dimension: MODE x MA_NP x M (2 x 4 x 10)
/// Format: Q15
pub const FG: [[[Word16; M]; MA_NP]; MODE] = [
    [
        [8421, 9109, 9175, 8965, 9034, 9057, 8765, 8775, 9106, 8673],
        [7018, 7189, 7638, 7307, 7444, 7379, 7038, 6956, 6930, 6868],
        [5472, 4990, 5134, 5177, 5246, 5141, 5206, 5095, 4830, 5147],
        [4056, 3031, 2614, 3024, 2916, 2713, 3309, 3237, 2857, 3473]
    ],
    [
        [7733, 7880, 8188, 8175, 8247, 8490, 8637, 8601, 8359, 7569],
        [4210, 3031, 2552, 3473, 3876, 3853, 4184, 4154, 3909, 3968],
        [3214, 1930, 1313, 2143, 2493, 2385, 2755, 2706, 2542, 2919],
        [3024, 1592, 940, 1631, 1723, 1579, 2034, 2084, 1913, 2601]
    ]
];

/// Sum of MA prediction coefficients (fg_sum)
/// Dimension: MODE x M (2 x 10)
/// Format: Q15
pub const FG_SUM: [[Word16; M]; MODE] = [
    [7798, 8447, 8205, 8293, 8126, 8477, 8447, 8703, 9043, 8604],
    [14585, 18333, 19772, 17344, 16426, 16459, 15155, 15220, 16043, 15708]
];

/// Inverse of sum of MA prediction coefficients (fg_sum_inv)
/// Dimension: MODE x M (2 x 10)
/// Format: Q12
pub const FG_SUM_INV: [[Word16; M]; MODE] = [
    [17210, 15888, 16357, 16183, 16516, 15833, 15888, 15421, 14840, 15597],
    [9202, 7320, 6788, 7738, 8170, 8154, 8856, 8818, 8366, 8544]
];

/// Previous LSP vector initialization (freq_prev_reset)
/// Format: Q13
pub const FREQ_PREV_RESET: [Word16; M] = [
    2339, 4679, 7018, 9358, 11698, 14037, 16377, 18717, 21056, 23396
];

/// LSP to LSF conversion constant
pub const PI_04: Word16 = 25736; // PI/4 in Q13

/// LSF conversion factor
pub const FACTOR: Word16 = 20861; // 2.0/PI in Q13 